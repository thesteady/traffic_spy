== Info: About to connect() to localhost port 9393 (#0)
== Info:   Trying ::1...
== Info: Connection refused
== Info:   Trying 127.0.0.1...
== Info: connected
== Info: Connected to localhost (127.0.0.1) port 9393 (#0)
=> Send header, 235 bytes (0xeb)
0000: 50 4f 53 54 20 2f 73 6f 75 72 63 65 73 2f 6b 61 POST /sources/ka
0010: 72 65 65 6d 2f 64 61 74 61 20 48 54 54 50 2f 31 reem/data HTTP/1
0020: 2e 31 0d 0a 55 73 65 72 2d 41 67 65 6e 74 3a 20 .1..User-Agent: 
0030: 63 75 72 6c 2f 37 2e 32 34 2e 30 20 28 78 38 36 curl/7.24.0 (x86
0040: 5f 36 34 2d 61 70 70 6c 65 2d 64 61 72 77 69 6e _64-apple-darwin
0050: 31 32 2e 30 29 20 6c 69 62 63 75 72 6c 2f 37 2e 12.0) libcurl/7.
0060: 32 34 2e 30 20 4f 70 65 6e 53 53 4c 2f 30 2e 39 24.0 OpenSSL/0.9
0070: 2e 38 72 20 7a 6c 69 62 2f 31 2e 32 2e 35 0d 0a .8r zlib/1.2.5..
0080: 48 6f 73 74 3a 20 6c 6f 63 61 6c 68 6f 73 74 3a Host: localhost:
0090: 39 33 39 33 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 9393..Accept: */
00a0: 2a 0d 0a 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 *..Content-Lengt
00b0: 68 3a 20 34 31 33 0d 0a 43 6f 6e 74 65 6e 74 2d h: 413..Content-
00c0: 54 79 70 65 3a 20 61 70 70 6c 69 63 61 74 69 6f Type: applicatio
00d0: 6e 2f 78 2d 77 77 77 2d 66 6f 72 6d 2d 75 72 6c n/x-www-form-url
00e0: 65 6e 63 6f 64 65 64 0d 0a 0d 0a                encoded....
=> Send data, 413 bytes (0x19d)
0000: 70 61 79 6c 6f 61 64 3d 7b 22 75 72 6c 22 3a 22 payload={"url":"
0010: 68 74 74 70 3a 2f 2f 6a 75 6d 70 73 74 61 72 74 http://jumpstart
0020: 6c 61 62 2e 63 6f 6d 2f 62 6c 6f 67 22 2c 22 72 lab.com/blog","r
0030: 65 71 75 65 73 74 65 64 41 74 22 3a 22 32 30 31 equestedAt":"201
0040: 33 2d 30 32 2d 31 36 20 32 31 3a 33 38 3a 32 38 3-02-16 21:38:28
0050: 20 2d 30 37 30 30 22 2c 22 72 65 73 70 6f 6e 64  -0700","respond
0060: 65 64 49 6e 22 3a 33 37 2c 22 72 65 66 65 72 72 edIn":37,"referr
0070: 65 64 42 79 22 3a 22 68 74 74 70 3a 2f 2f 6a 75 edBy":"http://ju
0080: 6d 70 73 74 61 72 74 6c 61 62 2e 63 6f 6d 22 2c mpstartlab.com",
0090: 22 72 65 71 75 65 73 74 54 79 70 65 22 3a 22 47 "requestType":"G
00a0: 45 54 22 2c 22 70 61 72 61 6d 65 74 65 72 73 22 ET","parameters"
00b0: 3a 5b 5d 2c 22 65 76 65 6e 74 4e 61 6d 65 22 3a :[],"eventName":
00c0: 20 22 73 6f 63 69 61 6c 4c 6f 67 69 6e 22 2c 22  "socialLogin","
00d0: 75 73 65 72 41 67 65 6e 74 22 3a 22 4d 6f 7a 69 userAgent":"Mozi
00e0: 6c 6c 61 2f 35 2e 30 20 28 4d 61 63 69 6e 74 6f lla/5.0 (Macinto
00f0: 73 68 25 33 42 20 49 6e 74 65 6c 20 4d 61 63 20 sh%3B Intel Mac 
0100: 4f 53 20 58 20 31 30 5f 38 5f 32 29 20 41 70 70 OS X 10_8_2) App
0110: 6c 65 57 65 62 4b 69 74 2f 35 33 37 2e 31 37 20 leWebKit/537.17 
0120: 28 4b 48 54 4d 4c 2c 20 6c 69 6b 65 20 47 65 63 (KHTML, like Gec
0130: 6b 6f 29 20 43 68 72 6f 6d 65 2f 32 34 2e 30 2e ko) Chrome/24.0.
0140: 31 33 30 39 2e 30 20 53 61 66 61 72 69 2f 35 33 1309.0 Safari/53
0150: 37 2e 31 37 22 2c 22 72 65 73 6f 6c 75 74 69 6f 7.17","resolutio
0160: 6e 57 69 64 74 68 22 3a 22 31 39 32 30 22 2c 22 nWidth":"1920","
0170: 72 65 73 6f 6c 75 74 69 6f 6e 48 65 69 67 68 74 resolutionHeight
0180: 22 3a 22 31 32 38 30 22 2c 22 69 70 22 3a 22 36 ":"1280","ip":"6
0190: 33 2e 32 39 2e 33 38 2e 32 31 31 22 7d          3.29.38.211"}
== Info: upload completely sent off: 413 out of 413 bytes
<= Recv header, 37 bytes (0x25)
0000: 48 54 54 50 2f 31 2e 31 20 35 30 30 20 49 6e 74 HTTP/1.1 500 Int
0010: 65 72 6e 61 6c 20 53 65 72 76 65 72 20 45 72 72 ernal Server Err
0020: 6f 72 20 0d 0a                                  or ..
<= Recv header, 25 bytes (0x19)
0000: 43 6f 6e 74 65 6e 74 2d 54 79 70 65 3a 20 74 65 Content-Type: te
0010: 78 74 2f 68 74 6d 6c 0d 0a                      xt/html..
<= Recv header, 24 bytes (0x18)
0000: 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 Content-Length: 
0010: 31 35 34 37 32 31 0d 0a                         154721..
<= Recv header, 47 bytes (0x2f)
0000: 53 65 72 76 65 72 3a 20 57 45 42 72 69 63 6b 2f Server: WEBrick/
0010: 31 2e 33 2e 31 20 28 52 75 62 79 2f 31 2e 39 2e 1.3.1 (Ruby/1.9.
0020: 33 2f 32 30 31 32 2d 30 34 2d 32 30 29 0d 0a    3/2012-04-20)..
<= Recv header, 37 bytes (0x25)
0000: 44 61 74 65 3a 20 53 75 6e 2c 20 30 33 20 4d 61 Date: Sun, 03 Ma
0010: 72 20 32 30 31 33 20 30 36 3a 33 30 3a 33 36 20 r 2013 06:30:36 
0020: 47 4d 54 0d 0a                                  GMT..
<= Recv header, 24 bytes (0x18)
0000: 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 4b 65 65 70 Connection: Keep
0010: 2d 41 6c 69 76 65 0d 0a                         -Alive..
<= Recv header, 2 bytes (0x2)
0000: 0d 0a                                           ..
<= Recv data, 16188 bytes (0x3f3c)
0000: 3c 21 44 4f 43 54 59 50 45 20 68 74 6d 6c 3e 0a <!DOCTYPE html>.
0010: 3c 68 74 6d 6c 3e 0a 3c 68 65 61 64 3e 0a 20 20 <html>.<head>.  
0020: 3c 6d 65 74 61 20 68 74 74 70 2d 65 71 75 69 76 <meta http-equiv
0030: 3d 22 43 6f 6e 74 65 6e 74 2d 54 79 70 65 22 20 ="Content-Type" 
0040: 63 6f 6e 74 65 6e 74 3d 22 74 65 78 74 2f 68 74 content="text/ht
0050: 6d 6c 3b 20 63 68 61 72 73 65 74 3d 75 74 66 2d ml; charset=utf-
0060: 38 22 2f 3e 0a 20 20 3c 74 69 74 6c 65 3e 4e 61 8"/>.  <title>Na
0070: 6d 65 45 72 72 6f 72 20 61 74 20 26 23 78 32 46 meError at &#x2F
0080: 3b 73 6f 75 72 63 65 73 26 23 78 32 46 3b 6b 61 ;sources&#x2F;ka
0090: 72 65 65 6d 26 23 78 32 46 3b 64 61 74 61 3c 2f reem&#x2F;data</
00a0: 74 69 74 6c 65 3e 0a 0a 20 20 3c 73 63 72 69 70 title>..  <scrip
00b0: 74 20 74 79 70 65 3d 22 74 65 78 74 2f 6a 61 76 t type="text/jav
00c0: 61 73 63 72 69 70 74 22 3e 0a 20 20 2f 2f 3c 21 ascript">.  //<!
00d0: 2d 2d 0a 20 20 66 75 6e 63 74 69 6f 6e 20 74 6f --.  function to
00e0: 67 67 6c 65 28 69 64 29 20 7b 0a 20 20 20 20 76 ggle(id) {.    v
00f0: 61 72 20 70 72 65 20 20 3d 20 64 6f 63 75 6d 65 ar pre  = docume
0100: 6e 74 2e 67 65 74 45 6c 65 6d 65 6e 74 42 79 49 nt.getElementByI
0110: 64 28 22 70 72 65 2d 22 20 2b 20 69 64 29 3b 0a d("pre-" + id);.
0120: 20 20 20 20 76 61 72 20 70 6f 73 74 20 3d 20 64     var post = d
0130: 6f 63 75 6d 65 6e 74 2e 67 65 74 45 6c 65 6d 65 ocument.getEleme
0140: 6e 74 42 79 49 64 28 22 70 6f 73 74 2d 22 20 2b ntById("post-" +
0150: 20 69 64 29 3b 0a 20 20 20 20 76 61 72 20 63 6f  id);.    var co
0160: 6e 74 65 78 74 20 3d 20 64 6f 63 75 6d 65 6e 74 ntext = document
0170: 2e 67 65 74 45 6c 65 6d 65 6e 74 42 79 49 64 28 .getElementById(
0180: 22 63 6f 6e 74 65 78 74 2d 22 20 2b 20 69 64 29 "context-" + id)
0190: 3b 0a 0a 20 20 20 20 69 66 20 28 70 72 65 2e 73 ;..    if (pre.s
01a0: 74 79 6c 65 2e 64 69 73 70 6c 61 79 20 3d 3d 20 tyle.display == 
01b0: 27 62 6c 6f 63 6b 27 29 20 7b 0a 20 20 20 20 20 'block') {.     
01c0: 20 70 72 65 2e 73 74 79 6c 65 2e 64 69 73 70 6c  pre.style.displ
01d0: 61 79 20 3d 20 27 6e 6f 6e 65 27 3b 0a 20 20 20 ay = 'none';.   
01e0: 20 20 20 70 6f 73 74 2e 73 74 79 6c 65 2e 64 69    post.style.di
01f0: 73 70 6c 61 79 20 3d 20 27 6e 6f 6e 65 27 3b 0a splay = 'none';.
0200: 20 20 20 20 20 20 63 6f 6e 74 65 78 74 2e 73 74       context.st
0210: 79 6c 65 2e 62 61 63 6b 67 72 6f 75 6e 64 20 3d yle.background =
0220: 20 22 6e 6f 6e 65 22 3b 0a 20 20 20 20 7d 20 65  "none";.    } e
0230: 6c 73 65 20 7b 0a 20 20 20 20 20 20 70 72 65 2e lse {.      pre.
0240: 73 74 79 6c 65 2e 64 69 73 70 6c 61 79 20 3d 20 style.display = 
0250: 27 62 6c 6f 63 6b 27 3b 0a 20 20 20 20 20 20 70 'block';.      p
0260: 6f 73 74 2e 73 74 79 6c 65 2e 64 69 73 70 6c 61 ost.style.displa
0270: 79 20 3d 20 27 62 6c 6f 63 6b 27 3b 0a 20 20 20 y = 'block';.   
0280: 20 20 20 63 6f 6e 74 65 78 74 2e 73 74 79 6c 65    context.style
0290: 2e 62 61 63 6b 67 72 6f 75 6e 64 20 3d 20 22 23 .background = "#
02a0: 66 66 66 65 64 39 22 3b 0a 20 20 20 20 7d 0a 20 fffed9";.    }. 
02b0: 20 7d 0a 0a 20 20 66 75 6e 63 74 69 6f 6e 20 74  }..  function t
02c0: 6f 67 67 6c 65 42 61 63 6b 74 72 61 63 65 28 29 oggleBacktrace()
02d0: 7b 0a 20 20 20 20 76 61 72 20 62 74 20 3d 20 64 {.    var bt = d
02e0: 6f 63 75 6d 65 6e 74 2e 67 65 74 45 6c 65 6d 65 ocument.getEleme
02f0: 6e 74 42 79 49 64 28 22 62 61 63 6b 74 72 61 63 ntById("backtrac
0300: 65 22 29 3b 0a 20 20 20 20 76 61 72 20 74 6f 67 e");.    var tog
0310: 67 6c 65 72 20 3d 20 64 6f 63 75 6d 65 6e 74 2e gler = document.
0320: 67 65 74 45 6c 65 6d 65 6e 74 42 79 49 64 28 22 getElementById("
0330: 65 78 70 61 6e 64 6f 22 29 3b 0a 0a 20 20 20 20 expando");..    
0340: 69 66 20 28 62 74 2e 63 6c 61 73 73 4e 61 6d 65 if (bt.className
0350: 20 3d 3d 20 27 63 6f 6e 64 65 6e 73 65 64 27 29  == 'condensed')
0360: 20 7b 0a 20 20 20 20 20 20 62 74 2e 63 6c 61 73  {.      bt.clas
0370: 73 4e 61 6d 65 20 3d 20 27 65 78 70 61 6e 64 65 sName = 'expande
0380: 64 27 3b 0a 20 20 20 20 20 20 74 6f 67 67 6c 65 d';.      toggle
0390: 72 2e 69 6e 6e 65 72 48 54 4d 4c 20 3d 20 22 28 r.innerHTML = "(
03a0: 63 6f 6e 64 65 6e 73 65 29 22 3b 0a 20 20 20 20 condense)";.    
03b0: 7d 20 65 6c 73 65 20 7b 0a 20 20 20 20 20 20 62 } else {.      b
03c0: 74 2e 63 6c 61 73 73 4e 61 6d 65 20 3d 20 27 63 t.className = 'c
03d0: 6f 6e 64 65 6e 73 65 64 27 3b 0a 20 20 20 20 20 ondensed';.     
03e0: 20 74 6f 67 67 6c 65 72 2e 69 6e 6e 65 72 48 54  toggler.innerHT
03f0: 4d 4c 20 3d 20 22 28 65 78 70 61 6e 64 29 22 3b ML = "(expand)";
0400: 0a 20 20 20 20 7d 0a 20 20 7d 0a 20 20 2f 2f 2d .    }.  }.  //-
0410: 2d 3e 0a 20 20 3c 2f 73 63 72 69 70 74 3e 0a 0a ->.  </script>..
0420: 3c 73 74 79 6c 65 20 74 79 70 65 3d 22 74 65 78 <style type="tex
0430: 74 2f 63 73 73 22 20 6d 65 64 69 61 3d 22 73 63 t/css" media="sc
0440: 72 65 65 6e 22 3e 0a 20 20 2a 20 20 20 20 20 20 reen">.  *      
0450: 20 20 20 20 20 20 20 20 20 20 20 20 20 7b 6d 61              {ma
0460: 72 67 69 6e 3a 20 30 3b 20 70 61 64 64 69 6e 67 rgin: 0; padding
0470: 3a 20 30 3b 20 62 6f 72 64 65 72 3a 20 30 3b 20 : 0; border: 0; 
0480: 6f 75 74 6c 69 6e 65 3a 20 30 3b 7d 0a 20 20 64 outline: 0;}.  d
0490: 69 76 2e 63 6c 65 61 72 20 20 20 20 20 20 20 20 iv.clear        
04a0: 20 20 20 7b 63 6c 65 61 72 3a 20 62 6f 74 68 3b    {clear: both;
04b0: 7d 0a 20 20 62 6f 64 79 20 20 20 20 20 20 20 20 }.  body        
04c0: 20 20 20 20 20 20 20 20 7b 62 61 63 6b 67 72 6f         {backgro
04d0: 75 6e 64 3a 20 23 45 45 45 45 45 45 3b 20 6d 61 und: #EEEEEE; ma
04e0: 72 67 69 6e 3a 20 30 3b 20 70 61 64 64 69 6e 67 rgin: 0; padding
04f0: 3a 20 30 3b 0a 20 20 20 20 20 20 20 20 20 20 20 : 0;.           
0500: 20 20 20 20 20 20 20 20 20 20 20 20 66 6f 6e 74             font
0510: 2d 66 61 6d 69 6c 79 3a 20 27 4c 75 63 69 64 61 -family: 'Lucida
0520: 20 47 72 61 6e 64 65 27 2c 20 27 4c 75 63 69 64  Grande', 'Lucid
0530: 61 20 53 61 6e 73 20 55 6e 69 63 6f 64 65 27 2c a Sans Unicode',
0540: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0550: 20 20 20 20 20 20 20 20 27 47 61 72 75 64 61 27         'Garuda'
0560: 3b 7d 0a 20 20 63 6f 64 65 20 20 20 20 20 20 20 ;}.  code       
0570: 20 20 20 20 20 20 20 20 20 7b 66 6f 6e 74 2d 66          {font-f
0580: 61 6d 69 6c 79 3a 20 27 4c 75 63 69 64 61 20 43 amily: 'Lucida C
0590: 6f 6e 73 6f 6c 65 27 2c 20 6d 6f 6e 6f 73 70 61 onsole', monospa
05a0: 63 65 3b 0a 20 20 20 20 20 20 20 20 20 20 20 20 ce;.            
05b0: 20 20 20 20 20 20 20 20 20 20 20 66 6f 6e 74 2d            font-
05c0: 73 69 7a 65 3a 20 31 32 70 78 3b 7d 0a 20 20 6c size: 12px;}.  l
05d0: 69 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 i               
05e0: 20 20 20 7b 68 65 69 67 68 74 3a 20 31 38 70 78    {height: 18px
05f0: 3b 7d 0a 20 20 75 6c 20 20 20 20 20 20 20 20 20 ;}.  ul         
0600: 20 20 20 20 20 20 20 20 20 7b 6c 69 73 74 2d 73          {list-s
0610: 74 79 6c 65 3a 20 6e 6f 6e 65 3b 20 6d 61 72 67 tyle: none; marg
0620: 69 6e 3a 20 30 3b 20 70 61 64 64 69 6e 67 3a 20 in: 0; padding: 
0630: 30 3b 7d 0a 20 20 6f 6c 3a 68 6f 76 65 72 20 20 0;}.  ol:hover  
0640: 20 20 20 20 20 20 20 20 20 20 7b 63 75 72 73 6f           {curso
0650: 72 3a 20 70 6f 69 6e 74 65 72 3b 7d 0a 20 20 6f r: pointer;}.  o
0660: 6c 20 6c 69 20 20 20 20 20 20 20 20 20 20 20 20 l li            
0670: 20 20 20 7b 77 68 69 74 65 2d 73 70 61 63 65 3a    {white-space:
0680: 20 70 72 65 3b 7d 0a 20 20 23 65 78 70 6c 61 6e  pre;}.  #explan
0690: 61 74 69 6f 6e 20 20 20 20 20 20 20 20 7b 66 6f ation        {fo
06a0: 6e 74 2d 73 69 7a 65 3a 20 31 32 70 78 3b 20 63 nt-size: 12px; c
06b0: 6f 6c 6f 72 3a 20 23 36 36 36 36 36 36 3b 0a 20 olor: #666666;. 
06c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
06d0: 20 20 20 20 20 20 6d 61 72 67 69 6e 3a 20 32 30       margin: 20
06e0: 70 78 20 30 20 30 20 31 30 30 70 78 3b 7d 0a 2f px 0 0 100px;}./
06f0: 2a 20 57 52 41 50 20 2a 2f 0a 20 20 23 77 72 61 * WRAP */.  #wra
0700: 70 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 p               
0710: 7b 77 69 64 74 68 3a 20 31 30 30 30 70 78 3b 20 {width: 1000px; 
0720: 62 61 63 6b 67 72 6f 75 6e 64 3a 20 23 46 46 46 background: #FFF
0730: 46 46 46 3b 20 6d 61 72 67 69 6e 3a 20 30 20 61 FFF; margin: 0 a
0740: 75 74 6f 3b 0a 20 20 20 20 20 20 20 20 20 20 20 uto;.           
0750: 20 20 20 20 20 20 20 20 20 20 20 20 70 61 64 64             padd
0760: 69 6e 67 3a 20 33 30 70 78 20 35 30 70 78 20 32 ing: 30px 50px 2
0770: 30 70 78 20 35 30 70 78 3b 0a 20 20 20 20 20 20 0px 50px;.      
0780: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0790: 20 62 6f 72 64 65 72 2d 6c 65 66 74 3a 20 31 70  border-left: 1p
07a0: 78 20 73 6f 6c 69 64 20 23 44 44 44 44 44 44 3b x solid #DDDDDD;
07b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
07c0: 20 20 20 20 20 20 20 20 62 6f 72 64 65 72 2d 72         border-r
07d0: 69 67 68 74 3a 20 31 70 78 20 73 6f 6c 69 64 20 ight: 1px solid 
07e0: 23 44 44 44 44 44 44 3b 7d 0a 2f 2a 20 48 45 41 #DDDDDD;}./* HEA
07f0: 44 45 52 20 2a 2f 0a 20 20 23 68 65 61 64 65 72 DER */.  #header
0800: 20 20 20 20 20 20 20 20 20 20 20 20 20 7b 6d 61              {ma
0810: 72 67 69 6e 3a 20 30 20 61 75 74 6f 20 32 35 70 rgin: 0 auto 25p
0820: 78 20 61 75 74 6f 3b 7d 0a 20 20 23 68 65 61 64 x auto;}.  #head
0830: 65 72 20 69 6d 67 20 20 20 20 20 20 20 20 20 7b er img         {
0840: 66 6c 6f 61 74 3a 20 6c 65 66 74 3b 7d 0a 20 20 float: left;}.  
0850: 23 68 65 61 64 65 72 20 23 73 75 6d 6d 61 72 79 #header #summary
0860: 20 20 20 20 7b 66 6c 6f 61 74 3a 20 6c 65 66 74     {float: left
0870: 3b 20 6d 61 72 67 69 6e 3a 20 31 32 70 78 20 30 ; margin: 12px 0
0880: 20 30 20 32 30 70 78 3b 20 77 69 64 74 68 3a 36  0 20px; width:6
0890: 36 30 70 78 3b 0a 20 20 20 20 20 20 20 20 20 20 60px;.          
08a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 66 6f 6e              fon
08b0: 74 2d 66 61 6d 69 6c 79 3a 20 27 4c 75 63 69 64 t-family: 'Lucid
08c0: 61 20 47 72 61 6e 64 65 27 2c 20 27 4c 75 63 69 a Grande', 'Luci
08d0: 64 61 20 53 61 6e 73 20 55 6e 69 63 6f 64 65 27 da Sans Unicode'
08e0: 3b 7d 0a 20 20 68 31 20 20 20 20 20 20 20 20 20 ;}.  h1         
08f0: 20 20 20 20 20 20 20 20 20 7b 6d 61 72 67 69 6e          {margin
0900: 3a 20 30 3b 20 66 6f 6e 74 2d 73 69 7a 65 3a 20 : 0; font-size: 
0910: 33 36 70 78 3b 20 63 6f 6c 6f 72 3a 20 23 39 38 36px; color: #98
0920: 31 39 31 39 3b 7d 0a 20 20 68 32 20 20 20 20 20 1919;}.  h2     
0930: 20 20 20 20 20 20 20 20 20 20 20 20 20 7b 6d 61              {ma
0940: 72 67 69 6e 3a 20 30 3b 20 66 6f 6e 74 2d 73 69 rgin: 0; font-si
0950: 7a 65 3a 20 32 32 70 78 3b 20 63 6f 6c 6f 72 3a ze: 22px; color:
0960: 20 23 33 33 33 33 33 33 3b 7d 0a 20 20 23 68 65  #333333;}.  #he
0970: 61 64 65 72 20 75 6c 20 20 20 20 20 20 20 20 20 ader ul         
0980: 20 7b 6d 61 72 67 69 6e 3a 20 30 3b 20 66 6f 6e  {margin: 0; fon
0990: 74 2d 73 69 7a 65 3a 20 31 32 70 78 3b 20 63 6f t-size: 12px; co
09a0: 6c 6f 72 3a 20 23 36 36 36 36 36 36 3b 7d 0a 20 lor: #666666;}. 
09b0: 20 23 68 65 61 64 65 72 20 75 6c 20 6c 69 20 73  #header ul li s
09c0: 74 72 6f 6e 67 7b 63 6f 6c 6f 72 3a 20 23 34 34 trong{color: #44
09d0: 34 34 34 34 3b 7d 0a 20 20 23 68 65 61 64 65 72 4444;}.  #header
09e0: 20 75 6c 20 6c 69 20 20 20 20 20 20 20 7b 64 69  ul li       {di
09f0: 73 70 6c 61 79 3a 20 69 6e 6c 69 6e 65 3b 20 70 splay: inline; p
0a00: 61 64 64 69 6e 67 3a 20 30 20 31 30 70 78 3b 7d adding: 0 10px;}
0a10: 0a 20 20 23 68 65 61 64 65 72 20 75 6c 20 6c 69 .  #header ul li
0a20: 2e 66 69 72 73 74 20 7b 70 61 64 64 69 6e 67 2d .first {padding-
0a30: 6c 65 66 74 3a 20 30 3b 7d 0a 20 20 23 68 65 61 left: 0;}.  #hea
0a40: 64 65 72 20 75 6c 20 6c 69 2e 6c 61 73 74 20 20 der ul li.last  
0a50: 7b 62 6f 72 64 65 72 3a 20 30 3b 20 70 61 64 64 {border: 0; padd
0a60: 69 6e 67 2d 72 69 67 68 74 3a 20 30 3b 7d 0a 2f ing-right: 0;}./
0a70: 2a 20 42 4f 44 59 20 2a 2f 0a 20 20 23 62 61 63 * BODY */.  #bac
0a80: 6b 74 72 61 63 65 2c 0a 20 20 23 67 65 74 2c 0a ktrace,.  #get,.
0a90: 20 20 23 70 6f 73 74 2c 0a 20 20 23 63 6f 6f 6b   #post,.  #cook
0aa0: 69 65 73 2c 0a 20 20 23 72 61 63 6b 20 20 20 20 ies,.  #rack    
0ab0: 20 20 20 20 20 20 20 20 20 20 20 7b 77 69 64 74            {widt
0ac0: 68 3a 20 39 38 30 70 78 3b 20 6d 61 72 67 69 6e h: 980px; margin
0ad0: 3a 20 30 20 61 75 74 6f 20 31 30 70 78 20 61 75 : 0 auto 10px au
0ae0: 74 6f 3b 7d 0a 20 20 70 23 6e 61 76 20 20 20 20 to;}.  p#nav    
0af0: 20 20 20 20 20 20 20 20 20 20 20 7b 66 6c 6f 61            {floa
0b00: 74 3a 20 72 69 67 68 74 3b 20 66 6f 6e 74 2d 73 t: right; font-s
0b10: 69 7a 65 3a 20 31 34 70 78 3b 7d 0a 2f 2a 20 42 ize: 14px;}./* B
0b20: 41 43 4b 54 52 41 43 45 20 2a 2f 0a 20 20 61 23 ACKTRACE */.  a#
0b30: 65 78 70 61 6e 64 6f 20 20 20 20 20 20 20 20 20 expando         
0b40: 20 20 7b 66 6c 6f 61 74 3a 20 6c 65 66 74 3b 20   {float: left; 
0b50: 70 61 64 64 69 6e 67 2d 6c 65 66 74 3a 20 35 70 padding-left: 5p
0b60: 78 3b 20 63 6f 6c 6f 72 3a 20 23 36 36 36 36 36 x; color: #66666
0b70: 36 3b 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 6;.             
0b80: 20 20 20 20 20 20 20 20 20 66 6f 6e 74 2d 73 69          font-si
0b90: 7a 65 3a 20 31 34 70 78 3b 20 74 65 78 74 2d 64 ze: 14px; text-d
0ba0: 65 63 6f 72 61 74 69 6f 6e 3a 20 6e 6f 6e 65 3b ecoration: none;
0bb0: 20 63 75 72 73 6f 72 3a 20 70 6f 69 6e 74 65 72  cursor: pointer
0bc0: 3b 7d 0a 20 20 61 23 65 78 70 61 6e 64 6f 3a 68 ;}.  a#expando:h
0bd0: 6f 76 65 72 20 20 20 20 20 7b 74 65 78 74 2d 64 over     {text-d
0be0: 65 63 6f 72 61 74 69 6f 6e 3a 20 75 6e 64 65 72 ecoration: under
0bf0: 6c 69 6e 65 3b 7d 0a 20 20 68 33 20 20 20 20 20 line;}.  h3     
0c00: 20 20 20 20 20 20 20 20 20 20 20 20 20 7b 66 6c              {fl
0c10: 6f 61 74 3a 20 6c 65 66 74 3b 20 77 69 64 74 68 oat: left; width
0c20: 3a 20 31 30 30 70 78 3b 20 6d 61 72 67 69 6e 2d : 100px; margin-
0c30: 62 6f 74 74 6f 6d 3a 20 31 30 70 78 3b 0a 20 20 bottom: 10px;.  
0c40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0c50: 20 20 20 20 20 63 6f 6c 6f 72 3a 20 23 39 38 31      color: #981
0c60: 39 31 39 3b 20 66 6f 6e 74 2d 73 69 7a 65 3a 20 919; font-size: 
0c70: 31 34 70 78 3b 20 66 6f 6e 74 2d 77 65 69 67 68 14px; font-weigh
0c80: 74 3a 20 62 6f 6c 64 3b 7d 0a 20 20 23 6e 61 76 t: bold;}.  #nav
0c90: 20 61 20 20 20 20 20 20 20 20 20 20 20 20 20 20  a              
0ca0: 7b 63 6f 6c 6f 72 3a 20 23 36 36 36 36 36 36 3b {color: #666666;
0cb0: 20 74 65 78 74 2d 64 65 63 6f 72 61 74 69 6f 6e  text-decoration
0cc0: 3a 20 6e 6f 6e 65 3b 20 70 61 64 64 69 6e 67 3a : none; padding:
0cd0: 20 30 20 35 70 78 3b 7d 0a 20 20 23 62 61 63 6b  0 5px;}.  #back
0ce0: 74 72 61 63 65 20 6c 69 2e 66 72 61 6d 65 2d 69 trace li.frame-i
0cf0: 6e 66 6f 20 7b 62 61 63 6b 67 72 6f 75 6e 64 3a nfo {background:
0d00: 20 23 66 37 66 37 66 37 3b 20 70 61 64 64 69 6e  #f7f7f7; paddin
0d10: 67 2d 6c 65 66 74 3a 20 31 30 70 78 3b 0a 20 20 g-left: 10px;.  
0d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0d30: 20 20 20 20 20 20 20 20 20 66 6f 6e 74 2d 73 69          font-si
0d40: 7a 65 3a 20 31 32 70 78 3b 20 63 6f 6c 6f 72 3a ze: 12px; color:
0d50: 20 23 33 33 33 33 33 33 3b 7d 0a 20 20 23 62 61  #333333;}.  #ba
0d60: 63 6b 74 72 61 63 65 20 75 6c 20 20 20 20 20 20 cktrace ul      
0d70: 20 7b 6c 69 73 74 2d 73 74 79 6c 65 2d 70 6f 73  {list-style-pos
0d80: 69 74 69 6f 6e 3a 20 6f 75 74 73 69 64 65 3b 20 ition: outside; 
0d90: 62 6f 72 64 65 72 3a 20 31 70 78 20 73 6f 6c 69 border: 1px soli
0da0: 64 20 23 45 39 45 39 45 39 3b 0a 20 20 20 20 20 d #E9E9E9;.     
0db0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0dc0: 20 20 62 6f 72 64 65 72 2d 62 6f 74 74 6f 6d 3a   border-bottom:
0dd0: 20 30 3b 7d 0a 20 20 23 62 61 63 6b 74 72 61 63  0;}.  #backtrac
0de0: 65 20 6f 6c 20 20 20 20 20 20 20 7b 77 69 64 74 e ol       {widt
0df0: 68 3a 20 39 32 30 70 78 3b 20 6d 61 72 67 69 6e h: 920px; margin
0e00: 2d 6c 65 66 74 3a 20 35 30 70 78 3b 0a 20 20 20 -left: 50px;.   
0e10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0e20: 20 20 20 20 66 6f 6e 74 3a 20 31 30 70 78 20 27     font: 10px '
0e30: 4c 75 63 69 64 61 20 43 6f 6e 73 6f 6c 65 27 2c Lucida Console',
0e40: 20 6d 6f 6e 6f 73 70 61 63 65 3b 20 63 6f 6c 6f  monospace; colo
0e50: 72 3a 20 23 36 36 36 36 36 36 3b 7d 0a 20 20 23 r: #666666;}.  #
0e60: 62 61 63 6b 74 72 61 63 65 20 6f 6c 20 6c 69 20 backtrace ol li 
0e70: 20 20 20 7b 62 6f 72 64 65 72 3a 20 30 3b 20 62    {border: 0; b
0e80: 6f 72 64 65 72 2d 6c 65 66 74 3a 20 31 70 78 20 order-left: 1px 
0e90: 73 6f 6c 69 64 20 23 45 39 45 39 45 39 3b 0a 20 solid #E9E9E9;. 
0ea0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0eb0: 20 20 20 20 20 20 70 61 64 64 69 6e 67 3a 20 32       padding: 2
0ec0: 70 78 20 30 3b 7d 0a 20 20 23 62 61 63 6b 74 72 px 0;}.  #backtr
0ed0: 61 63 65 20 6f 6c 20 63 6f 64 65 20 20 7b 66 6f ace ol code  {fo
0ee0: 6e 74 2d 73 69 7a 65 3a 20 31 30 70 78 3b 20 63 nt-size: 10px; c
0ef0: 6f 6c 6f 72 3a 20 23 35 35 35 35 35 35 3b 20 70 olor: #555555; p
0f00: 61 64 64 69 6e 67 2d 6c 65 66 74 3a 20 35 70 78 adding-left: 5px
0f10: 3b 7d 0a 20 20 23 62 61 63 6b 74 72 61 63 65 2d ;}.  #backtrace-
0f20: 75 6c 20 6c 69 20 20 20 20 7b 62 6f 72 64 65 72 ul li    {border
0f30: 2d 62 6f 74 74 6f 6d 3a 20 31 70 78 20 73 6f 6c -bottom: 1px sol
0f40: 69 64 20 23 45 39 45 39 45 39 3b 20 68 65 69 67 id #E9E9E9; heig
0f50: 68 74 3a 20 61 75 74 6f 3b 0a 20 20 20 20 20 20 ht: auto;.      
0f60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0f70: 20 70 61 64 64 69 6e 67 3a 20 33 70 78 20 30 3b  padding: 3px 0;
0f80: 7d 0a 20 20 23 62 61 63 6b 74 72 61 63 65 2d 75 }.  #backtrace-u
0f90: 6c 20 2e 63 6f 64 65 20 7b 70 61 64 64 69 6e 67 l .code {padding
0fa0: 3a 20 36 70 78 20 30 20 34 70 78 20 30 3b 7d 0a : 6px 0 4px 0;}.
0fb0: 20 20 23 62 61 63 6b 74 72 61 63 65 2e 63 6f 6e   #backtrace.con
0fc0: 64 65 6e 73 65 64 20 2e 73 79 73 74 65 6d 2c 0a densed .system,.
0fd0: 20 20 23 62 61 63 6b 74 72 61 63 65 2e 63 6f 6e   #backtrace.con
0fe0: 64 65 6e 73 65 64 20 2e 66 72 61 6d 65 77 6f 72 densed .framewor
0ff0: 6b 20 7b 64 69 73 70 6c 61 79 3a 6e 6f 6e 65 3b k {display:none;
1000: 7d 0a 2f 2a 20 52 45 51 55 45 53 54 20 44 41 54 }./* REQUEST DAT
1010: 41 20 2a 2f 0a 20 20 70 2e 6e 6f 2d 64 61 74 61 A */.  p.no-data
1020: 20 20 20 20 20 20 20 20 20 20 20 7b 70 61 64 64            {padd
1030: 69 6e 67 2d 74 6f 70 3a 20 32 70 78 3b 20 66 6f ing-top: 2px; fo
1040: 6e 74 2d 73 69 7a 65 3a 20 31 32 70 78 3b 20 63 nt-size: 12px; c
1050: 6f 6c 6f 72 3a 20 23 36 36 36 36 36 36 3b 7d 0a olor: #666666;}.
1060: 20 20 74 61 62 6c 65 2e 72 65 71 20 20 20 20 20   table.req     
1070: 20 20 20 20 20 20 7b 77 69 64 74 68 3a 20 39 38       {width: 98
1080: 30 70 78 3b 20 74 65 78 74 2d 61 6c 69 67 6e 3a 0px; text-align:
1090: 20 6c 65 66 74 3b 20 66 6f 6e 74 2d 73 69 7a 65  left; font-size
10a0: 3a 20 31 32 70 78 3b 0a 20 20 20 20 20 20 20 20 : 12px;.        
10b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63                c
10c0: 6f 6c 6f 72 3a 20 23 36 36 36 36 36 36 3b 20 70 olor: #666666; p
10d0: 61 64 64 69 6e 67 3a 20 30 3b 20 62 6f 72 64 65 adding: 0; borde
10e0: 72 2d 73 70 61 63 69 6e 67 3a 20 30 3b 0a 20 20 r-spacing: 0;.  
10f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1100: 20 20 20 20 20 62 6f 72 64 65 72 3a 20 31 70 78      border: 1px
1110: 20 73 6f 6c 69 64 20 23 45 45 45 45 45 45 3b 20  solid #EEEEEE; 
1120: 62 6f 72 64 65 72 2d 62 6f 74 74 6f 6d 3a 20 30 border-bottom: 0
1130: 3b 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ;.              
1140: 20 20 20 20 20 20 20 20 20 62 6f 72 64 65 72 2d          border-
1150: 6c 65 66 74 3a 20 30 3b 0a 20 20 20 20 20 20 20 left: 0;.       
1160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1170: 63 6c 65 61 72 3a 62 6f 74 68 7d 0a 20 20 74 61 clear:both}.  ta
1180: 62 6c 65 2e 72 65 71 20 74 72 20 74 68 20 20 20 ble.req tr th   
1190: 20 20 7b 70 61 64 64 69 6e 67 3a 20 32 70 78 20   {padding: 2px 
11a0: 31 30 70 78 3b 20 66 6f 6e 74 2d 77 65 69 67 68 10px; font-weigh
11b0: 74 3a 20 62 6f 6c 64 3b 0a 20 20 20 20 20 20 20 t: bold;.       
11c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
11d0: 62 61 63 6b 67 72 6f 75 6e 64 3a 20 23 46 37 46 background: #F7F
11e0: 37 46 37 3b 20 62 6f 72 64 65 72 2d 62 6f 74 74 7F7; border-bott
11f0: 6f 6d 3a 20 31 70 78 20 73 6f 6c 69 64 20 23 45 om: 1px solid #E
1200: 45 45 45 45 45 3b 0a 20 20 20 20 20 20 20 20 20 EEEEE;.         
1210: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 62 6f               bo
1220: 72 64 65 72 2d 6c 65 66 74 3a 20 31 70 78 20 73 rder-left: 1px s
1230: 6f 6c 69 64 20 23 45 45 45 45 45 45 3b 7d 0a 20 olid #EEEEEE;}. 
1240: 20 74 61 62 6c 65 2e 72 65 71 20 74 72 20 74 64  table.req tr td
1250: 20 20 20 20 20 7b 70 61 64 64 69 6e 67 3a 20 32      {padding: 2
1260: 70 78 20 32 30 70 78 20 32 70 78 20 31 30 70 78 px 20px 2px 10px
1270: 3b 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ;.              
1280: 20 20 20 20 20 20 20 20 20 62 6f 72 64 65 72 2d          border-
1290: 62 6f 74 74 6f 6d 3a 20 31 70 78 20 73 6f 6c 69 bottom: 1px soli
12a0: 64 20 23 45 45 45 45 45 45 3b 0a 20 20 20 20 20 d #EEEEEE;.     
12b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
12c0: 20 20 62 6f 72 64 65 72 2d 6c 65 66 74 3a 20 31   border-left: 1
12d0: 70 78 20 73 6f 6c 69 64 20 23 45 45 45 45 45 45 px solid #EEEEEE
12e0: 3b 7d 0a 2f 2a 20 48 49 44 45 20 50 52 45 2f 50 ;}./* HIDE PRE/P
12f0: 4f 53 54 20 43 4f 44 45 20 41 54 20 53 54 41 52 OST CODE AT STAR
1300: 54 20 2a 2f 0a 20 20 2e 70 72 65 2d 63 6f 6e 74 T */.  .pre-cont
1310: 65 78 74 2c 0a 20 20 2e 70 6f 73 74 2d 63 6f 6e ext,.  .post-con
1320: 74 65 78 74 20 20 20 20 20 20 20 7b 64 69 73 70 text       {disp
1330: 6c 61 79 3a 20 6e 6f 6e 65 3b 7d 0a 0a 20 20 74 lay: none;}..  t
1340: 61 62 6c 65 20 74 64 2e 63 6f 64 65 20 20 20 20 able td.code    
1350: 20 20 20 7b 77 69 64 74 68 3a 37 35 30 70 78 7d    {width:750px}
1360: 0a 20 20 74 61 62 6c 65 20 74 64 2e 63 6f 64 65 .  table td.code
1370: 20 64 69 76 20 20 20 7b 77 69 64 74 68 3a 37 35  div   {width:75
1380: 30 70 78 3b 6f 76 65 72 66 6c 6f 77 3a 68 69 64 0px;overflow:hid
1390: 64 65 6e 7d 0a 3c 2f 73 74 79 6c 65 3e 0a 3c 2f den}.</style>.</
13a0: 68 65 61 64 3e 0a 3c 62 6f 64 79 3e 0a 20 20 3c head>.<body>.  <
13b0: 64 69 76 20 69 64 3d 22 77 72 61 70 22 3e 0a 20 div id="wrap">. 
13c0: 20 20 20 3c 64 69 76 20 69 64 3d 22 68 65 61 64    <div id="head
13d0: 65 72 22 3e 0a 20 20 20 20 20 20 3c 69 6d 67 20 er">.      <img 
13e0: 73 72 63 3d 22 2f 5f 5f 73 69 6e 61 74 72 61 5f src="/__sinatra_
13f0: 5f 2f 35 30 30 2e 70 6e 67 22 20 61 6c 74 3d 22 _/500.png" alt="
1400: 61 70 70 6c 69 63 61 74 69 6f 6e 20 65 72 72 6f application erro
1410: 72 22 20 68 65 69 67 68 74 3d 22 31 36 31 22 20 r" height="161" 
1420: 77 69 64 74 68 3d 22 33 31 33 22 20 2f 3e 0a 20 width="313" />. 
1430: 20 20 20 20 20 3c 64 69 76 20 69 64 3d 22 73 75      <div id="su
1440: 6d 6d 61 72 79 22 3e 0a 20 20 20 20 20 20 20 20 mmary">.        
1450: 3c 68 31 3e 3c 73 74 72 6f 6e 67 3e 4e 61 6d 65 <h1><strong>Name
1460: 45 72 72 6f 72 3c 2f 73 74 72 6f 6e 67 3e 20 61 Error</strong> a
1470: 74 20 3c 73 74 72 6f 6e 67 3e 26 23 78 32 46 3b t <strong>&#x2F;
1480: 73 6f 75 72 63 65 73 26 23 78 32 46 3b 6b 61 72 sources&#x2F;kar
1490: 65 65 6d 26 23 78 32 46 3b 64 61 74 61 0a 20 20 eem&#x2F;data.  
14a0: 20 20 20 20 20 20 20 20 3c 2f 73 74 72 6f 6e 67         </strong
14b0: 3e 3c 2f 68 31 3e 0a 20 20 20 20 20 20 20 20 3c ></h1>.        <
14c0: 68 32 3e 75 6e 64 65 66 69 6e 65 64 20 6c 6f 63 h2>undefined loc
14d0: 61 6c 20 76 61 72 69 61 62 6c 65 20 6f 72 20 6d al variable or m
14e0: 65 74 68 6f 64 20 60 70 61 79 6c 6f 61 64 26 23 ethod `payload&#
14f0: 78 32 37 3b 20 66 6f 72 20 23 26 6c 74 3b 54 72 x27; for #&lt;Tr
1500: 61 66 66 69 63 53 70 79 3a 3a 52 65 71 75 65 73 afficSpy::Reques
1510: 74 50 61 72 73 65 72 3a 30 78 30 30 37 66 64 32 tParser:0x007fd2
1520: 39 62 32 33 65 33 38 38 26 67 74 3b 3c 2f 68 32 9b23e388&gt;</h2
1530: 3e 0a 20 20 20 20 20 20 20 20 3c 75 6c 3e 0a 20 >.        <ul>. 
1540: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1550: 73 73 3d 22 66 69 72 73 74 22 3e 3c 73 74 72 6f ss="first"><stro
1560: 6e 67 3e 66 69 6c 65 3a 3c 2f 73 74 72 6f 6e 67 ng>file:</strong
1570: 3e 20 3c 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 > <code>.       
1580: 20 20 20 20 20 72 65 71 75 65 73 74 5f 70 61 72      request_par
1590: 73 65 72 2e 72 62 3c 2f 63 6f 64 65 3e 3c 2f 6c ser.rb</code></l
15a0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 3c 6c 69 i>.          <li
15b0: 3e 3c 73 74 72 6f 6e 67 3e 6c 6f 63 61 74 69 6f ><strong>locatio
15c0: 6e 3a 3c 2f 73 74 72 6f 6e 67 3e 20 3c 63 6f 64 n:</strong> <cod
15d0: 65 3e 69 6e 69 74 69 61 6c 69 7a 65 0a 20 20 20 e>initialize.   
15e0: 20 20 20 20 20 20 20 20 20 3c 2f 63 6f 64 65 3e          </code>
15f0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
1600: 3c 6c 69 20 63 6c 61 73 73 3d 22 6c 61 73 74 22 <li class="last"
1610: 3e 3c 73 74 72 6f 6e 67 3e 6c 69 6e 65 3a 0a 20 ><strong>line:. 
1620: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 74 72            </str
1630: 6f 6e 67 3e 20 31 35 3c 2f 6c 69 3e 0a 20 20 20 ong> 15</li>.   
1640: 20 20 20 20 20 3c 2f 75 6c 3e 0a 20 20 20 20 20      </ul>.     
1650: 20 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 3c 64  </div>.      <d
1660: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
1670: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 3c 2f 64 69 ></div>.    </di
1680: 76 3e 0a 0a 20 20 20 20 3c 64 69 76 20 69 64 3d v>..    <div id=
1690: 22 62 61 63 6b 74 72 61 63 65 22 20 63 6c 61 73 "backtrace" clas
16a0: 73 3d 27 63 6f 6e 64 65 6e 73 65 64 27 3e 0a 20 s='condensed'>. 
16b0: 20 20 20 20 20 3c 68 33 3e 42 41 43 4b 54 52 41      <h3>BACKTRA
16c0: 43 45 3c 2f 68 33 3e 0a 20 20 20 20 20 20 3c 70 CE</h3>.      <p
16d0: 3e 3c 61 20 68 72 65 66 3d 22 23 22 20 69 64 3d ><a href="#" id=
16e0: 22 65 78 70 61 6e 64 6f 22 0a 20 20 20 20 20 20 "expando".      
16f0: 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74       onclick="t
1700: 6f 67 67 6c 65 42 61 63 6b 74 72 61 63 65 28 29 oggleBacktrace()
1710: 3b 20 72 65 74 75 72 6e 20 66 61 6c 73 65 22 3e ; return false">
1720: 28 65 78 70 61 6e 64 29 3c 2f 61 3e 3c 2f 70 3e (expand)</a></p>
1730: 0a 20 20 20 20 20 20 3c 70 20 69 64 3d 22 6e 61 .      <p id="na
1740: 76 22 3e 3c 73 74 72 6f 6e 67 3e 4a 55 4d 50 20 v"><strong>JUMP 
1750: 54 4f 3a 3c 2f 73 74 72 6f 6e 67 3e 0a 20 20 20 TO:</strong>.   
1760: 20 20 20 20 20 20 3c 61 20 68 72 65 66 3d 22 23       <a href="#
1770: 67 65 74 2d 69 6e 66 6f 22 3e 47 45 54 3c 2f 61 get-info">GET</a
1780: 3e 0a 20 20 20 20 20 20 20 20 20 3c 61 20 68 72 >.         <a hr
1790: 65 66 3d 22 23 70 6f 73 74 2d 69 6e 66 6f 22 3e ef="#post-info">
17a0: 50 4f 53 54 3c 2f 61 3e 0a 20 20 20 20 20 20 20 POST</a>.       
17b0: 20 20 3c 61 20 68 72 65 66 3d 22 23 63 6f 6f 6b   <a href="#cook
17c0: 69 65 2d 69 6e 66 6f 22 3e 43 4f 4f 4b 49 45 53 ie-info">COOKIES
17d0: 3c 2f 61 3e 0a 20 20 20 20 20 20 20 20 20 3c 61 </a>.         <a
17e0: 20 68 72 65 66 3d 22 23 65 6e 76 2d 69 6e 66 6f  href="#env-info
17f0: 22 3e 45 4e 56 3c 2f 61 3e 0a 20 20 20 20 20 20 ">ENV</a>.      
1800: 3c 2f 70 3e 0a 20 20 20 20 20 20 3c 64 69 76 20 </p>.      <div 
1810: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
1820: 64 69 76 3e 0a 0a 20 20 20 20 20 20 3c 75 6c 20 div>..      <ul 
1830: 69 64 3d 22 62 61 63 6b 74 72 61 63 65 2d 75 6c id="backtrace-ul
1840: 22 3e 0a 0a 20 20 20 20 20 20 0a 20 20 20 20 20 ">..      .     
1850: 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20  .          ..  
1860: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1870: 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 ass="frame-info 
1880: 61 70 70 22 3e 0a 20 20 20 20 20 20 20 20 20 20 app">.          
1890: 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b     <code>&#x2F;
18a0: 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 65 Users&#x2F;karee
18b0: 6d 67 72 61 6e 74 26 23 78 32 46 3b 50 72 6f 6a mgrant&#x2F;Proj
18c0: 65 63 74 73 26 23 78 32 46 3b 74 72 61 66 66 69 ects&#x2F;traffi
18d0: 63 5f 73 70 79 26 23 78 32 46 3b 6c 69 62 26 23 c_spy&#x2F;lib&#
18e0: 78 32 46 3b 74 72 61 66 66 69 63 5f 73 70 79 26 x2F;traffic_spy&
18f0: 23 78 32 46 3b 6d 6f 64 65 6c 73 26 23 78 32 46 #x2F;models&#x2F
1900: 3b 72 65 71 75 65 73 74 5f 70 61 72 73 65 72 2e ;request_parser.
1910: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
1920: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
1930: 64 65 3e 3c 73 74 72 6f 6e 67 3e 69 6e 69 74 69 de><strong>initi
1940: 61 6c 69 7a 65 3c 2f 73 74 72 6f 6e 67 3e 3c 2f alize</strong></
1950: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
1960: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
1970: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1980: 63 6f 64 65 20 61 70 70 22 3e 0a 20 20 20 20 20 code app">.     
1990: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
19a0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
19b0: 74 3d 22 38 22 0a 20 20 20 20 20 20 20 20 20 20 t="8".          
19c0: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
19d0: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
19e0: 70 72 65 2d 31 22 0a 20 20 20 20 20 20 20 20 20 pre-1".         
19f0: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
1a00: 3d 22 74 6f 67 67 6c 65 28 31 29 3b 22 3e 0a 20 ="toggle(1);">. 
1a10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1a20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1a30: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1a40: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1a50: 64 65 3e 20 20 20 20 61 74 74 72 5f 72 65 61 64 de>    attr_read
1a60: 65 72 20 3a 72 65 71 75 65 73 74 65 64 5f 61 74 er :requested_at
1a70: 2c 20 3a 72 65 73 70 6f 6e 73 65 5f 74 69 6d 65 , :response_time
1a80: 2c 20 3a 72 65 66 65 72 72 65 64 5f 62 79 2c 20 , :referred_by, 
1a90: 3a 72 65 71 75 65 73 74 5f 74 79 70 65 2c 0a 3c :request_type,.<
1aa0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1ab0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1ac0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1ad0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1ae0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1af0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1b00: 3a 65 76 65 6e 74 5f 69 64 2c 20 3a 62 72 6f 77 :event_id, :brow
1b10: 73 65 72 5f 69 64 2c 20 3a 6f 73 5f 69 64 2c 0a ser_id, :os_id,.
1b20: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1b30: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1b40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1b50: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
1b60: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1b70: 3e 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >               
1b80: 20 3a 72 65 73 6f 6c 75 74 69 6f 6e 2c 20 3a 69  :resolution, :i
1b90: 70 2c 20 3a 73 69 74 65 5f 69 64 0a 3c 2f 63 6f p, :site_id.</co
1ba0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1bb0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1bc0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1bd0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1be0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
1bf0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1c00: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1c10: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1c20: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
1c30: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
1c40: 20 20 20 64 65 66 20 69 6e 69 74 69 61 6c 69 7a    def initializ
1c50: 65 28 6a 73 6f 6e 5f 70 61 79 6c 6f 61 64 29 0a e(json_payload).
1c60: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1c70: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1c80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1c90: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
1ca0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1cb0: 3e 20 20 20 20 20 20 23 70 75 74 73 20 6a 73 6f >      #puts jso
1cc0: 6e 5f 70 61 79 6c 6f 61 64 2e 69 6e 73 70 65 63 n_payload.inspec
1cd0: 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 t.</code></li>. 
1ce0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1cf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1d00: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1d10: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1d20: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
1d30: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1d40: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1d50: 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 </ol>.          
1d60: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
1d70: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31     <ol start="1
1d80: 35 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 5" class="contex
1d90: 74 22 20 69 64 3d 22 31 22 0a 20 20 20 20 20 20 t" id="1".      
1da0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
1db0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 29 3b 22 ick="toggle(1);"
1dc0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1dd0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e   <li class="con
1de0: 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 text-line" id="c
1df0: 6f 6e 74 65 78 74 2d 31 22 3e 3c 63 6f 64 65 3e ontext-1"><code>
1e00: 20 20 20 20 20 20 75 73 65 72 5f 61 67 65 6e 74       user_agent
1e10: 20 3d 20 55 73 65 72 41 67 65 6e 74 2e 70 61 72  = UserAgent.par
1e20: 73 65 28 70 61 79 6c 6f 61 64 5b 3a 75 73 65 72 se(payload[:user
1e30: 41 67 65 6e 74 5d 29 3c 2f 63 6f 64 65 3e 3c 2f Agent])</code></
1e40: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
1e50: 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20   </ol>..       
1e60: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1e70: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
1e80: 22 31 36 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 "16" class="post
1e90: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
1ea0: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
1eb0: 70 6f 73 74 2d 31 22 20 6f 6e 63 6c 69 63 6b 3d post-1" onclick=
1ec0: 22 74 6f 67 67 6c 65 28 31 29 3b 22 3e 0a 20 20 "toggle(1);">.  
1ed0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1ee0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1ef0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1f00: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1f10: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
1f20: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1f30: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1f40: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
1f50: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
1f60: 3c 63 6f 64 65 3e 20 20 20 20 20 20 70 61 79 6c <code>      payl
1f70: 6f 61 64 20 3d 20 70 61 72 73 65 28 6a 73 6f 6e oad = parse(json
1f80: 5f 70 61 79 6c 6f 61 64 29 0a 3c 2f 63 6f 64 65 _payload).</code
1f90: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1fa0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1fb0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1fc0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1fd0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1fe0: 20 20 40 73 69 74 65 5f 69 64 20 3d 20 66 69 6e   @site_id = fin
1ff0: 64 5f 73 69 74 65 5f 69 64 28 70 61 79 6c 6f 61 d_site_id(payloa
2000: 64 5b 3a 75 72 6c 5d 29 0a 3c 2f 63 6f 64 65 3e d[:url]).</code>
2010: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2020: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2030: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2040: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2050: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
2060: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2070: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2080: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2090: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
20a0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
20b0: 20 20 20 20 40 70 61 74 68 5f 69 64 20 3d 20 70     @path_id = p
20c0: 61 72 73 65 5f 75 72 6c 70 61 74 68 28 70 61 79 arse_urlpath(pay
20d0: 6c 6f 61 64 5b 3a 75 72 6c 5d 29 0a 3c 2f 63 6f load[:url]).</co
20e0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
20f0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2100: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2110: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
2120: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2130: 20 20 20 20 40 65 76 65 6e 74 5f 69 64 20 3d 20     @event_id = 
2140: 70 61 72 73 65 5f 65 76 65 6e 74 4e 61 6d 65 28 parse_eventName(
2150: 70 61 79 6c 6f 61 64 5b 3a 65 76 65 6e 74 4e 61 payload[:eventNa
2160: 6d 65 5d 2c 20 70 61 79 6c 6f 61 64 5b 3a 75 72 me], payload[:ur
2170: 6c 5d 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e l]).</code></li>
2180: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2190: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
21a0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
21b0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
21c0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 62 72 6f <code>      @bro
21d0: 77 73 65 72 5f 69 64 20 3d 20 70 61 72 73 65 5f wser_id = parse_
21e0: 62 72 6f 77 73 65 72 28 75 73 65 72 5f 61 67 65 browser(user_age
21f0: 6e 74 2e 62 72 6f 77 73 65 72 29 0a 3c 2f 63 6f nt.browser).</co
2200: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2210: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2220: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
2230: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2240: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
2250: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
2260: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
2270: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
2280: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
2290: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
22a0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
22b0: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
22c0: 6f 20 61 70 70 22 3e 0a 20 20 20 20 20 20 20 20 o app">.        
22d0: 20 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32       <code>&#x2
22e0: 46 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 F;Users&#x2F;kar
22f0: 65 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 50 72 eemgrant&#x2F;Pr
2300: 6f 6a 65 63 74 73 26 23 78 32 46 3b 74 72 61 66 ojects&#x2F;traf
2310: 66 69 63 5f 73 70 79 26 23 78 32 46 3b 6c 69 62 fic_spy&#x2F;lib
2320: 26 23 78 32 46 3b 74 72 61 66 66 69 63 5f 73 70 &#x2F;traffic_sp
2330: 79 26 23 78 32 46 3b 72 6f 75 74 65 72 2e 72 62 y&#x2F;router.rb
2340: 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 </code> in.     
2350: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
2360: 3e 3c 73 74 72 6f 6e 67 3e 6e 65 77 3c 2f 73 74 ><strong>new</st
2370: 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 rong></code>.   
2380: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
2390: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
23a0: 63 6c 61 73 73 3d 22 63 6f 64 65 20 61 70 70 22 class="code app"
23b0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
23c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
23d0: 6f 6c 20 73 74 61 72 74 3d 22 32 31 22 0a 20 20 ol start="21".  
23e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
23f0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2400: 78 74 22 20 69 64 3d 22 70 72 65 2d 32 22 0a 20 xt" id="pre-2". 
2410: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2420: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
2430: 28 32 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 (2);">.         
2440: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2450: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2460: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2470: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2480: 20 20 20 26 71 75 6f 74 3b 7b 5c 26 71 75 6f 74    &quot;{\&quot
2490: 3b 69 64 65 6e 74 69 66 69 65 72 5c 26 71 75 6f ;identifier\&quo
24a0: 74 3b 3a 5c 26 71 75 6f 74 3b 23 7b 70 61 72 61 t;:\&quot;#{para
24b0: 6d 73 5b 3a 69 64 65 6e 74 69 66 69 65 72 5d 7d ms[:identifier]}
24c0: 5c 26 71 75 6f 74 3b 7d 26 71 75 6f 74 3b 0a 3c \&quot;}&quot;.<
24d0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
24e0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
24f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2500: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
2510: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2520: 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65       end.</code
2530: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2540: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2550: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2560: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2570: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 ine"><code>    e
2580: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
2590: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
25a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
25b0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
25c0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
25d0: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
25e0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
25f0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2600: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2610: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2620: 3c 63 6f 64 65 3e 20 20 20 20 70 6f 73 74 20 26 <code>    post &
2630: 23 78 32 37 3b 26 23 78 32 46 3b 73 6f 75 72 63 #x27;&#x2F;sourc
2640: 65 73 26 23 78 32 46 3b 3a 69 64 65 6e 74 69 66 es&#x2F;:identif
2650: 69 65 72 26 23 78 32 46 3b 64 61 74 61 26 23 78 ier&#x2F;data&#x
2660: 32 37 3b 20 64 6f 0a 3c 2f 63 6f 64 65 3e 3c 2f 27; do.</code></
2670: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2680: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2690: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
26a0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
26b0: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
26c0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
26d0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
26e0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
26f0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
2700: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2710: 69 66 20 53 69 74 65 2e 65 78 69 73 74 73 3f 28 if Site.exists?(
2720: 3a 69 64 65 6e 74 69 66 69 65 72 29 0a 3c 2f 63 :identifier).</c
2730: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2740: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2750: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
2760: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20              .. 
2770: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
2780: 20 73 74 61 72 74 3d 22 32 38 22 20 63 6c 61 73  start="28" clas
2790: 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 s="context" id="
27a0: 32 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 2".             
27b0: 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f      onclick="to
27c0: 67 67 6c 65 28 32 29 3b 22 3e 0a 20 20 20 20 20 ggle(2);">.     
27d0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
27e0: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 lass="context-li
27f0: 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d ne" id="context-
2800: 32 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 2"><code>       
2810: 20 54 72 61 66 66 69 63 53 70 79 3a 3a 52 65 71  TrafficSpy::Req
2820: 75 65 73 74 50 61 72 73 65 72 2e 6e 65 77 28 70 uestParser.new(p
2830: 61 72 61 6d 73 29 3c 2f 63 6f 64 65 3e 3c 2f 6c arams)</code></l
2840: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2850: 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20  </ol>..        
2860: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2870: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
2880: 32 39 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 29" class="post-
2890: 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 context".       
28a0: 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70            id="p
28b0: 6f 73 74 2d 32 22 20 6f 6e 63 6c 69 63 6b 3d 22 ost-2" onclick="
28c0: 74 6f 67 67 6c 65 28 32 29 3b 22 3e 0a 20 20 20 toggle(2);">.   
28d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
28e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
28f0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
2900: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2910: 65 3e 20 20 20 20 20 20 20 26 71 75 6f 74 3b 7b e>       &quot;{
2920: 5c 26 71 75 6f 74 3b 6d 65 73 73 61 67 65 5c 26 \&quot;message\&
2930: 71 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b 70 61 79 quot;:\&quot;pay
2940: 6c 6f 61 64 20 68 61 73 20 62 65 65 6e 20 70 61 load has been pa
2950: 72 73 65 64 2e 5c 26 71 75 6f 74 3b 7d 26 71 75 rsed.\&quot;}&qu
2960: 6f 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ot;.</code></li>
2970: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2980: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2990: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
29a0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
29b0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6c 73 65 <code>      else
29c0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
29d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
29e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
29f0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
2a00: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
2a10: 64 65 3e 20 20 20 20 20 20 20 20 73 74 61 74 75 de>        statu
2a20: 73 20 34 30 33 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c s 403.</code></l
2a30: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2a40: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2a50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2a60: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2a70: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2a80: 26 71 75 6f 74 3b 7b 5c 26 71 75 6f 74 3b 6d 65 &quot;{\&quot;me
2a90: 73 73 61 67 65 5c 26 71 75 6f 74 3b 3a 5c 69 64 ssage\&quot;:\id
2aa0: 65 6e 74 69 66 69 65 72 20 64 6f 65 73 20 6e 6f entifier does no
2ab0: 74 20 65 78 69 73 74 5c 26 71 75 6f 74 3b 7d 26 t exist\&quot;}&
2ac0: 71 75 6f 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c quot;.</code></l
2ad0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2ae0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2af0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2b00: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2b10: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e "><code>      en
2b20: 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 d.</code></li>. 
2b30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2b40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2b50: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
2b60: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2b70: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
2b80: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2b90: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2ba0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2bb0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
2bc0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
2bd0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2be0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2bf0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
2c00: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
2c10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
2c20: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
2c30: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
2c40: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
2c50: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
2c60: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2c70: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
2c80: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
2c90: 69 6e 66 6f 20 61 70 70 22 3e 0a 20 20 20 20 20 info app">.     
2ca0: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
2cb0: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
2cc0: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
2cd0: 3b 50 72 6f 6a 65 63 74 73 26 23 78 32 46 3b 74 ;Projects&#x2F;t
2ce0: 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b raffic_spy&#x2F;
2cf0: 6c 69 62 26 23 78 32 46 3b 74 72 61 66 66 69 63 lib&#x2F;traffic
2d00: 5f 73 70 79 26 23 78 32 46 3b 72 6f 75 74 65 72 _spy&#x2F;router
2d10: 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 .rb</code> in.  
2d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
2d30: 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f 63 ode><strong>bloc
2d40: 6b 20 69 6e 20 26 6c 74 3b 63 6c 61 73 73 3a 52 k in &lt;class:R
2d50: 6f 75 74 65 72 26 67 74 3b 3c 2f 73 74 72 6f 6e outer&gt;</stron
2d60: 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 g></code>.      
2d70: 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20       </li>..   
2d80: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2d90: 73 73 3d 22 63 6f 64 65 20 61 70 70 22 3e 0a 20 ss="code app">. 
2da0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2db0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
2dc0: 73 74 61 72 74 3d 22 32 31 22 0a 20 20 20 20 20 start="21".     
2dd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61              cla
2de0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 ss="pre-context"
2df0: 20 69 64 3d 22 70 72 65 2d 33 22 0a 20 20 20 20  id="pre-3".    
2e00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e               on
2e10: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 29 click="toggle(3)
2e20: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
2e30: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2e40: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2e50: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
2e60: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2e70: 26 71 75 6f 74 3b 7b 5c 26 71 75 6f 74 3b 69 64 &quot;{\&quot;id
2e80: 65 6e 74 69 66 69 65 72 5c 26 71 75 6f 74 3b 3a entifier\&quot;:
2e90: 5c 26 71 75 6f 74 3b 23 7b 70 61 72 61 6d 73 5b \&quot;#{params[
2ea0: 3a 69 64 65 6e 74 69 66 69 65 72 5d 7d 5c 26 71 :identifier]}\&q
2eb0: 75 6f 74 3b 7d 26 71 75 6f 74 3b 0a 3c 2f 63 6f uot;}&quot;.</co
2ec0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2ed0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2ee0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2ef0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2f00: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2f10: 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f    end.</code></
2f20: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2f30: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2f40: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2f50: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
2f60: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a "><code>    end.
2f70: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2f80: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2f90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2fa0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2fb0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2fc0: 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 >.</code></li>. 
2fd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2ff0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
3000: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3010: 64 65 3e 20 20 20 20 70 6f 73 74 20 26 23 78 32 de>    post &#x2
3020: 37 3b 26 23 78 32 46 3b 73 6f 75 72 63 65 73 26 7;&#x2F;sources&
3030: 23 78 32 46 3b 3a 69 64 65 6e 74 69 66 69 65 72 #x2F;:identifier
3040: 26 23 78 32 46 3b 64 61 74 61 26 23 78 32 37 3b &#x2F;data&#x27;
3050: 20 64 6f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e  do.</code></li>
3060: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3070: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3080: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3090: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
30a0: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
30b0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
30c0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
30d0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
30e0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
30f0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 69 66 20 ><code>      if 
3100: 53 69 74 65 2e 65 78 69 73 74 73 3f 28 3a 69 64 Site.exists?(:id
3110: 65 6e 74 69 66 69 65 72 29 0a 3c 2f 63 6f 64 65 entifier).</code
3120: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3130: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3140: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
3150: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
3160: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
3170: 61 72 74 3d 22 32 38 22 20 63 6c 61 73 73 3d 22 art="28" class="
3180: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 33 22 0a context" id="3".
3190: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
31a0: 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c   onclick="toggl
31b0: 65 28 33 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 e(3);">.        
31c0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
31d0: 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 s="context-line"
31e0: 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 33 22 3e  id="context-3">
31f0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 54 72 <code>        Tr
3200: 61 66 66 69 63 53 70 79 3a 3a 52 65 71 75 65 73 afficSpy::Reques
3210: 74 50 61 72 73 65 72 2e 6e 65 77 28 70 61 72 61 tParser.new(para
3220: 6d 73 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ms)</code></li>.
3230: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
3240: 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 ol>..           
3250: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3260: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 32 39 22   <ol start="29"
3270: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3280: 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 text".          
3290: 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74         id="post
32a0: 2d 33 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 -3" onclick="tog
32b0: 67 6c 65 28 33 29 3b 22 3e 0a 20 20 20 20 20 20 gle(3);">.      
32c0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
32d0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
32e0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
32f0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3300: 20 20 20 20 20 20 26 71 75 6f 74 3b 7b 5c 26 71       &quot;{\&q
3310: 75 6f 74 3b 6d 65 73 73 61 67 65 5c 26 71 75 6f uot;message\&quo
3320: 74 3b 3a 5c 26 71 75 6f 74 3b 70 61 79 6c 6f 61 t;:\&quot;payloa
3330: 64 20 68 61 73 20 62 65 65 6e 20 70 61 72 73 65 d has been parse
3340: 64 2e 5c 26 71 75 6f 74 3b 7d 26 71 75 6f 74 3b d.\&quot;}&quot;
3350: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3360: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3370: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3380: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
3390: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
33a0: 64 65 3e 20 20 20 20 20 20 65 6c 73 65 0a 3c 2f de>      else.</
33b0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
33c0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
33d0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
33e0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
33f0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3400: 20 20 20 20 20 20 20 20 73 74 61 74 75 73 20 34         status 4
3410: 30 33 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 03.</code></li>.
3420: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3430: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3440: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
3450: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3460: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 26 71 75 code>        &qu
3470: 6f 74 3b 7b 5c 26 71 75 6f 74 3b 6d 65 73 73 61 ot;{\&quot;messa
3480: 67 65 5c 26 71 75 6f 74 3b 3a 5c 69 64 65 6e 74 ge\&quot;:\ident
3490: 69 66 69 65 72 20 64 6f 65 73 20 6e 6f 74 20 65 ifier does not e
34a0: 78 69 73 74 5c 26 71 75 6f 74 3b 7d 26 71 75 6f xist\&quot;}&quo
34b0: 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a t;.</code></li>.
34c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
34d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
34e0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
34f0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3500: 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c code>      end.<
3510: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3520: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3530: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3540: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3550: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3560: 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e >    end.</code>
3570: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3580: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3590: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
35a0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
35b0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
35c0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
35d0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
35e0: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
35f0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3600: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
3610: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
3620: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
3630: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
3640: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
3650: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
3660: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3670: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
3680: 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 o framework">.  
3690: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
36a0: 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 e>&#x2F;Users&#x
36b0: 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 2F;kareemgrant&#
36c0: 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 x2F;.rvm&#x2F;ge
36d0: 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 ms&#x2F;ruby-1.9
36e0: 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f .3-p194@traffic_
36f0: 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 spy&#x2F;gems&#x
3700: 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 2F;sinatra-1.3.5
3710: 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 &#x2F;lib&#x2F;s
3720: 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 inatra&#x2F;base
3730: 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 .rb</code> in.  
3740: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
3750: 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c ode><strong>call
3760: 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e </strong></code>
3770: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
3780: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 i>..            
3790: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 <li class="code 
37a0: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
37b0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
37c0: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
37d0: 72 74 3d 22 31 32 38 36 22 0a 20 20 20 20 20 20 rt="1286".      
37e0: 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73             clas
37f0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 s="pre-context" 
3800: 69 64 3d 22 70 72 65 2d 34 22 0a 20 20 20 20 20 id="pre-4".     
3810: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
3820: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 29 3b lick="toggle(4);
3830: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
3840: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3850: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3860: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
3870: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 6d ><code>        m
3880: 65 74 68 6f 64 5f 6e 61 6d 65 20 20 20 20 20 20 ethod_name      
3890: 20 20 20 20 20 20 20 3d 20 26 71 75 6f 74 3b 23        = &quot;#
38a0: 7b 76 65 72 62 7d 20 23 7b 70 61 74 68 7d 26 71 {verb} #{path}&q
38b0: 75 6f 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 uot;.</code></li
38c0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
38d0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
38e0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
38f0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
3900: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 75 6e <code>        un
3910: 62 6f 75 6e 64 5f 6d 65 74 68 6f 64 20 20 20 20 bound_method    
3920: 20 20 20 20 20 20 3d 20 67 65 6e 65 72 61 74 65       = generate
3930: 5f 6d 65 74 68 6f 64 28 6d 65 74 68 6f 64 5f 6e _method(method_n
3940: 61 6d 65 2c 20 26 61 6d 70 3b 62 6c 6f 63 6b 29 ame, &amp;block)
3950: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3960: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3970: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3980: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3990: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
39a0: 65 3e 20 20 20 20 20 20 20 20 70 61 74 74 65 72 e>        patter
39b0: 6e 2c 20 6b 65 79 73 20 20 20 20 20 20 20 20 20 n, keys         
39c0: 20 20 3d 20 63 6f 6d 70 69 6c 65 20 70 61 74 68   = compile path
39d0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
39e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
39f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3a00: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3a10: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3a20: 65 3e 20 20 20 20 20 20 20 20 63 6f 6e 64 69 74 e>        condit
3a30: 69 6f 6e 73 2c 20 40 63 6f 6e 64 69 74 69 6f 6e ions, @condition
3a40: 73 20 3d 20 40 63 6f 6e 64 69 74 69 6f 6e 73 2c s = @conditions,
3a50: 20 5b 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e  [].</code></li>
3a60: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3a70: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3a80: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3a90: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3aa0: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
3ab0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3ac0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3ad0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3ae0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
3af0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 5b ><code>        [
3b00: 20 70 61 74 74 65 72 6e 2c 20 6b 65 79 73 2c 20  pattern, keys, 
3b10: 63 6f 6e 64 69 74 69 6f 6e 73 2c 20 62 6c 6f 63 conditions, bloc
3b20: 6b 2e 61 72 69 74 79 20 21 3d 20 30 20 3f 0a 3c k.arity != 0 ?.<
3b30: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3b40: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3b50: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3b60: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
3b70: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3b80: 20 20 20 20 20 20 20 20 20 20 20 20 70 72 6f 63             proc
3b90: 20 7b 20 7c 61 2c 70 7c 20 75 6e 62 6f 75 6e 64  { |a,p| unbound
3ba0: 5f 6d 65 74 68 6f 64 2e 62 69 6e 64 28 61 29 2e _method.bind(a).
3bb0: 63 61 6c 6c 28 2a 70 29 20 7d 20 3a 0a 3c 2f 63 call(*p) } :.</c
3bc0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
3bd0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3be0: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
3bf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20              .. 
3c00: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
3c10: 20 73 74 61 72 74 3d 22 31 32 39 33 22 20 63 6c  start="1293" cl
3c20: 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 ass="context" id
3c30: 3d 22 34 22 0a 20 20 20 20 20 20 20 20 20 20 20 ="4".           
3c40: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
3c50: 74 6f 67 67 6c 65 28 34 29 3b 22 3e 0a 20 20 20 toggle(4);">.   
3c60: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3c70: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d  class="context-
3c80: 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 line" id="contex
3c90: 74 2d 34 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 t-4"><code>     
3ca0: 20 20 20 20 20 20 20 70 72 6f 63 20 7b 20 7c 61        proc { |a
3cb0: 2c 70 7c 20 75 6e 62 6f 75 6e 64 5f 6d 65 74 68 ,p| unbound_meth
3cc0: 6f 64 2e 62 69 6e 64 28 61 29 2e 63 61 6c 6c 20 od.bind(a).call 
3cd0: 7d 20 5d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a } ]</code></li>.
3ce0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
3cf0: 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 ol>..           
3d00: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3d10: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 32 39   <ol start="129
3d20: 34 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 4" class="post-c
3d30: 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 ontext".        
3d40: 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f           id="po
3d50: 73 74 2d 34 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 st-4" onclick="t
3d60: 6f 67 67 6c 65 28 34 29 3b 22 3e 0a 20 20 20 20 oggle(4);">.    
3d70: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3d80: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3d90: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3da0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3db0: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
3dc0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3dd0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3de0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3df0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
3e00: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
3e10: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3e20: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3e30: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3e40: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
3e50: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3e60: 20 20 20 20 20 20 64 65 66 20 63 6f 6d 70 69 6c       def compil
3e70: 65 28 70 61 74 68 29 0a 3c 2f 63 6f 64 65 3e 3c e(path).</code><
3e80: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3e90: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3ea0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3eb0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
3ec0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
3ed0: 20 20 6b 65 79 73 20 3d 20 5b 5d 0a 3c 2f 63 6f   keys = [].</co
3ee0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3ef0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3f00: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3f10: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
3f20: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
3f30: 20 20 20 20 20 20 69 66 20 70 61 74                   if pat
<= Recv data, 16384 bytes (0x4000)
0000: 68 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 74 h.respond_to? :t
0010: 6f 5f 73 74 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c o_str.</code></l
0020: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0030: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0040: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0050: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
0060: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
0070: 20 20 70 61 74 74 65 72 6e 20 3d 20 70 61 74 68   pattern = path
0080: 2e 74 6f 5f 73 74 72 2e 67 73 75 62 28 26 23 78 .to_str.gsub(&#x
0090: 32 46 3b 5b 5e 5c 3f 5c 25 5c 5c 5c 26 23 78 32 2F;[^\?\%\\\&#x2
00a0: 46 3b 5c 3a 5c 2a 5c 77 5d 26 23 78 32 46 3b 29 F;\:\*\w]&#x2F;)
00b0: 20 7b 20 7c 63 7c 20 65 6e 63 6f 64 65 64 28 63  { |c| encoded(c
00c0: 29 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ) }.</code></li>
00d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
00e0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
00f0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
0100: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
0110: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 <code>          
0120: 70 61 74 74 65 72 6e 2e 67 73 75 62 21 28 26 23 pattern.gsub!(&#
0130: 78 32 46 3b 28 28 3a 5c 77 2b 29 7c 5c 2a 29 26 x2F;((:\w+)|\*)&
0140: 23 78 32 46 3b 29 20 64 6f 20 7c 6d 61 74 63 68 #x2F;) do |match
0150: 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 |.</code></li>. 
0160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0170: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
0180: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
0190: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
01a0: 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65  <div class="cle
01b0: 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 ar"></div>.     
01c0: 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20        </li>..  
01d0: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
01e0: 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20   .      .      
01f0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
0200: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61   <li class="fra
0210: 6d 65 2d 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 me-info framewor
0220: 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 k">.            
0230: 20 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73   <code>&#x2F;Us
0240: 65 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 ers&#x2F;kareemg
0250: 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 rant&#x2F;.rvm&#
0260: 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 x2F;gems&#x2F;ru
0270: 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 by-1.9.3-p194@tr
0280: 61 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 affic_spy&#x2F;g
0290: 65 6d 73 26 23 78 32 46 3b 73 69 6e 61 74 72 61 ems&#x2F;sinatra
02a0: 2d 31 2e 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 -1.3.5&#x2F;lib&
02b0: 23 78 32 46 3b 73 69 6e 61 74 72 61 26 23 78 32 #x2F;sinatra&#x2
02c0: 46 3b 62 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e F;base.rb</code>
02d0: 20 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20  in.            
02e0: 20 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e     <code><stron
02f0: 67 3e 62 6c 6f 63 6b 20 69 6e 20 63 6f 6d 70 69 g>block in compi
0300: 6c 65 21 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f le!</strong></co
0310: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
0320: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
0330: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0340: 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 de framework">. 
0350: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0360: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
0370: 73 74 61 72 74 3d 22 31 32 38 36 22 0a 20 20 20 start="1286".   
0380: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63                c
0390: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
03a0: 74 22 20 69 64 3d 22 70 72 65 2d 35 22 0a 20 20 t" id="pre-5".  
03b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
03c0: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
03d0: 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 5);">.          
03e0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
03f0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0400: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
0410: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
0420: 20 20 6d 65 74 68 6f 64 5f 6e 61 6d 65 20 20 20   method_name   
0430: 20 20 20 20 20 20 20 20 20 20 3d 20 26 71 75 6f           = &quo
0440: 74 3b 23 7b 76 65 72 62 7d 20 23 7b 70 61 74 68 t;#{verb} #{path
0450: 7d 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 65 3e 3c }&quot;.</code><
0460: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0470: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0480: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0490: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
04a0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
04b0: 20 75 6e 62 6f 75 6e 64 5f 6d 65 74 68 6f 64 20  unbound_method 
04c0: 20 20 20 20 20 20 20 20 20 3d 20 67 65 6e 65 72          = gener
04d0: 61 74 65 5f 6d 65 74 68 6f 64 28 6d 65 74 68 6f ate_method(metho
04e0: 64 5f 6e 61 6d 65 2c 20 26 61 6d 70 3b 62 6c 6f d_name, &amp;blo
04f0: 63 6b 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ck).</code></li>
0500: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0510: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0520: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0530: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0540: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 70 61 74 code>        pat
0550: 74 65 72 6e 2c 20 6b 65 79 73 20 20 20 20 20 20 tern, keys      
0560: 20 20 20 20 20 3d 20 63 6f 6d 70 69 6c 65 20 70      = compile p
0570: 61 74 68 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ath.</code></li>
0580: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0590: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
05a0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
05b0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
05c0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 63 6f 6e code>        con
05d0: 64 69 74 69 6f 6e 73 2c 20 40 63 6f 6e 64 69 74 ditions, @condit
05e0: 69 6f 6e 73 20 3d 20 40 63 6f 6e 64 69 74 69 6f ions = @conditio
05f0: 6e 73 2c 20 5b 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f ns, [].</code></
0600: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0610: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0620: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0630: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
0640: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
0650: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0660: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0670: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0680: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
0690: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
06a0: 20 20 5b 20 70 61 74 74 65 72 6e 2c 20 6b 65 79   [ pattern, key
06b0: 73 2c 20 63 6f 6e 64 69 74 69 6f 6e 73 2c 20 62 s, conditions, b
06c0: 6c 6f 63 6b 2e 61 72 69 74 79 20 21 3d 20 30 20 lock.arity != 0 
06d0: 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ?.</code></li>. 
06e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
06f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0700: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0710: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0720: 64 65 3e 20 20 20 20 20 20 20 20 20 20 20 20 70 de>            p
0730: 72 6f 63 20 7b 20 7c 61 2c 70 7c 20 75 6e 62 6f roc { |a,p| unbo
0740: 75 6e 64 5f 6d 65 74 68 6f 64 2e 62 69 6e 64 28 und_method.bind(
0750: 61 29 2e 63 61 6c 6c 28 2a 70 29 20 7d 20 3a 0a a).call(*p) } :.
0760: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0770: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0780: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
0790: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
07a0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
07b0: 3c 6f 6c 20 73 74 61 72 74 3d 22 31 32 39 33 22 <ol start="1293"
07c0: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22  class="context"
07d0: 20 69 64 3d 22 35 22 0a 20 20 20 20 20 20 20 20  id="5".        
07e0: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
07f0: 6b 3d 22 74 6f 67 67 6c 65 28 35 29 3b 22 3e 0a k="toggle(5);">.
0800: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0810: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 <li class="conte
0820: 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e xt-line" id="con
0830: 74 65 78 74 2d 35 22 3e 3c 63 6f 64 65 3e 20 20 text-5"><code>  
0840: 20 20 20 20 20 20 20 20 20 20 70 72 6f 63 20 7b           proc {
0850: 20 7c 61 2c 70 7c 20 75 6e 62 6f 75 6e 64 5f 6d  |a,p| unbound_m
0860: 65 74 68 6f 64 2e 62 69 6e 64 28 61 29 2e 63 61 ethod.bind(a).ca
0870: 6c 6c 20 7d 20 5d 3c 2f 63 6f 64 65 3e 3c 2f 6c ll } ]</code></l
0880: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0890: 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20  </ol>..        
08a0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
08b0: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
08c0: 31 32 39 34 22 20 63 6c 61 73 73 3d 22 70 6f 73 1294" class="pos
08d0: 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 t-context".     
08e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d              id=
08f0: 22 70 6f 73 74 2d 35 22 20 6f 6e 63 6c 69 63 6b "post-5" onclick
0900: 3d 22 74 6f 67 67 6c 65 28 35 29 3b 22 3e 0a 20 ="toggle(5);">. 
0910: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0920: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0930: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
0940: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0950: 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f ode>      end.</
0960: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0970: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0980: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0990: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
09a0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
09b0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
09c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
09d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
09e0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
09f0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0a00: 64 65 3e 20 20 20 20 20 20 64 65 66 20 63 6f 6d de>      def com
0a10: 70 69 6c 65 28 70 61 74 68 29 0a 3c 2f 63 6f 64 pile(path).</cod
0a20: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0a30: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0a40: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0a50: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0a60: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0a70: 20 20 20 20 20 6b 65 79 73 20 3d 20 5b 5d 0a 3c      keys = [].<
0a80: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0a90: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0aa0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0ab0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0ac0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0ad0: 3e 20 20 20 20 20 20 20 20 69 66 20 70 61 74 68 >        if path
0ae0: 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 74 6f .respond_to? :to
0af0: 5f 73 74 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 _str.</code></li
0b00: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0b10: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0b20: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
0b30: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
0b40: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 ><code>         
0b50: 20 70 61 74 74 65 72 6e 20 3d 20 70 61 74 68 2e  pattern = path.
0b60: 74 6f 5f 73 74 72 2e 67 73 75 62 28 26 23 78 32 to_str.gsub(&#x2
0b70: 46 3b 5b 5e 5c 3f 5c 25 5c 5c 5c 26 23 78 32 46 F;[^\?\%\\\&#x2F
0b80: 3b 5c 3a 5c 2a 5c 77 5d 26 23 78 32 46 3b 29 20 ;\:\*\w]&#x2F;) 
0b90: 7b 20 7c 63 7c 20 65 6e 63 6f 64 65 64 28 63 29 { |c| encoded(c)
0ba0: 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a  }.</code></li>.
0bb0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0bc0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0bd0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
0be0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0bf0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 70 code>          p
0c00: 61 74 74 65 72 6e 2e 67 73 75 62 21 28 26 23 78 attern.gsub!(&#x
0c10: 32 46 3b 28 28 3a 5c 77 2b 29 7c 5c 2a 29 26 23 2F;((:\w+)|\*)&#
0c20: 78 32 46 3b 29 20 64 6f 20 7c 6d 61 74 63 68 7c x2F;) do |match|
0c30: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0c40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0c50: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
0c60: 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 l>.             
0c70: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0c80: 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 <div class="clea
0c90: 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 r"></div>.      
0ca0: 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20       </li>..   
0cb0: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
0cc0: 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 20  .      .       
0cd0: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
0ce0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d  <li class="fram
0cf0: 65 2d 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b e-info framework
0d00: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
0d10: 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65  <code>&#x2F;Use
0d20: 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 rs&#x2F;kareemgr
0d30: 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 ant&#x2F;.rvm&#x
0d40: 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 2F;gems&#x2F;rub
0d50: 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 y-1.9.3-p194@tra
0d60: 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 ffic_spy&#x2F;ge
0d70: 6d 73 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d ms&#x2F;sinatra-
0d80: 31 2e 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 1.3.5&#x2F;lib&#
0d90: 78 32 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 x2F;sinatra&#x2F
0da0: 3b 62 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 ;base.rb</code> 
0db0: 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 in.             
0dc0: 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67    <code><strong
0dd0: 3e 5b 5d 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f >[]</strong></co
0de0: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
0df0: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
0e00: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0e10: 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 de framework">. 
0e20: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0e30: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
0e40: 73 74 61 72 74 3d 22 38 35 33 22 0a 20 20 20 20 start="853".    
0e50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c               cl
0e60: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0e70: 22 20 69 64 3d 22 70 72 65 2d 36 22 0a 20 20 20 " id="pre-6".   
0e80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f                o
0e90: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 36 nclick="toggle(6
0ea0: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
0eb0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0ec0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0ed0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
0ee0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 e"><code>    end
0ef0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0f00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0f10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0f20: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
0f30: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0f40: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
0f50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0f60: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0f70: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0f80: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0f90: 6f 64 65 3e 20 20 20 20 23 20 52 75 6e 20 72 6f ode>    # Run ro
0fa0: 75 74 65 73 20 64 65 66 69 6e 65 64 20 6f 6e 20 utes defined on 
0fb0: 74 68 65 20 63 6c 61 73 73 20 61 6e 64 20 61 6c the class and al
0fc0: 6c 20 73 75 70 65 72 63 6c 61 73 73 65 73 2e 0a l superclasses..
0fd0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0ff0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1000: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
1010: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1020: 3e 20 20 20 20 64 65 66 20 72 6f 75 74 65 21 28 >    def route!(
1030: 62 61 73 65 20 3d 20 73 65 74 74 69 6e 67 73 2c base = settings,
1040: 20 70 61 73 73 5f 62 6c 6f 63 6b 3d 6e 69 6c 29  pass_block=nil)
1050: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1060: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1070: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1080: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
1090: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
10a0: 65 3e 20 20 20 20 20 20 69 66 20 72 6f 75 74 65 e>      if route
10b0: 73 20 3d 20 62 61 73 65 2e 72 6f 75 74 65 73 5b s = base.routes[
10c0: 40 72 65 71 75 65 73 74 2e 72 65 71 75 65 73 74 @request.request
10d0: 5f 6d 65 74 68 6f 64 5d 0a 3c 2f 63 6f 64 65 3e _method].</code>
10e0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
10f0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1100: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1110: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
1120: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1130: 20 20 72 6f 75 74 65 73 2e 65 61 63 68 20 64 6f   routes.each do
1140: 20 7c 70 61 74 74 65 72 6e 2c 20 6b 65 79 73 2c  |pattern, keys,
1150: 20 63 6f 6e 64 69 74 69 6f 6e 73 2c 20 62 6c 6f  conditions, blo
1160: 63 6b 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ck|.</code></li>
1170: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1180: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1190: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
11a0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
11b0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 70 code>          p
11c0: 61 73 73 5f 62 6c 6f 63 6b 20 3d 20 70 72 6f 63 ass_block = proc
11d0: 65 73 73 5f 72 6f 75 74 65 28 70 61 74 74 65 72 ess_route(patter
11e0: 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e 64 69 74 69 n, keys, conditi
11f0: 6f 6e 73 29 20 64 6f 20 7c 2a 61 72 67 73 7c 0a ons) do |*args|.
1200: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1210: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1220: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
1230: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1240: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
1250: 3c 6f 6c 20 73 74 61 72 74 3d 22 38 36 30 22 20 <ol start="860" 
1260: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 class="context" 
1270: 69 64 3d 22 36 22 0a 20 20 20 20 20 20 20 20 20 id="6".         
1280: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
1290: 3d 22 74 6f 67 67 6c 65 28 36 29 3b 22 3e 0a 20 ="toggle(6);">. 
12a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
12b0: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 li class="contex
12c0: 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 t-line" id="cont
12d0: 65 78 74 2d 36 22 3e 3c 63 6f 64 65 3e 20 20 20 ext-6"><code>   
12e0: 20 20 20 20 20 20 20 20 20 72 6f 75 74 65 5f 65          route_e
12f0: 76 61 6c 20 7b 20 62 6c 6f 63 6b 5b 2a 61 72 67 val { block[*arg
1300: 73 5d 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e s] }</code></li>
1310: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
1320: 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /ol>..          
1330: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1340: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38 36    <ol start="86
1350: 31 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 1" class="post-c
1360: 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 ontext".        
1370: 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f           id="po
1380: 73 74 2d 36 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 st-6" onclick="t
1390: 6f 67 67 6c 65 28 36 29 3b 22 3e 0a 20 20 20 20 oggle(6);">.    
13a0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
13b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
13c0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
13d0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
13e0: 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 0a 3c >          end.<
13f0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1400: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1410: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1420: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
1430: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1440: 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 >        end.</c
1450: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1460: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1470: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1480: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
1490: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
14a0: 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e      end.</code>
14b0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
14c0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
14d0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
14e0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
14f0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
1500: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1510: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1520: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1530: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
1540: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
1550: 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74 65 73     # Run routes
1560: 20 64 65 66 69 6e 65 64 20 69 6e 20 73 75 70 65  defined in supe
1570: 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f 64 65 3e 3c rclass..</code><
1580: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1590: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
15a0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
15b0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
15c0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
15d0: 69 66 20 62 61 73 65 2e 73 75 70 65 72 63 6c 61 if base.supercla
15e0: 73 73 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f 28 3a ss.respond_to?(:
15f0: 72 6f 75 74 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c routes).</code><
1600: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1610: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1620: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1630: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1640: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1650: 20 20 72 65 74 75 72 6e 20 72 6f 75 74 65 21 28   return route!(
1660: 62 61 73 65 2e 73 75 70 65 72 63 6c 61 73 73 2c base.superclass,
1670: 20 70 61 73 73 5f 62 6c 6f 63 6b 29 0a 3c 2f 63  pass_block).</c
1680: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1690: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
16a0: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
16b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
16c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76             <div
16d0: 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c  class="clear"><
16e0: 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 /div>.          
16f0: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
1700: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20    ..        .  
1710: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a     .          .
1720: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
1730: 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e  class="frame-in
1740: 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 fo framework">. 
1750: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
1760: 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 de>&#x2F;Users&#
1770: 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 x2F;kareemgrant&
1780: 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 #x2F;.rvm&#x2F;g
1790: 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e ems&#x2F;ruby-1.
17a0: 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 9.3-p194@traffic
17b0: 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 _spy&#x2F;gems&#
17c0: 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e x2F;sinatra-1.3.
17d0: 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 5&#x2F;lib&#x2F;
17e0: 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 sinatra&#x2F;bas
17f0: 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 e.rb</code> in. 
1800: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1810: 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f code><strong>blo
1820: 63 6b 20 28 33 20 6c 65 76 65 6c 73 29 20 69 6e ck (3 levels) in
1830: 20 72 6f 75 74 65 21 3c 2f 73 74 72 6f 6e 67 3e  route!</strong>
1840: 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 </code>.        
1850: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
1860: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1870: 3d 22 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b ="code framework
1880: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
1890: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
18a0: 3c 6f 6c 20 73 74 61 72 74 3d 22 38 35 33 22 0a <ol start="853".
18b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
18c0: 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e   class="pre-con
18d0: 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d 37 22 text" id="pre-7"
18e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
18f0: 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67    onclick="togg
1900: 6c 65 28 37 29 3b 22 3e 0a 20 20 20 20 20 20 20 le(7);">.       
1910: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1920: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1930: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1940: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1950: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
1960: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1970: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1980: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1990: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
19a0: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
19b0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
19c0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
19d0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
19e0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
19f0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 "><code>    # Ru
1a00: 6e 20 72 6f 75 74 65 73 20 64 65 66 69 6e 65 64 n routes defined
1a10: 20 6f 6e 20 74 68 65 20 63 6c 61 73 73 20 61 6e  on the class an
1a20: 64 20 61 6c 6c 20 73 75 70 65 72 63 6c 61 73 73 d all superclass
1a30: 65 73 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e es..</code></li>
1a40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1a50: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1a60: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
1a70: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1a80: 63 6f 64 65 3e 20 20 20 20 64 65 66 20 72 6f 75 code>    def rou
1a90: 74 65 21 28 62 61 73 65 20 3d 20 73 65 74 74 69 te!(base = setti
1aa0: 6e 67 73 2c 20 70 61 73 73 5f 62 6c 6f 63 6b 3d ngs, pass_block=
1ab0: 6e 69 6c 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 nil).</code></li
1ac0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1ad0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1ae0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1af0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1b00: 3c 63 6f 64 65 3e 20 20 20 20 20 20 69 66 20 72 <code>      if r
1b10: 6f 75 74 65 73 20 3d 20 62 61 73 65 2e 72 6f 75 outes = base.rou
1b20: 74 65 73 5b 40 72 65 71 75 65 73 74 2e 72 65 71 tes[@request.req
1b30: 75 65 73 74 5f 6d 65 74 68 6f 64 5d 0a 3c 2f 63 uest_method].</c
1b40: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1b50: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1b60: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1b70: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1b80: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
1b90: 20 20 20 20 20 20 72 6f 75 74 65 73 2e 65 61 63       routes.eac
1ba0: 68 20 64 6f 20 7c 70 61 74 74 65 72 6e 2c 20 6b h do |pattern, k
1bb0: 65 79 73 2c 20 63 6f 6e 64 69 74 69 6f 6e 73 2c eys, conditions,
1bc0: 20 62 6c 6f 63 6b 7c 0a 3c 2f 63 6f 64 65 3e 3c  block|.</code><
1bd0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1be0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1bf0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1c00: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
1c10: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
1c20: 20 20 20 70 61 73 73 5f 62 6c 6f 63 6b 20 3d 20    pass_block = 
1c30: 70 72 6f 63 65 73 73 5f 72 6f 75 74 65 28 70 61 process_route(pa
1c40: 74 74 65 72 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e ttern, keys, con
1c50: 64 69 74 69 6f 6e 73 29 20 64 6f 20 7c 2a 61 72 ditions) do |*ar
1c60: 67 73 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e gs|.</code></li>
1c70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1c80: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1c90: 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 </ol>.          
1ca0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
1cb0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38     <ol start="8
1cc0: 36 30 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 60" class="conte
1cd0: 78 74 22 20 69 64 3d 22 37 22 0a 20 20 20 20 20 xt" id="7".     
1ce0: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
1cf0: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 37 29 3b lick="toggle(7);
1d00: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
1d10: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
1d20: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
1d30: 63 6f 6e 74 65 78 74 2d 37 22 3e 3c 63 6f 64 65 context-7"><code
1d40: 3e 20 20 20 20 20 20 20 20 20 20 20 20 72 6f 75 >            rou
1d50: 74 65 5f 65 76 61 6c 20 7b 20 62 6c 6f 63 6b 5b te_eval { block[
1d60: 2a 61 72 67 73 5d 20 7d 3c 2f 63 6f 64 65 3e 3c *args] }</code><
1d70: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1d80: 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20    </ol>..      
1d90: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1da0: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
1db0: 3d 22 38 36 31 22 20 63 6c 61 73 73 3d 22 70 6f ="861" class="po
1dc0: 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 st-context".    
1dd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64               id
1de0: 3d 22 70 6f 73 74 2d 37 22 20 6f 6e 63 6c 69 63 ="post-7" onclic
1df0: 6b 3d 22 74 6f 67 67 6c 65 28 37 29 3b 22 3e 0a k="toggle(7);">.
1e00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1e10: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1e20: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
1e30: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1e40: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 65 code>          e
1e50: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
1e60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1e70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1e80: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
1e90: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1ea0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 65 6e 64 code>        end
1eb0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1ec0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1ed0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1ee0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1ef0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1f00: 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 de>      end.</c
1f10: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1f20: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1f30: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1f40: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
1f50: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a xt-line"><code>.
1f60: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1f70: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1f80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1f90: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1fa0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1fb0: 65 3e 20 20 20 20 20 20 23 20 52 75 6e 20 72 6f e>      # Run ro
1fc0: 75 74 65 73 20 64 65 66 69 6e 65 64 20 69 6e 20 utes defined in 
1fd0: 73 75 70 65 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f superclass..</co
1fe0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1ff0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2000: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2010: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
2020: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2030: 20 20 20 20 69 66 20 62 61 73 65 2e 73 75 70 65     if base.supe
2040: 72 63 6c 61 73 73 2e 72 65 73 70 6f 6e 64 5f 74 rclass.respond_t
2050: 6f 3f 28 3a 72 6f 75 74 65 73 29 0a 3c 2f 63 6f o?(:routes).</co
2060: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2070: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2080: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2090: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
20a0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
20b0: 20 20 20 20 20 20 72 65 74 75 72 6e 20 72 6f 75       return rou
20c0: 74 65 21 28 62 61 73 65 2e 73 75 70 65 72 63 6c te!(base.supercl
20d0: 61 73 73 2c 20 70 61 73 73 5f 62 6c 6f 63 6b 29 ass, pass_block)
20e0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
20f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2100: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
2110: 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 l>.             
2120: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2130: 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 <div class="clea
2140: 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 r"></div>.      
2150: 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20       </li>..   
2160: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
2170: 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 20  .      .       
2180: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
2190: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d  <li class="fram
21a0: 65 2d 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b e-info framework
21b0: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
21c0: 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65  <code>&#x2F;Use
21d0: 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 rs&#x2F;kareemgr
21e0: 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 ant&#x2F;.rvm&#x
21f0: 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 2F;gems&#x2F;rub
2200: 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 y-1.9.3-p194@tra
2210: 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 ffic_spy&#x2F;ge
2220: 6d 73 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d ms&#x2F;sinatra-
2230: 31 2e 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 1.3.5&#x2F;lib&#
2240: 78 32 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 x2F;sinatra&#x2F
2250: 3b 62 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 ;base.rb</code> 
2260: 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 in.             
2270: 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67    <code><strong
2280: 3e 72 6f 75 74 65 5f 65 76 61 6c 3c 2f 73 74 72 >route_eval</str
2290: 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 ong></code>.    
22a0: 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20         </li>.. 
22b0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
22c0: 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d 65 lass="code frame
22d0: 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 work">.         
22e0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
22f0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38     <ol start="8
2300: 36 39 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 69".            
2310: 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65       class="pre
2320: 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 -context" id="pr
2330: 65 2d 38 22 0a 20 20 20 20 20 20 20 20 20 20 20 e-8".           
2340: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
2350: 74 6f 67 67 6c 65 28 38 29 3b 22 3e 0a 20 20 20 toggle(8);">.   
2360: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2370: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2380: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2390: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
23a0: 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 >.</code></li>. 
23b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
23c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
23d0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
23e0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
23f0: 64 65 3e 20 20 20 20 20 20 72 6f 75 74 65 5f 65 de>      route_e
2400: 76 61 6c 28 26 61 6d 70 3b 70 61 73 73 5f 62 6c val(&amp;pass_bl
2410: 6f 63 6b 29 20 69 66 20 70 61 73 73 5f 62 6c 6f ock) if pass_blo
2420: 63 6b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ck.</code></li>.
2430: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2440: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2450: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2460: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2470: 6f 64 65 3e 20 20 20 20 20 20 72 6f 75 74 65 5f ode>      route_
2480: 6d 69 73 73 69 6e 67 0a 3c 2f 63 6f 64 65 3e 3c missing.</code><
2490: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
24a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
24b0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
24c0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
24d0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 e"><code>    end
24e0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
24f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2500: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
2510: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
2520: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2530: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
2540: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2550: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2560: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2570: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2580: 6f 64 65 3e 20 20 20 20 23 20 52 75 6e 20 61 20 ode>    # Run a 
2590: 72 6f 75 74 65 20 62 6c 6f 63 6b 20 61 6e 64 20 route block and 
25a0: 74 68 72 6f 77 20 3a 68 61 6c 74 20 77 69 74 68 throw :halt with
25b0: 20 74 68 65 20 72 65 73 75 6c 74 2e 0a 3c 2f 63  the result..</c
25c0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
25d0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
25e0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
25f0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
2600: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2610: 20 20 64 65 66 20 72 6f 75 74 65 5f 65 76 61 6c   def route_eval
2620: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
2630: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2640: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
2650: 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 l>.             
2660: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20  ..             
2670: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38 37 36 22  <ol start="876"
2680: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22  class="context"
2690: 20 69 64 3d 22 38 22 0a 20 20 20 20 20 20 20 20  id="8".        
26a0: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
26b0: 6b 3d 22 74 6f 67 67 6c 65 28 38 29 3b 22 3e 0a k="toggle(8);">.
26c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
26d0: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 <li class="conte
26e0: 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e xt-line" id="con
26f0: 74 65 78 74 2d 38 22 3e 3c 63 6f 64 65 3e 20 20 text-8"><code>  
2700: 20 20 20 20 74 68 72 6f 77 20 3a 68 61 6c 74 2c     throw :halt,
2710: 20 79 69 65 6c 64 3c 2f 63 6f 64 65 3e 3c 2f 6c  yield</code></l
2720: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2730: 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20  </ol>..        
2740: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2750: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
2760: 38 37 37 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 877" class="post
2770: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
2780: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
2790: 70 6f 73 74 2d 38 22 20 6f 6e 63 6c 69 63 6b 3d post-8" onclick=
27a0: 22 74 6f 67 67 6c 65 28 38 29 3b 22 3e 0a 20 20 "toggle(8);">.  
27b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
27c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
27d0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
27e0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
27f0: 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 de>    end.</cod
2800: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2810: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2820: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2830: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
2840: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
2850: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2860: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2870: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2880: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2890: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
28a0: 20 20 20 20 23 20 49 66 20 74 68 65 20 63 75 72     # If the cur
28b0: 72 65 6e 74 20 72 65 71 75 65 73 74 20 6d 61 74 rent request mat
28c0: 63 68 65 73 20 70 61 74 74 65 72 6e 20 61 6e 64 ches pattern and
28d0: 20 63 6f 6e 64 69 74 69 6f 6e 73 2c 20 66 69 6c  conditions, fil
28e0: 6c 20 70 61 72 61 6d 73 0a 3c 2f 63 6f 64 65 3e l params.</code>
28f0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2900: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2910: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2920: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2930: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 ine"><code>    #
2940: 20 77 69 74 68 20 6b 65 79 73 20 61 6e 64 20 63  with keys and c
2950: 61 6c 6c 20 74 68 65 20 67 69 76 65 6e 20 62 6c all the given bl
2960: 6f 63 6b 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ock..</code></li
2970: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2980: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2990: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
29a0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
29b0: 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 65 76 ><code>    # Rev
29c0: 65 72 74 20 70 61 72 61 6d 73 20 61 66 74 65 72 ert params after
29d0: 77 61 72 64 73 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f wards..</code></
29e0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
29f0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2a00: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2a10: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
2a20: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 0a 3c e"><code>    #.<
2a30: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2a40: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2a50: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2a60: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
2a70: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2a80: 3e 20 20 20 20 23 20 52 65 74 75 72 6e 73 20 70 >    # Returns p
2a90: 61 73 73 20 62 6c 6f 63 6b 2e 0a 3c 2f 63 6f 64 ass block..</cod
2aa0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2ab0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2ac0: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
2ad0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2ae0: 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63           <div c
2af0: 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 lass="clear"></d
2b00: 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 iv>.            
2b10: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
2b20: 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20  ..        .    
2b30: 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20   .          .. 
2b40: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2b50: 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f lass="frame-info
2b60: 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20  framework">.   
2b70: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
2b80: 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 >&#x2F;Users&#x2
2b90: 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 F;kareemgrant&#x
2ba0: 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 2F;.rvm&#x2F;gem
2bb0: 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e s&#x2F;ruby-1.9.
2bc0: 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 3-p194@traffic_s
2bd0: 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 py&#x2F;gems&#x2
2be0: 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 F;sinatra-1.3.5&
2bf0: 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 #x2F;lib&#x2F;si
2c00: 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e natra&#x2F;base.
2c10: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
2c20: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
2c30: 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f 63 6b de><strong>block
2c40: 20 28 32 20 6c 65 76 65 6c 73 29 20 69 6e 20 72  (2 levels) in r
2c50: 6f 75 74 65 21 3c 2f 73 74 72 6f 6e 67 3e 3c 2f oute!</strong></
2c60: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
2c70: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
2c80: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2c90: 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e code framework">
2ca0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
2cb0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
2cc0: 6c 20 73 74 61 72 74 3d 22 38 35 33 22 0a 20 20 l start="853".  
2cd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2ce0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2cf0: 78 74 22 20 69 64 3d 22 70 72 65 2d 39 22 0a 20 xt" id="pre-9". 
2d00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2d10: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
2d20: 28 39 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 (9);">.         
2d30: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2d40: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2d50: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2d60: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 ine"><code>    e
2d70: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
2d80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2d90: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2da0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2db0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2dc0: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
2dd0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2de0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2df0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2e00: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2e10: 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 6e 20 <code>    # Run 
2e20: 72 6f 75 74 65 73 20 64 65 66 69 6e 65 64 20 6f routes defined o
2e30: 6e 20 74 68 65 20 63 6c 61 73 73 20 61 6e 64 20 n the class and 
2e40: 61 6c 6c 20 73 75 70 65 72 63 6c 61 73 73 65 73 all superclasses
2e50: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
2e60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2e70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2e80: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
2e90: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
2ea0: 64 65 3e 20 20 20 20 64 65 66 20 72 6f 75 74 65 de>    def route
2eb0: 21 28 62 61 73 65 20 3d 20 73 65 74 74 69 6e 67 !(base = setting
2ec0: 73 2c 20 70 61 73 73 5f 62 6c 6f 63 6b 3d 6e 69 s, pass_block=ni
2ed0: 6c 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a l).</code></li>.
2ee0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2ef0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2f00: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2f10: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2f20: 6f 64 65 3e 20 20 20 20 20 20 69 66 20 72 6f 75 ode>      if rou
2f30: 74 65 73 20 3d 20 62 61 73 65 2e 72 6f 75 74 65 tes = base.route
2f40: 73 5b 40 72 65 71 75 65 73 74 2e 72 65 71 75 65 s[@request.reque
2f50: 73 74 5f 6d 65 74 68 6f 64 5d 0a 3c 2f 63 6f 64 st_method].</cod
2f60: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2f70: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2f80: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2f90: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2fa0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
2fb0: 20 20 20 20 72 6f 75 74 65 73 2e 65 61 63 68 20     routes.each 
2fc0: 64 6f 20 7c 70 61 74 74 65 72 6e 2c 20 6b 65 79 do |pattern, key
2fd0: 73 2c 20 63 6f 6e 64 69 74 69 6f 6e 73 2c 20 62 s, conditions, b
2fe0: 6c 6f 63 6b 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c lock|.</code></l
2ff0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3000: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3010: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3020: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
3030: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 ><code>         
3040: 20 70 61 73 73 5f 62 6c 6f 63 6b 20 3d 20 70 72  pass_block = pr
3050: 6f 63 65 73 73 5f 72 6f 75 74 65 28 70 61 74 74 ocess_route(patt
3060: 65 72 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e 64 69 ern, keys, condi
3070: 74 69 6f 6e 73 29 20 64 6f 20 7c 2a 61 72 67 73 tions) do |*args
3080: 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 |.</code></li>. 
3090: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
30a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
30b0: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
30c0: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
30d0: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38 36 30   <ol start="860
30e0: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
30f0: 22 20 69 64 3d 22 39 22 0a 20 20 20 20 20 20 20 " id="9".       
3100: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
3110: 63 6b 3d 22 74 6f 67 67 6c 65 28 39 29 3b 22 3e ck="toggle(9);">
3120: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3130: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74  <li class="cont
3140: 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f ext-line" id="co
3150: 6e 74 65 78 74 2d 39 22 3e 3c 63 6f 64 65 3e 20 ntext-9"><code> 
3160: 20 20 20 20 20 20 20 20 20 20 20 72 6f 75 74 65            route
3170: 5f 65 76 61 6c 20 7b 20 62 6c 6f 63 6b 5b 2a 61 _eval { block[*a
3180: 72 67 73 5d 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c rgs] }</code></l
3190: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
31a0: 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20  </ol>..        
31b0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
31c0: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
31d0: 38 36 31 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 861" class="post
31e0: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
31f0: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
3200: 70 6f 73 74 2d 39 22 20 6f 6e 63 6c 69 63 6b 3d post-9" onclick=
3210: 22 74 6f 67 67 6c 65 28 39 29 3b 22 3e 0a 20 20 "toggle(9);">.  
3220: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3230: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3240: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
3250: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3260: 64 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 de>          end
3270: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3280: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3290: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
32a0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
32b0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
32c0: 64 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c de>        end.<
32d0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
32e0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
32f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3300: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3310: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3320: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
3330: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3340: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3350: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3360: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
3370: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
3380: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3390: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
33a0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
33b0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
33c0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
33d0: 20 20 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74       # Run rout
33e0: 65 73 20 64 65 66 69 6e 65 64 20 69 6e 20 73 75 es defined in su
33f0: 70 65 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f 64 65 perclass..</code
3400: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3410: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3420: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3430: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
3440: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3450: 20 20 69 66 20 62 61 73 65 2e 73 75 70 65 72 63   if base.superc
3460: 6c 61 73 73 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f lass.respond_to?
3470: 28 3a 72 6f 75 74 65 73 29 0a 3c 2f 63 6f 64 65 (:routes).</code
3480: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3490: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
34a0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
34b0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
34c0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
34d0: 20 20 20 20 72 65 74 75 72 6e 20 72 6f 75 74 65     return route
34e0: 21 28 62 61 73 65 2e 73 75 70 65 72 63 6c 61 73 !(base.superclas
34f0: 73 2c 20 70 61 73 73 5f 62 6c 6f 63 6b 29 0a 3c s, pass_block).<
3500: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3510: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3520: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
3530: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
3540: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
3550: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
3560: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
3570: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
3580: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
3590: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
35a0: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
35b0: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
35c0: 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e info framework">
35d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
35e0: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
35f0: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
3600: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
3610: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
3620: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
3630: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
3640: 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e &#x2F;sinatra-1.
3650: 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 3.5&#x2F;lib&#x2
3660: 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 F;sinatra&#x2F;b
3670: 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e ase.rb</code> in
3680: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3690: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62  <code><strong>b
36a0: 6c 6f 63 6b 20 69 6e 20 70 72 6f 63 65 73 73 5f lock in process_
36b0: 72 6f 75 74 65 3c 2f 73 74 72 6f 6e 67 3e 3c 2f route</strong></
36c0: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
36d0: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
36e0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
36f0: 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e code framework">
3700: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
3710: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
3720: 6c 20 73 74 61 72 74 3d 22 38 39 30 22 0a 20 20 l start="890".  
3730: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3740: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3750: 78 74 22 20 69 64 3d 22 70 72 65 2d 31 30 22 0a xt" id="pre-10".
3760: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3770: 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c   onclick="toggl
3780: 65 28 31 30 29 3b 22 3e 0a 20 20 20 20 20 20 20 e(10);">.       
3790: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
37a0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
37b0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
37c0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
37d0: 20 20 20 69 66 20 76 61 6c 75 65 73 2e 61 6e 79    if values.any
37e0: 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ?.</code></li>. 
37f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3800: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3810: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
3820: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3830: 64 65 3e 20 20 20 20 20 20 20 20 6f 72 69 67 69 de>        origi
3840: 6e 61 6c 2c 20 40 70 61 72 61 6d 73 20 3d 20 70 nal, @params = p
3850: 61 72 61 6d 73 2c 20 70 61 72 61 6d 73 2e 6d 65 arams, params.me
3860: 72 67 65 28 26 23 78 32 37 3b 73 70 6c 61 74 26 rge(&#x27;splat&
3870: 23 78 32 37 3b 20 3d 26 67 74 3b 20 5b 5d 2c 20 #x27; =&gt; [], 
3880: 26 23 78 32 37 3b 63 61 70 74 75 72 65 73 26 23 &#x27;captures&#
3890: 78 32 37 3b 20 3d 26 67 74 3b 20 76 61 6c 75 65 x27; =&gt; value
38a0: 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a s).</code></li>.
38b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
38c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
38d0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
38e0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
38f0: 6f 64 65 3e 20 20 20 20 20 20 20 20 6b 65 79 73 ode>        keys
3900: 2e 7a 69 70 28 76 61 6c 75 65 73 29 20 7b 20 7c .zip(values) { |
3910: 6b 2c 76 7c 20 41 72 72 61 79 20 3d 3d 3d 20 40 k,v| Array === @
3920: 70 61 72 61 6d 73 5b 6b 5d 20 3f 20 40 70 61 72 params[k] ? @par
3930: 61 6d 73 5b 6b 5d 20 26 6c 74 3b 26 6c 74 3b 20 ams[k] &lt;&lt; 
3940: 76 20 3a 20 40 70 61 72 61 6d 73 5b 6b 5d 20 3d v : @params[k] =
3950: 20 76 20 69 66 20 76 20 7d 0a 3c 2f 63 6f 64 65  v if v }.</code
3960: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3970: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3980: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3990: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
39a0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
39b0: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
39c0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
39d0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
39e0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
39f0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
3a00: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
3a10: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
3a20: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3a30: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3a40: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3a50: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 63 61 "><code>      ca
3a60: 74 63 68 28 3a 70 61 73 73 29 20 64 6f 0a 3c 2f tch(:pass) do.</
3a70: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3a80: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3a90: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3aa0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3ab0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3ac0: 20 20 20 20 20 20 20 63 6f 6e 64 69 74 69 6f 6e        condition
3ad0: 73 2e 65 61 63 68 20 7b 20 7c 63 7c 20 74 68 72 s.each { |c| thr
3ae0: 6f 77 20 3a 70 61 73 73 20 69 66 20 63 2e 62 69 ow :pass if c.bi
3af0: 6e 64 28 73 65 6c 66 29 2e 63 61 6c 6c 20 3d 3d nd(self).call ==
3b00: 20 66 61 6c 73 65 20 7d 0a 3c 2f 63 6f 64 65 3e  false }.</code>
3b10: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3b20: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3b30: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
3b40: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
3b50: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
3b60: 72 74 3d 22 38 39 37 22 20 63 6c 61 73 73 3d 22 rt="897" class="
3b70: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 31 30 22 context" id="10"
3b80: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3b90: 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67    onclick="togg
3ba0: 6c 65 28 31 30 29 3b 22 3e 0a 20 20 20 20 20 20 le(10);">.      
3bb0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3bc0: 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e ass="context-lin
3bd0: 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 31 e" id="context-1
3be0: 30 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 0"><code>       
3bf0: 20 62 6c 6f 63 6b 20 3f 20 62 6c 6f 63 6b 5b 73  block ? block[s
3c00: 65 6c 66 2c 20 76 61 6c 75 65 73 5d 20 3a 20 79 elf, values] : y
3c10: 69 65 6c 64 28 73 65 6c 66 2c 20 76 61 6c 75 65 ield(self, value
3c20: 73 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 s)</code></li>. 
3c30: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
3c40: 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 l>..            
3c50: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3c60: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38 39 38 22  <ol start="898"
3c70: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3c80: 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 text".          
3c90: 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74         id="post
3ca0: 2d 31 30 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f -10" onclick="to
3cb0: 67 67 6c 65 28 31 30 29 3b 22 3e 0a 20 20 20 20 ggle(10);">.    
3cc0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3cd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3ce0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3cf0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3d00: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
3d10: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3d20: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3d30: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3d40: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
3d50: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
3d60: 20 65 6e 73 75 72 65 0a 3c 2f 63 6f 64 65 3e 3c  ensure.</code><
3d70: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3d80: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3d90: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3da0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
3db0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
3dc0: 40 70 61 72 61 6d 73 20 3d 20 6f 72 69 67 69 6e @params = origin
3dd0: 61 6c 20 69 66 20 6f 72 69 67 69 6e 61 6c 0a 3c al if original.<
3de0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3df0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3e00: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3e10: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3e20: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3e30: 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e >    end.</code>
3e40: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3e50: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3e60: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3e70: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
3e80: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
3e90: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3ea0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3eb0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3ec0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
3ed0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
3ee0: 20 20 23 20 4e 6f 20 6d 61 74 63 68 69 6e 67 20   # No matching 
3ef0: 72 6f 75 74 65 20 77 61 73 20 66 6f 75 6e 64 20 route was found 
3f00: 6f 72 20 61 6c 6c 20 72 6f 75 74 65 73 20 70 61 or all routes pa
3f10: 73 73 65 64 2e 20 54 68 65 20 64 65 66 61 75 6c ssed. The defaul
3f20: 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 t.</code></li>. 
3f30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3f40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3f50: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
3f60: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3f70: 6f 64 65 3e 20 20 20 20 23 20 69 6d 70 6c 65 6d ode>    # implem
3f80: 65 6e 74 61 74 69 6f 6e 20 69 73 20 74 6f 20 66 entation is to f
3f90: 6f 72 77 61 72 64 20 74 68 65 20 72 65 71 75 65 orward the reque
3fa0: 73 74 20 64 6f 77 6e 73 74 72 65 61 6d 20 77 68 st downstream wh
3fb0: 65 6e 20 72 75 6e 6e 69 6e 67 0a 3c 2f 63 6f 64 en running.</cod
3fc0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3fd0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3fe0: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
3ff0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
<= Recv data, 16384 bytes (0x4000)
0000: 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63           <div c
0010: 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 lass="clear"></d
0020: 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 iv>.            
0030: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
0040: 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20  ..        .    
0050: 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20   .          .. 
0060: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0070: 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f lass="frame-info
0080: 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20  framework">.   
0090: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
00a0: 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 >&#x2F;Users&#x2
00b0: 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 F;kareemgrant&#x
00c0: 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 2F;.rvm&#x2F;gem
00d0: 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e s&#x2F;ruby-1.9.
00e0: 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 3-p194@traffic_s
00f0: 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 py&#x2F;gems&#x2
0100: 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 F;sinatra-1.3.5&
0110: 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 #x2F;lib&#x2F;si
0120: 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e natra&#x2F;base.
0130: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
0140: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
0150: 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 74 63 68 de><strong>catch
0160: 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e </strong></code>
0170: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
0180: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 i>..            
0190: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 <li class="code 
01a0: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
01b0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
01c0: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
01d0: 72 74 3d 22 38 38 38 22 0a 20 20 20 20 20 20 20 rt="888".       
01e0: 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73            class
01f0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 ="pre-context" i
0200: 64 3d 22 70 72 65 2d 31 31 22 0a 20 20 20 20 20 d="pre-11".     
0210: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
0220: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 31 29 lick="toggle(11)
0230: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
0240: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0250: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0260: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
0270: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 76 61 "><code>      va
0280: 6c 75 65 73 20 2b 3d 20 6d 61 74 63 68 2e 63 61 lues += match.ca
0290: 70 74 75 72 65 73 2e 74 6f 5f 61 2e 6d 61 70 20 ptures.to_a.map 
02a0: 7b 20 7c 76 7c 20 66 6f 72 63 65 5f 65 6e 63 6f { |v| force_enco
02b0: 64 69 6e 67 20 55 52 49 2e 64 65 63 6f 64 65 5f ding URI.decode_
02c0: 77 77 77 5f 66 6f 72 6d 5f 63 6f 6d 70 6f 6e 65 www_form_compone
02d0: 6e 74 28 76 29 20 69 66 20 76 20 7d 0a 3c 2f 63 nt(v) if v }.</c
02e0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
02f0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0300: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0310: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
0320: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
0330: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0340: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0350: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0360: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
0370: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
0380: 20 20 20 20 20 20 69 66 20 76 61 6c 75 65 73 2e       if values.
0390: 61 6e 79 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 any?.</code></li
03a0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
03b0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
03c0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
03d0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
03e0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 6f 72 <code>        or
03f0: 69 67 69 6e 61 6c 2c 20 40 70 61 72 61 6d 73 20 iginal, @params 
0400: 3d 20 70 61 72 61 6d 73 2c 20 70 61 72 61 6d 73 = params, params
0410: 2e 6d 65 72 67 65 28 26 23 78 32 37 3b 73 70 6c .merge(&#x27;spl
0420: 61 74 26 23 78 32 37 3b 20 3d 26 67 74 3b 20 5b at&#x27; =&gt; [
0430: 5d 2c 20 26 23 78 32 37 3b 63 61 70 74 75 72 65 ], &#x27;capture
0440: 73 26 23 78 32 37 3b 20 3d 26 67 74 3b 20 76 61 s&#x27; =&gt; va
0450: 6c 75 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c lues).</code></l
0460: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0470: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0480: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0490: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
04a0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 6b ><code>        k
04b0: 65 79 73 2e 7a 69 70 28 76 61 6c 75 65 73 29 20 eys.zip(values) 
04c0: 7b 20 7c 6b 2c 76 7c 20 41 72 72 61 79 20 3d 3d { |k,v| Array ==
04d0: 3d 20 40 70 61 72 61 6d 73 5b 6b 5d 20 3f 20 40 = @params[k] ? @
04e0: 70 61 72 61 6d 73 5b 6b 5d 20 26 6c 74 3b 26 6c params[k] &lt;&l
04f0: 74 3b 20 76 20 3a 20 40 70 61 72 61 6d 73 5b 6b t; v : @params[k
0500: 5d 20 3d 20 76 20 69 66 20 76 20 7d 0a 3c 2f 63 ] = v if v }.</c
0510: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0520: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0530: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0540: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
0550: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0560: 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c     end.</code><
0570: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0580: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0590: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
05a0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
05b0: 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 e"><code>.</code
05c0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
05d0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
05e0: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
05f0: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
0600: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
0610: 61 72 74 3d 22 38 39 35 22 20 63 6c 61 73 73 3d art="895" class=
0620: 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 31 31 "context" id="11
0630: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
0640: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
0650: 67 6c 65 28 31 31 29 3b 22 3e 0a 20 20 20 20 20 gle(11);">.     
0660: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0670: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 lass="context-li
0680: 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d ne" id="context-
0690: 31 31 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 11"><code>      
06a0: 63 61 74 63 68 28 3a 70 61 73 73 29 20 64 6f 3c catch(:pass) do<
06b0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
06c0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
06d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
06e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
06f0: 6c 20 73 74 61 72 74 3d 22 38 39 36 22 20 63 6c l start="896" cl
0700: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0710: 74 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 t".             
0720: 20 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 31 31      id="post-11
0730: 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c " onclick="toggl
0740: 65 28 31 31 29 3b 22 3e 0a 20 20 20 20 20 20 20 e(11);">.       
0750: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0760: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0770: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0780: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0790: 20 20 20 20 20 20 63 6f 6e 64 69 74 69 6f 6e 73       conditions
07a0: 2e 65 61 63 68 20 7b 20 7c 63 7c 20 74 68 72 6f .each { |c| thro
07b0: 77 20 3a 70 61 73 73 20 69 66 20 63 2e 62 69 6e w :pass if c.bin
07c0: 64 28 73 65 6c 66 29 2e 63 61 6c 6c 20 3d 3d 20 d(self).call == 
07d0: 66 61 6c 73 65 20 7d 0a 3c 2f 63 6f 64 65 3e 3c false }.</code><
07e0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
07f0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0800: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0810: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
0820: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
0830: 20 20 62 6c 6f 63 6b 20 3f 20 62 6c 6f 63 6b 5b   block ? block[
0840: 73 65 6c 66 2c 20 76 61 6c 75 65 73 5d 20 3a 20 self, values] : 
0850: 79 69 65 6c 64 28 73 65 6c 66 2c 20 76 61 6c 75 yield(self, valu
0860: 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e es).</code></li>
0870: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0880: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0890: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
08a0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
08b0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a <code>      end.
08c0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
08d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
08e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
08f0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
0900: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0910: 65 3e 20 20 20 20 65 6e 73 75 72 65 0a 3c 2f 63 e>    ensure.</c
0920: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0930: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0940: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0950: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
0960: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0970: 20 20 20 20 20 40 70 61 72 61 6d 73 20 3d 20 6f      @params = o
0980: 72 69 67 69 6e 61 6c 20 69 66 20 6f 72 69 67 69 riginal if origi
0990: 6e 61 6c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e nal.</code></li>
09a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
09b0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
09c0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
09d0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
09e0: 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f <code>    end.</
09f0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0a00: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0a10: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0a20: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
0a30: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
0a40: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0a50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0a60: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
0a70: 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 l>.             
0a80: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0a90: 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 <div class="clea
0aa0: 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 r"></div>.      
0ab0: 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20       </li>..   
0ac0: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
0ad0: 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 20  .      .       
0ae0: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
0af0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d  <li class="fram
0b00: 65 2d 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b e-info framework
0b10: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
0b20: 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65  <code>&#x2F;Use
0b30: 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 rs&#x2F;kareemgr
0b40: 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 ant&#x2F;.rvm&#x
0b50: 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 2F;gems&#x2F;rub
0b60: 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 y-1.9.3-p194@tra
0b70: 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 ffic_spy&#x2F;ge
0b80: 6d 73 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d ms&#x2F;sinatra-
0b90: 31 2e 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 1.3.5&#x2F;lib&#
0ba0: 78 32 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 x2F;sinatra&#x2F
0bb0: 3b 62 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 ;base.rb</code> 
0bc0: 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 in.             
0bd0: 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67    <code><strong
0be0: 3e 70 72 6f 63 65 73 73 5f 72 6f 75 74 65 3c 2f >process_route</
0bf0: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
0c00: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
0c10: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
0c20: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 i class="code fr
0c30: 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 amework">.      
0c40: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0c50: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
0c60: 3d 22 38 38 38 22 0a 20 20 20 20 20 20 20 20 20 ="888".         
0c70: 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22          class="
0c80: 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d pre-context" id=
0c90: 22 70 72 65 2d 31 32 22 0a 20 20 20 20 20 20 20 "pre-12".       
0ca0: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
0cb0: 63 6b 3d 22 74 6f 67 67 6c 65 28 31 32 29 3b 22 ck="toggle(12);"
0cc0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0cd0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0ce0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
0cf0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
0d00: 3c 63 6f 64 65 3e 20 20 20 20 20 20 76 61 6c 75 <code>      valu
0d10: 65 73 20 2b 3d 20 6d 61 74 63 68 2e 63 61 70 74 es += match.capt
0d20: 75 72 65 73 2e 74 6f 5f 61 2e 6d 61 70 20 7b 20 ures.to_a.map { 
0d30: 7c 76 7c 20 66 6f 72 63 65 5f 65 6e 63 6f 64 69 |v| force_encodi
0d40: 6e 67 20 55 52 49 2e 64 65 63 6f 64 65 5f 77 77 ng URI.decode_ww
0d50: 77 5f 66 6f 72 6d 5f 63 6f 6d 70 6f 6e 65 6e 74 w_form_component
0d60: 28 76 29 20 69 66 20 76 20 7d 0a 3c 2f 63 6f 64 (v) if v }.</cod
0d70: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0d80: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0d90: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0da0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
0db0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
0dc0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0dd0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0de0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0df0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
0e00: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0e10: 20 20 20 20 69 66 20 76 61 6c 75 65 73 2e 61 6e     if values.an
0e20: 79 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a y?.</code></li>.
0e30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0e40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0e50: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0e60: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0e70: 6f 64 65 3e 20 20 20 20 20 20 20 20 6f 72 69 67 ode>        orig
0e80: 69 6e 61 6c 2c 20 40 70 61 72 61 6d 73 20 3d 20 inal, @params = 
0e90: 70 61 72 61 6d 73 2c 20 70 61 72 61 6d 73 2e 6d params, params.m
0ea0: 65 72 67 65 28 26 23 78 32 37 3b 73 70 6c 61 74 erge(&#x27;splat
0eb0: 26 23 78 32 37 3b 20 3d 26 67 74 3b 20 5b 5d 2c &#x27; =&gt; [],
0ec0: 20 26 23 78 32 37 3b 63 61 70 74 75 72 65 73 26  &#x27;captures&
0ed0: 23 78 32 37 3b 20 3d 26 67 74 3b 20 76 61 6c 75 #x27; =&gt; valu
0ee0: 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e es).</code></li>
0ef0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0f00: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0f10: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0f20: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0f30: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 6b 65 79 code>        key
0f40: 73 2e 7a 69 70 28 76 61 6c 75 65 73 29 20 7b 20 s.zip(values) { 
0f50: 7c 6b 2c 76 7c 20 41 72 72 61 79 20 3d 3d 3d 20 |k,v| Array === 
0f60: 40 70 61 72 61 6d 73 5b 6b 5d 20 3f 20 40 70 61 @params[k] ? @pa
0f70: 72 61 6d 73 5b 6b 5d 20 26 6c 74 3b 26 6c 74 3b rams[k] &lt;&lt;
0f80: 20 76 20 3a 20 40 70 61 72 61 6d 73 5b 6b 5d 20  v : @params[k] 
0f90: 3d 20 76 20 69 66 20 76 20 7d 0a 3c 2f 63 6f 64 = v if v }.</cod
0fa0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0fb0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0fc0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0fd0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
0fe0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
0ff0: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
1000: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1010: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1020: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1030: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
1040: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
1050: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1060: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1070: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
1080: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
1090: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
10a0: 74 3d 22 38 39 35 22 20 63 6c 61 73 73 3d 22 63 t="895" class="c
10b0: 6f 6e 74 65 78 74 22 20 69 64 3d 22 31 32 22 0a ontext" id="12".
10c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
10d0: 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c   onclick="toggl
10e0: 65 28 31 32 29 3b 22 3e 0a 20 20 20 20 20 20 20 e(12);">.       
10f0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1100: 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ss="context-line
1110: 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 31 32 " id="context-12
1120: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 63 61 "><code>      ca
1130: 74 63 68 28 3a 70 61 73 73 29 20 64 6f 3c 2f 63 tch(:pass) do</c
1140: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1150: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20         </ol>.. 
1160: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1170: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
1180: 73 74 61 72 74 3d 22 38 39 36 22 20 63 6c 61 73 start="896" clas
1190: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 s="post-context"
11a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
11b0: 20 20 20 69 64 3d 22 70 6f 73 74 2d 31 32 22 20    id="post-12" 
11c0: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
11d0: 31 32 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 12);">.         
11e0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
11f0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1200: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1210: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1220: 20 20 20 20 63 6f 6e 64 69 74 69 6f 6e 73 2e 65     conditions.e
1230: 61 63 68 20 7b 20 7c 63 7c 20 74 68 72 6f 77 20 ach { |c| throw 
1240: 3a 70 61 73 73 20 69 66 20 63 2e 62 69 6e 64 28 :pass if c.bind(
1250: 73 65 6c 66 29 2e 63 61 6c 6c 20 3d 3d 20 66 61 self).call == fa
1260: 6c 73 65 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c lse }.</code></l
1270: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1280: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1290: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
12a0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
12b0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
12c0: 62 6c 6f 63 6b 20 3f 20 62 6c 6f 63 6b 5b 73 65 block ? block[se
12d0: 6c 66 2c 20 76 61 6c 75 65 73 5d 20 3a 20 79 69 lf, values] : yi
12e0: 65 6c 64 28 73 65 6c 66 2c 20 76 61 6c 75 65 73 eld(self, values
12f0: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
1300: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1310: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1320: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
1330: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1340: 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f ode>      end.</
1350: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1360: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1370: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1380: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1390: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
13a0: 20 20 20 20 65 6e 73 75 72 65 0a 3c 2f 63 6f 64     ensure.</cod
13b0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
13c0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
13d0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
13e0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
13f0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1400: 20 20 20 40 70 61 72 61 6d 73 20 3d 20 6f 72 69    @params = ori
1410: 67 69 6e 61 6c 20 69 66 20 6f 72 69 67 69 6e 61 ginal if origina
1420: 6c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 l.</code></li>. 
1430: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1440: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1450: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
1460: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1470: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
1480: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1490: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
14a0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
14b0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
14c0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
14d0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
14e0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
14f0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
1500: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
1510: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
1520: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
1530: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
1540: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
1550: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
1560: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1570: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
1580: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
1590: 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e info framework">
15a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
15b0: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
15c0: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
15d0: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
15e0: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
15f0: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
1600: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
1610: 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e &#x2F;sinatra-1.
1620: 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 3.5&#x2F;lib&#x2
1630: 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 F;sinatra&#x2F;b
1640: 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e ase.rb</code> in
1650: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1660: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62  <code><strong>b
1670: 6c 6f 63 6b 20 69 6e 20 72 6f 75 74 65 21 3c 2f lock in route!</
1680: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
1690: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
16a0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
16b0: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 i class="code fr
16c0: 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 amework">.      
16d0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
16e0: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
16f0: 3d 22 38 35 32 22 0a 20 20 20 20 20 20 20 20 20 ="852".         
1700: 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22          class="
1710: 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d pre-context" id=
1720: 22 70 72 65 2d 31 33 22 0a 20 20 20 20 20 20 20 "pre-13".       
1730: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
1740: 63 6b 3d 22 74 6f 67 67 6c 65 28 31 33 29 3b 22 ck="toggle(13);"
1750: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1760: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1770: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1780: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1790: 3c 63 6f 64 65 3e 20 20 20 20 20 20 62 61 73 65 <code>      base
17a0: 2e 66 69 6c 74 65 72 73 5b 74 79 70 65 5d 2e 65 .filters[type].e
17b0: 61 63 68 20 7b 20 7c 61 72 67 73 7c 20 70 72 6f ach { |args| pro
17c0: 63 65 73 73 5f 72 6f 75 74 65 28 2a 61 72 67 73 cess_route(*args
17d0: 29 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ) }.</code></li>
17e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
17f0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1800: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
1810: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1820: 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 code>    end.</c
1830: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1840: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1850: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1860: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1870: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1880: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1890: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
18a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
18b0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
18c0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
18d0: 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74 65 73     # Run routes
18e0: 20 64 65 66 69 6e 65 64 20 6f 6e 20 74 68 65 20  defined on the 
18f0: 63 6c 61 73 73 20 61 6e 64 20 61 6c 6c 20 73 75 class and all su
1900: 70 65 72 63 6c 61 73 73 65 73 2e 0a 3c 2f 63 6f perclasses..</co
1910: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1920: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1930: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1940: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1950: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1960: 20 64 65 66 20 72 6f 75 74 65 21 28 62 61 73 65  def route!(base
1970: 20 3d 20 73 65 74 74 69 6e 67 73 2c 20 70 61 73  = settings, pas
1980: 73 5f 62 6c 6f 63 6b 3d 6e 69 6c 29 0a 3c 2f 63 s_block=nil).</c
1990: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
19a0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
19b0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
19c0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
19d0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
19e0: 20 20 20 20 69 66 20 72 6f 75 74 65 73 20 3d 20     if routes = 
19f0: 62 61 73 65 2e 72 6f 75 74 65 73 5b 40 72 65 71 base.routes[@req
1a00: 75 65 73 74 2e 72 65 71 75 65 73 74 5f 6d 65 74 uest.request_met
1a10: 68 6f 64 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 hod].</code></li
1a20: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1a30: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1a40: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1a50: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1a60: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 72 6f <code>        ro
1a70: 75 74 65 73 2e 65 61 63 68 20 64 6f 20 7c 70 61 utes.each do |pa
1a80: 74 74 65 72 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e ttern, keys, con
1a90: 64 69 74 69 6f 6e 73 2c 20 62 6c 6f 63 6b 7c 0a ditions, block|.
1aa0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1ab0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1ac0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
1ad0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1ae0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
1af0: 3c 6f 6c 20 73 74 61 72 74 3d 22 38 35 39 22 20 <ol start="859" 
1b00: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 class="context" 
1b10: 69 64 3d 22 31 33 22 0a 20 20 20 20 20 20 20 20 id="13".        
1b20: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
1b30: 6b 3d 22 74 6f 67 67 6c 65 28 31 33 29 3b 22 3e k="toggle(13);">
1b40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1b50: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74  <li class="cont
1b60: 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f ext-line" id="co
1b70: 6e 74 65 78 74 2d 31 33 22 3e 3c 63 6f 64 65 3e ntext-13"><code>
1b80: 20 20 20 20 20 20 20 20 20 20 70 61 73 73 5f 62           pass_b
1b90: 6c 6f 63 6b 20 3d 20 70 72 6f 63 65 73 73 5f 72 lock = process_r
1ba0: 6f 75 74 65 28 70 61 74 74 65 72 6e 2c 20 6b 65 oute(pattern, ke
1bb0: 79 73 2c 20 63 6f 6e 64 69 74 69 6f 6e 73 29 20 ys, conditions) 
1bc0: 64 6f 20 7c 2a 61 72 67 73 7c 3c 2f 63 6f 64 65 do |*args|</code
1bd0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1be0: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20      </ol>..    
1bf0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1c00: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
1c10: 72 74 3d 22 38 36 30 22 20 63 6c 61 73 73 3d 22 rt="860" class="
1c20: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 post-context".  
1c30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1c40: 69 64 3d 22 70 6f 73 74 2d 31 33 22 20 6f 6e 63 id="post-13" onc
1c50: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 33 29 lick="toggle(13)
1c60: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
1c70: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1c80: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1c90: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
1ca0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
1cb0: 20 20 20 20 20 72 6f 75 74 65 5f 65 76 61 6c 20      route_eval 
1cc0: 7b 20 62 6c 6f 63 6b 5b 2a 61 72 67 73 5d 20 7d { block[*args] }
1cd0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1ce0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1cf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1d00: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1d10: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1d20: 64 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 de>          end
1d30: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1d40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1d50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1d60: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1d70: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1d80: 64 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c de>        end.<
1d90: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1da0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1db0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1dc0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
1dd0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1de0: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
1df0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1e00: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1e10: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1e20: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
1e30: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
1e40: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1e50: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1e60: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1e70: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1e80: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1e90: 20 20 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74       # Run rout
1ea0: 65 73 20 64 65 66 69 6e 65 64 20 69 6e 20 73 75 es defined in su
1eb0: 70 65 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f 64 65 perclass..</code
1ec0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1ed0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1ee0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1ef0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1f00: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1f10: 20 20 69 66 20 62 61 73 65 2e 73 75 70 65 72 63   if base.superc
1f20: 6c 61 73 73 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f lass.respond_to?
1f30: 28 3a 72 6f 75 74 65 73 29 0a 3c 2f 63 6f 64 65 (:routes).</code
1f40: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1f50: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1f60: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
1f70: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1f80: 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c          <div cl
1f90: 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 ass="clear"></di
1fa0: 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c v>.            <
1fb0: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
1fc0: 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 ..        .     
1fd0: 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20  .          ..  
1fe0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1ff0: 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 ass="frame-info 
2000: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
2010: 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e           <code>
2020: 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 &#x2F;Users&#x2F
2030: 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 ;kareemgrant&#x2
2040: 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 F;.rvm&#x2F;gems
2050: 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 &#x2F;ruby-1.9.3
2060: 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 -p194@traffic_sp
2070: 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 y&#x2F;gems&#x2F
2080: 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 ;sinatra-1.3.5&#
2090: 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e x2F;lib&#x2F;sin
20a0: 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e 72 atra&#x2F;base.r
20b0: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
20c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
20d0: 65 3e 3c 73 74 72 6f 6e 67 3e 65 61 63 68 3c 2f e><strong>each</
20e0: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
20f0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
2100: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
2110: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 i class="code fr
2120: 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 amework">.      
2130: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2140: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
2150: 3d 22 38 35 31 22 0a 20 20 20 20 20 20 20 20 20 ="851".         
2160: 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22          class="
2170: 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d pre-context" id=
2180: 22 70 72 65 2d 31 34 22 0a 20 20 20 20 20 20 20 "pre-14".       
2190: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
21a0: 63 6b 3d 22 74 6f 67 67 6c 65 28 31 34 29 3b 22 ck="toggle(14);"
21b0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
21c0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
21d0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
21e0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
21f0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 66 69 6c 74 <code>      filt
2200: 65 72 21 20 74 79 70 65 2c 20 62 61 73 65 2e 73 er! type, base.s
2210: 75 70 65 72 63 6c 61 73 73 20 69 66 20 62 61 73 uperclass if bas
2220: 65 2e 73 75 70 65 72 63 6c 61 73 73 2e 72 65 73 e.superclass.res
2230: 70 6f 6e 64 5f 74 6f 3f 28 3a 66 69 6c 74 65 72 pond_to?(:filter
2240: 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a s).</code></li>.
2250: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2260: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2270: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2280: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2290: 6f 64 65 3e 20 20 20 20 20 20 62 61 73 65 2e 66 ode>      base.f
22a0: 69 6c 74 65 72 73 5b 74 79 70 65 5d 2e 65 61 63 ilters[type].eac
22b0: 68 20 7b 20 7c 61 72 67 73 7c 20 70 72 6f 63 65 h { |args| proce
22c0: 73 73 5f 72 6f 75 74 65 28 2a 61 72 67 73 29 20 ss_route(*args) 
22d0: 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 }.</code></li>. 
22e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
22f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2300: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
2310: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
2320: 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 de>    end.</cod
2330: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2340: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2350: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2360: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2370: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
2380: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2390: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
23a0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
23b0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
23c0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
23d0: 20 20 23 20 52 75 6e 20 72 6f 75 74 65 73 20 64   # Run routes d
23e0: 65 66 69 6e 65 64 20 6f 6e 20 74 68 65 20 63 6c efined on the cl
23f0: 61 73 73 20 61 6e 64 20 61 6c 6c 20 73 75 70 65 ass and all supe
2400: 72 63 6c 61 73 73 65 73 2e 0a 3c 2f 63 6f 64 65 rclasses..</code
2410: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2420: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2430: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2440: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2450: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 ine"><code>    d
2460: 65 66 20 72 6f 75 74 65 21 28 62 61 73 65 20 3d ef route!(base =
2470: 20 73 65 74 74 69 6e 67 73 2c 20 70 61 73 73 5f  settings, pass_
2480: 62 6c 6f 63 6b 3d 6e 69 6c 29 0a 3c 2f 63 6f 64 block=nil).</cod
2490: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
24a0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
24b0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
24c0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
24d0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
24e0: 20 20 69 66 20 72 6f 75 74 65 73 20 3d 20 62 61   if routes = ba
24f0: 73 65 2e 72 6f 75 74 65 73 5b 40 72 65 71 75 65 se.routes[@reque
2500: 73 74 2e 72 65 71 75 65 73 74 5f 6d 65 74 68 6f st.request_metho
2510: 64 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a d].</code></li>.
2520: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2530: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
2540: 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /ol>.           
2550: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
2560: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38 35    <ol start="85
2570: 38 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 8" class="contex
2580: 74 22 20 69 64 3d 22 31 34 22 0a 20 20 20 20 20 t" id="14".     
2590: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
25a0: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 34 29 lick="toggle(14)
25b0: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
25c0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63     <li class="c
25d0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d ontext-line" id=
25e0: 22 63 6f 6e 74 65 78 74 2d 31 34 22 3e 3c 63 6f "context-14"><co
25f0: 64 65 3e 20 20 20 20 20 20 20 20 72 6f 75 74 65 de>        route
2600: 73 2e 65 61 63 68 20 64 6f 20 7c 70 61 74 74 65 s.each do |patte
2610: 72 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e 64 69 74 rn, keys, condit
2620: 69 6f 6e 73 2c 20 62 6c 6f 63 6b 7c 3c 2f 63 6f ions, block|</co
2630: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2640: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
2650: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2660: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
2670: 74 61 72 74 3d 22 38 35 39 22 20 63 6c 61 73 73 tart="859" class
2680: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a ="post-context".
2690: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
26a0: 20 20 69 64 3d 22 70 6f 73 74 2d 31 34 22 20 6f   id="post-14" o
26b0: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 nclick="toggle(1
26c0: 34 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 4);">.          
26d0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
26e0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
26f0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2700: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2710: 20 20 20 20 20 70 61 73 73 5f 62 6c 6f 63 6b 20      pass_block 
2720: 3d 20 70 72 6f 63 65 73 73 5f 72 6f 75 74 65 28 = process_route(
2730: 70 61 74 74 65 72 6e 2c 20 6b 65 79 73 2c 20 63 pattern, keys, c
2740: 6f 6e 64 69 74 69 6f 6e 73 29 20 64 6f 20 7c 2a onditions) do |*
2750: 61 72 67 73 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c args|.</code></l
2760: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2770: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2780: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2790: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
27a0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
27b0: 20 20 20 20 72 6f 75 74 65 5f 65 76 61 6c 20 7b     route_eval {
27c0: 20 62 6c 6f 63 6b 5b 2a 61 72 67 73 5d 20 7d 0a  block[*args] }.
27d0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
27e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
27f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2800: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
2810: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2820: 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 0a e>          end.
2830: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2840: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2850: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2860: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
2870: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2880: 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c 2f e>        end.</
2890: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
28a0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
28b0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
28c0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
28d0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
28e0: 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65       end.</code
28f0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2900: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2910: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2920: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
2930: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
2940: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2950: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2960: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2970: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2980: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2990: 20 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74 65      # Run route
29a0: 73 20 64 65 66 69 6e 65 64 20 69 6e 20 73 75 70 s defined in sup
29b0: 65 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f 64 65 3e erclass..</code>
29c0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
29d0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
29e0: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
29f0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2a00: 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61         <div cla
2a10: 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 ss="clear"></div
2a20: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f >.            </
2a30: 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a li>..          .
2a40: 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 .        .      
2a50: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
2a60: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2a70: 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 66 ss="frame-info f
2a80: 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 ramework">.     
2a90: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
2aa0: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
2ab0: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
2ac0: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
2ad0: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
2ae0: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
2af0: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
2b00: 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 78 sinatra-1.3.5&#x
2b10: 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e 61 2F;lib&#x2F;sina
2b20: 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e 72 62 tra&#x2F;base.rb
2b30: 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 </code> in.     
2b40: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
2b50: 3e 3c 73 74 72 6f 6e 67 3e 72 6f 75 74 65 21 3c ><strong>route!<
2b60: 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a /strong></code>.
2b70: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
2b80: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c >..            <
2b90: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 li class="code f
2ba0: 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 ramework">.     
2bb0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2bc0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
2bd0: 74 3d 22 38 35 31 22 0a 20 20 20 20 20 20 20 20 t="851".        
2be0: 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d           class=
2bf0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 "pre-context" id
2c00: 3d 22 70 72 65 2d 31 35 22 0a 20 20 20 20 20 20 ="pre-15".      
2c10: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
2c20: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 35 29 3b ick="toggle(15);
2c30: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
2c40: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2c50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2c60: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
2c70: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 66 69 6c ><code>      fil
2c80: 74 65 72 21 20 74 79 70 65 2c 20 62 61 73 65 2e ter! type, base.
2c90: 73 75 70 65 72 63 6c 61 73 73 20 69 66 20 62 61 superclass if ba
2ca0: 73 65 2e 73 75 70 65 72 63 6c 61 73 73 2e 72 65 se.superclass.re
2cb0: 73 70 6f 6e 64 5f 74 6f 3f 28 3a 66 69 6c 74 65 spond_to?(:filte
2cc0: 72 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e rs).</code></li>
2cd0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2ce0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2cf0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
2d00: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2d10: 63 6f 64 65 3e 20 20 20 20 20 20 62 61 73 65 2e code>      base.
2d20: 66 69 6c 74 65 72 73 5b 74 79 70 65 5d 2e 65 61 filters[type].ea
2d30: 63 68 20 7b 20 7c 61 72 67 73 7c 20 70 72 6f 63 ch { |args| proc
2d40: 65 73 73 5f 72 6f 75 74 65 28 2a 61 72 67 73 29 ess_route(*args)
2d50: 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a  }.</code></li>.
2d60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2d70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2d80: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2d90: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2da0: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
2db0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2dc0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2dd0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2de0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2df0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
2e00: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2e10: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2e20: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2e30: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2e40: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2e50: 20 20 20 23 20 52 75 6e 20 72 6f 75 74 65 73 20    # Run routes 
2e60: 64 65 66 69 6e 65 64 20 6f 6e 20 74 68 65 20 63 defined on the c
2e70: 6c 61 73 73 20 61 6e 64 20 61 6c 6c 20 73 75 70 lass and all sup
2e80: 65 72 63 6c 61 73 73 65 73 2e 0a 3c 2f 63 6f 64 erclasses..</cod
2e90: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2ea0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2eb0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2ec0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2ed0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
2ee0: 64 65 66 20 72 6f 75 74 65 21 28 62 61 73 65 20 def route!(base 
2ef0: 3d 20 73 65 74 74 69 6e 67 73 2c 20 70 61 73 73 = settings, pass
2f00: 5f 62 6c 6f 63 6b 3d 6e 69 6c 29 0a 3c 2f 63 6f _block=nil).</co
2f10: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2f20: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2f30: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2f40: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2f50: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2f60: 20 20 20 69 66 20 72 6f 75 74 65 73 20 3d 20 62    if routes = b
2f70: 61 73 65 2e 72 6f 75 74 65 73 5b 40 72 65 71 75 ase.routes[@requ
2f80: 65 73 74 2e 72 65 71 75 65 73 74 5f 6d 65 74 68 est.request_meth
2f90: 6f 64 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e od].</code></li>
2fa0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2fb0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2fc0: 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 </ol>.          
2fd0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
2fe0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 38     <ol start="8
2ff0: 35 38 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 58" class="conte
3000: 78 74 22 20 69 64 3d 22 31 35 22 0a 20 20 20 20 xt" id="15".    
3010: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e               on
3020: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 35 click="toggle(15
3030: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
3040: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3050: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 context-line" id
3060: 3d 22 63 6f 6e 74 65 78 74 2d 31 35 22 3e 3c 63 ="context-15"><c
3070: 6f 64 65 3e 20 20 20 20 20 20 20 20 72 6f 75 74 ode>        rout
3080: 65 73 2e 65 61 63 68 20 64 6f 20 7c 70 61 74 74 es.each do |patt
3090: 65 72 6e 2c 20 6b 65 79 73 2c 20 63 6f 6e 64 69 ern, keys, condi
30a0: 74 69 6f 6e 73 2c 20 62 6c 6f 63 6b 7c 3c 2f 63 tions, block|</c
30b0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
30c0: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20         </ol>.. 
30d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
30e0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
30f0: 73 74 61 72 74 3d 22 38 35 39 22 20 63 6c 61 73 start="859" clas
3100: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 s="post-context"
3110: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3120: 20 20 20 69 64 3d 22 70 6f 73 74 2d 31 35 22 20    id="post-15" 
3130: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
3140: 31 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 15);">.         
3150: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3160: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3170: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
3180: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3190: 20 20 20 20 20 20 70 61 73 73 5f 62 6c 6f 63 6b       pass_block
31a0: 20 3d 20 70 72 6f 63 65 73 73 5f 72 6f 75 74 65  = process_route
31b0: 28 70 61 74 74 65 72 6e 2c 20 6b 65 79 73 2c 20 (pattern, keys, 
31c0: 63 6f 6e 64 69 74 69 6f 6e 73 29 20 64 6f 20 7c conditions) do |
31d0: 2a 61 72 67 73 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f *args|.</code></
31e0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
31f0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3200: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3210: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
3220: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
3230: 20 20 20 20 20 72 6f 75 74 65 5f 65 76 61 6c 20      route_eval 
3240: 7b 20 62 6c 6f 63 6b 5b 2a 61 72 67 73 5d 20 7d { block[*args] }
3250: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3260: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3270: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3280: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
3290: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
32a0: 64 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 de>          end
32b0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
32c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
32d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
32e0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
32f0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3300: 64 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c de>        end.<
3310: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3320: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3330: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
3340: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3350: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3360: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
3370: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3380: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3390: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
33a0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
33b0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
33c0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
33d0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
33e0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
33f0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
3400: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3410: 20 20 20 20 20 20 23 20 52 75 6e 20 72 6f 75 74       # Run rout
3420: 65 73 20 64 65 66 69 6e 65 64 20 69 6e 20 73 75 es defined in su
3430: 70 65 72 63 6c 61 73 73 2e 0a 3c 2f 63 6f 64 65 perclass..</code
3440: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3450: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3460: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
3470: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3480: 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c          <div cl
3490: 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 ass="clear"></di
34a0: 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c v>.            <
34b0: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
34c0: 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 ..        .     
34d0: 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20  .          ..  
34e0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
34f0: 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 ass="frame-info 
3500: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
3510: 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e           <code>
3520: 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 &#x2F;Users&#x2F
3530: 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 ;kareemgrant&#x2
3540: 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 F;.rvm&#x2F;gems
3550: 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 &#x2F;ruby-1.9.3
3560: 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 -p194@traffic_sp
3570: 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 y&#x2F;gems&#x2F
3580: 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 ;sinatra-1.3.5&#
3590: 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e x2F;lib&#x2F;sin
35a0: 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e 72 atra&#x2F;base.r
35b0: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
35c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
35d0: 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f 63 6b 20 e><strong>block 
35e0: 69 6e 20 64 69 73 70 61 74 63 68 21 3c 2f 73 74 in dispatch!</st
35f0: 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 rong></code>.   
3600: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
3610: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3620: 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d class="code fram
3630: 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 ework">.        
3640: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3650: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
3660: 39 35 36 22 0a 20 20 20 20 20 20 20 20 20 20 20 956".           
3670: 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72        class="pr
3680: 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 e-context" id="p
3690: 72 65 2d 31 36 22 0a 20 20 20 20 20 20 20 20 20 re-16".         
36a0: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
36b0: 3d 22 74 6f 67 67 6c 65 28 31 36 29 3b 22 3e 0a ="toggle(16);">.
36c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
36d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
36e0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
36f0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3700: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
3710: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3720: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3730: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3740: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
3750: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
3760: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3770: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3780: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3790: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
37a0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
37b0: 20 20 20 23 20 44 69 73 70 61 74 63 68 20 61 20    # Dispatch a 
37c0: 72 65 71 75 65 73 74 20 77 69 74 68 20 65 72 72 request with err
37d0: 6f 72 20 68 61 6e 64 6c 69 6e 67 2e 0a 3c 2f 63 or handling..</c
37e0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
37f0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3800: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3810: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
3820: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
3830: 20 20 64 65 66 20 64 69 73 70 61 74 63 68 21 0a   def dispatch!.
3840: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3850: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3860: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3870: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
3880: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3890: 3e 20 20 20 20 20 20 69 6e 76 6f 6b 65 20 64 6f >      invoke do
38a0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
38b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
38c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
38d0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
38e0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
38f0: 65 3e 20 20 20 20 20 20 20 20 73 74 61 74 69 63 e>        static
3900: 21 20 69 66 20 73 65 74 74 69 6e 67 73 2e 73 74 ! if settings.st
3910: 61 74 69 63 3f 20 26 61 6d 70 3b 26 61 6d 70 3b atic? &amp;&amp;
3920: 20 28 72 65 71 75 65 73 74 2e 67 65 74 3f 20 7c  (request.get? |
3930: 7c 20 72 65 71 75 65 73 74 2e 68 65 61 64 3f 29 | request.head?)
3940: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3950: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3960: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3970: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3980: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3990: 65 3e 20 20 20 20 20 20 20 20 66 69 6c 74 65 72 e>        filter
39a0: 21 20 3a 62 65 66 6f 72 65 0a 3c 2f 63 6f 64 65 ! :before.</code
39b0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
39c0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
39d0: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
39e0: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
39f0: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
3a00: 61 72 74 3d 22 39 36 33 22 20 63 6c 61 73 73 3d art="963" class=
3a10: 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 31 36 "context" id="16
3a20: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
3a30: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
3a40: 67 6c 65 28 31 36 29 3b 22 3e 0a 20 20 20 20 20 gle(16);">.     
3a50: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3a60: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 lass="context-li
3a70: 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d ne" id="context-
3a80: 31 36 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 16"><code>      
3a90: 20 20 72 6f 75 74 65 21 3c 2f 63 6f 64 65 3e 3c   route!</code><
3aa0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3ab0: 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20    </ol>..      
3ac0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3ad0: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
3ae0: 3d 22 39 36 34 22 20 63 6c 61 73 73 3d 22 70 6f ="964" class="po
3af0: 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 st-context".    
3b00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64               id
3b10: 3d 22 70 6f 73 74 2d 31 36 22 20 6f 6e 63 6c 69 ="post-16" oncli
3b20: 63 6b 3d 22 74 6f 67 67 6c 65 28 31 36 29 3b 22 ck="toggle(16);"
3b30: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3b40: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3b50: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
3b60: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
3b70: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 ><code>      end
3b80: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3b90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3ba0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3bb0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
3bc0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3bd0: 64 65 3e 20 20 20 20 72 65 73 63 75 65 20 3a 3a de>    rescue ::
3be0: 45 78 63 65 70 74 69 6f 6e 20 3d 26 67 74 3b 20 Exception =&gt; 
3bf0: 62 6f 6f 6d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 boom.</code></li
3c00: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3c10: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3c20: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
3c30: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
3c40: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 69 6e 76 ><code>      inv
3c50: 6f 6b 65 20 7b 20 68 61 6e 64 6c 65 5f 65 78 63 oke { handle_exc
3c60: 65 70 74 69 6f 6e 21 28 62 6f 6f 6d 29 20 7d 0a eption!(boom) }.
3c70: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3c80: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3c90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3ca0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
3cb0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3cc0: 65 3e 20 20 20 20 65 6e 73 75 72 65 0a 3c 2f 63 e>    ensure.</c
3cd0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
3ce0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3cf0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3d00: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
3d10: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3d20: 20 20 20 20 20 66 69 6c 74 65 72 21 20 3a 61 66      filter! :af
3d30: 74 65 72 20 75 6e 6c 65 73 73 20 65 6e 76 5b 26 ter unless env[&
3d40: 23 78 32 37 3b 73 69 6e 61 74 72 61 2e 73 74 61 #x27;sinatra.sta
3d50: 74 69 63 5f 66 69 6c 65 26 23 78 32 37 3b 5d 0a tic_file&#x27;].
3d60: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3d70: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3d80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3d90: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
3da0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3db0: 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 e>    end.</code
3dc0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3dd0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3de0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3df0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
3e00: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
3e10: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
3e20: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3e30: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
3e40: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3e50: 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76             <div
3e60: 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c  class="clear"><
3e70: 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 /div>.          
3e80: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
3e90: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20    ..        .  
3ea0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a     .          .
3eb0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
3ec0: 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e  class="frame-in
3ed0: 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 fo framework">. 
3ee0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
3ef0: 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 de>&#x2F;Users&#
3f00: 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 x2F;kareemgrant&
3f10: 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 #x2F;.rvm&#x2F;g
3f20: 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e ems&#x2F;ruby-1.
3f30: 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 9.3-p194@traffic
3f40: 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 _spy&#x2F;gems&#
3f50: 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e x2F;sinatra-1.3.
3f60: 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 5&#x2F;lib&#x2F;
3f70: 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 sinatra&#x2F;bas
3f80: 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 e.rb</code> in. 
3f90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3fa0: 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f code><strong>blo
3fb0: 63 6b 20 69 6e 20 69 6e 76 6f 6b 65 3c 2f 73 74 ck in invoke</st
3fc0: 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 rong></code>.   
3fd0: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
3fe0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3ff0: 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d class="code fram
<= Recv data, 16384 bytes (0x4000)
0000: 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 ework">.        
0010: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0020: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
0030: 39 33 39 22 0a 20 20 20 20 20 20 20 20 20 20 20 939".           
0040: 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72        class="pr
0050: 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 e-context" id="p
0060: 72 65 2d 31 37 22 0a 20 20 20 20 20 20 20 20 20 re-17".         
0070: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
0080: 3d 22 74 6f 67 67 6c 65 28 31 37 29 3b 22 3e 0a ="toggle(17);">.
0090: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
00a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
00b0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
00c0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
00d0: 6f 64 65 3e 20 20 20 20 23 20 43 72 65 61 74 65 ode>    # Create
00e0: 73 20 61 20 48 61 73 68 20 77 69 74 68 20 69 6e s a Hash with in
00f0: 64 69 66 66 65 72 65 6e 74 20 61 63 63 65 73 73 different access
0100: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
0110: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0120: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0130: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0140: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0150: 64 65 3e 20 20 20 20 64 65 66 20 69 6e 64 69 66 de>    def indif
0160: 66 65 72 65 6e 74 5f 68 61 73 68 0a 3c 2f 63 6f ferent_hash.</co
0170: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0180: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0190: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
01a0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
01b0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
01c0: 20 20 20 48 61 73 68 2e 6e 65 77 20 7b 7c 68 61    Hash.new {|ha
01d0: 73 68 2c 6b 65 79 7c 20 68 61 73 68 5b 6b 65 79 sh,key| hash[key
01e0: 2e 74 6f 5f 73 5d 20 69 66 20 53 79 6d 62 6f 6c .to_s] if Symbol
01f0: 20 3d 3d 3d 20 6b 65 79 20 7d 0a 3c 2f 63 6f 64  === key }.</cod
0200: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0210: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0220: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0230: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
0240: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
0250: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
0260: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0270: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0280: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0290: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
02a0: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
02b0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
02c0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
02d0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
02e0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
02f0: 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 6e ><code>    # Run
0300: 20 74 68 65 20 62 6c 6f 63 6b 20 77 69 74 68 20  the block with 
0310: 26 23 78 32 37 3b 74 68 72 6f 77 20 3a 68 61 6c &#x27;throw :hal
0320: 74 26 23 78 32 37 3b 20 73 75 70 70 6f 72 74 20 t&#x27; support 
0330: 61 6e 64 20 61 70 70 6c 79 20 72 65 73 75 6c 74 and apply result
0340: 20 74 6f 20 74 68 65 20 72 65 73 70 6f 6e 73 65  to the response
0350: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
0360: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0370: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0380: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0390: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
03a0: 64 65 3e 20 20 20 20 64 65 66 20 69 6e 76 6f 6b de>    def invok
03b0: 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 e.</code></li>. 
03c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
03d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
03e0: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
03f0: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
0400: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34 36   <ol start="946
0410: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
0420: 22 20 69 64 3d 22 31 37 22 0a 20 20 20 20 20 20 " id="17".      
0430: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
0440: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 37 29 3b ick="toggle(17);
0450: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
0460: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0470: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
0480: 63 6f 6e 74 65 78 74 2d 31 37 22 3e 3c 63 6f 64 context-17"><cod
0490: 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 63 61 e>      res = ca
04a0: 74 63 68 28 3a 68 61 6c 74 29 20 7b 20 79 69 65 tch(:halt) { yie
04b0: 6c 64 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ld }</code></li>
04c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
04d0: 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /ol>..          
04e0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
04f0: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34    <ol start="94
0500: 37 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 7" class="post-c
0510: 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 ontext".        
0520: 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f           id="po
0530: 73 74 2d 31 37 22 20 6f 6e 63 6c 69 63 6b 3d 22 st-17" onclick="
0540: 74 6f 67 67 6c 65 28 31 37 29 3b 22 3e 0a 20 20 toggle(17);">.  
0550: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0560: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0570: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
0580: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0590: 64 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 5b de>      res = [
05a0: 72 65 73 5d 20 69 66 20 46 69 78 6e 75 6d 20 3d res] if Fixnum =
05b0: 3d 3d 20 72 65 73 20 6f 72 20 53 74 72 69 6e 67 == res or String
05c0: 20 3d 3d 3d 20 72 65 73 0a 3c 2f 63 6f 64 65 3e  === res.</code>
05d0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
05e0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
05f0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0600: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
0610: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0620: 20 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72 65  if Array === re
0630: 73 20 61 6e 64 20 46 69 78 6e 75 6d 20 3d 3d 3d s and Fixnum ===
0640: 20 72 65 73 2e 66 69 72 73 74 0a 3c 2f 63 6f 64  res.first.</cod
0650: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0660: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0670: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0680: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0690: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
06a0: 20 20 20 20 20 73 74 61 74 75 73 28 72 65 73 2e      status(res.
06b0: 73 68 69 66 74 29 0a 3c 2f 63 6f 64 65 3e 3c 2f shift).</code></
06c0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
06d0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
06e0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
06f0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
0700: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
0710: 20 62 6f 64 79 28 72 65 73 2e 70 6f 70 29 0a 3c  body(res.pop).<
0720: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0730: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0740: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0750: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0760: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0770: 3e 20 20 20 20 20 20 20 20 68 65 61 64 65 72 73 >        headers
0780: 28 2a 72 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f (*res).</code></
0790: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
07a0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
07b0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
07c0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
07d0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 e"><code>      e
07e0: 6c 73 69 66 20 72 65 73 2e 72 65 73 70 6f 6e 64 lsif res.respond
07f0: 5f 74 6f 3f 20 3a 65 61 63 68 0a 3c 2f 63 6f 64 _to? :each.</cod
0800: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0810: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0820: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0830: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0840: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0850: 20 20 20 20 20 62 6f 64 79 20 72 65 73 0a 3c 2f      body res.</
0860: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0870: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0880: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
0890: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
08a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69              <di
08b0: 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e v class="clear">
08c0: 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 </div>.         
08d0: 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20    </li>..      
08e0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20     ..        . 
08f0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0900: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
0910: 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 i class="frame-i
0920: 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a nfo framework">.
0930: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
0940: 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 ode>&#x2F;Users&
0950: 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 #x2F;kareemgrant
0960: 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b &#x2F;.rvm&#x2F;
0970: 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 gems&#x2F;ruby-1
0980: 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 .9.3-p194@traffi
0990: 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 c_spy&#x2F;gems&
09a0: 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 #x2F;sinatra-1.3
09b0: 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 .5&#x2F;lib&#x2F
09c0: 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 ;sinatra&#x2F;ba
09d0: 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a se.rb</code> in.
09e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
09f0: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 <code><strong>ca
0a00: 74 63 68 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f tch</strong></co
0a10: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
0a20: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
0a30: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0a40: 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 de framework">. 
0a50: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0a60: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
0a70: 73 74 61 72 74 3d 22 39 33 39 22 0a 20 20 20 20 start="939".    
0a80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c               cl
0a90: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0aa0: 22 20 69 64 3d 22 70 72 65 2d 31 38 22 0a 20 20 " id="pre-18".  
0ab0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0ac0: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
0ad0: 31 38 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 18);">.         
0ae0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0af0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0b00: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
0b10: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 ine"><code>    #
0b20: 20 43 72 65 61 74 65 73 20 61 20 48 61 73 68 20  Creates a Hash 
0b30: 77 69 74 68 20 69 6e 64 69 66 66 65 72 65 6e 74 with indifferent
0b40: 20 61 63 63 65 73 73 2e 0a 3c 2f 63 6f 64 65 3e  access..</code>
0b50: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0b60: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0b70: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0b80: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
0b90: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
0ba0: 66 20 69 6e 64 69 66 66 65 72 65 6e 74 5f 68 61 f indifferent_ha
0bb0: 73 68 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a sh.</code></li>.
0bc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0bd0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0be0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0bf0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0c00: 6f 64 65 3e 20 20 20 20 20 20 48 61 73 68 2e 6e ode>      Hash.n
0c10: 65 77 20 7b 7c 68 61 73 68 2c 6b 65 79 7c 20 68 ew {|hash,key| h
0c20: 61 73 68 5b 6b 65 79 2e 74 6f 5f 73 5d 20 69 66 ash[key.to_s] if
0c30: 20 53 79 6d 62 6f 6c 20 3d 3d 3d 20 6b 65 79 20  Symbol === key 
0c40: 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 }.</code></li>. 
0c50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0c60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0c70: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0c80: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0c90: 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 de>    end.</cod
0ca0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0cb0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0cc0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0cd0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
0ce0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
0cf0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0d00: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0d10: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0d20: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
0d30: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0d40: 20 20 23 20 52 75 6e 20 74 68 65 20 62 6c 6f 63   # Run the bloc
0d50: 6b 20 77 69 74 68 20 26 23 78 32 37 3b 74 68 72 k with &#x27;thr
0d60: 6f 77 20 3a 68 61 6c 74 26 23 78 32 37 3b 20 73 ow :halt&#x27; s
0d70: 75 70 70 6f 72 74 20 61 6e 64 20 61 70 70 6c 79 upport and apply
0d80: 20 72 65 73 75 6c 74 20 74 6f 20 74 68 65 20 72  result to the r
0d90: 65 73 70 6f 6e 73 65 2e 0a 3c 2f 63 6f 64 65 3e esponse..</code>
0da0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0db0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0dc0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0dd0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
0de0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
0df0: 66 20 69 6e 76 6f 6b 65 0a 3c 2f 63 6f 64 65 3e f invoke.</code>
0e00: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0e10: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0e20: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
0e30: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
0e40: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
0e50: 72 74 3d 22 39 34 36 22 20 63 6c 61 73 73 3d 22 rt="946" class="
0e60: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 31 38 22 context" id="18"
0e70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0e80: 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67    onclick="togg
0e90: 6c 65 28 31 38 29 3b 22 3e 0a 20 20 20 20 20 20 le(18);">.      
0ea0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0eb0: 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e ass="context-lin
0ec0: 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 31 e" id="context-1
0ed0: 38 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 72 8"><code>      r
0ee0: 65 73 20 3d 20 63 61 74 63 68 28 3a 68 61 6c 74 es = catch(:halt
0ef0: 29 20 7b 20 79 69 65 6c 64 20 7d 3c 2f 63 6f 64 ) { yield }</cod
0f00: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0f10: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20       </ol>..   
0f20: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0f30: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
0f40: 61 72 74 3d 22 39 34 37 22 20 63 6c 61 73 73 3d art="947" class=
0f50: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 "post-context". 
0f60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0f70: 20 69 64 3d 22 70 6f 73 74 2d 31 38 22 20 6f 6e  id="post-18" on
0f80: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 31 38 click="toggle(18
0f90: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
0fa0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0fb0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0fc0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
0fd0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
0fe0: 72 65 73 20 3d 20 5b 72 65 73 5d 20 69 66 20 46 res = [res] if F
0ff0: 69 78 6e 75 6d 20 3d 3d 3d 20 72 65 73 20 6f 72 ixnum === res or
1000: 20 53 74 72 69 6e 67 20 3d 3d 3d 20 72 65 73 0a  String === res.
1010: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1020: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1030: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1040: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1050: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1060: 65 3e 20 20 20 20 20 20 69 66 20 41 72 72 61 79 e>      if Array
1070: 20 3d 3d 3d 20 72 65 73 20 61 6e 64 20 46 69 78  === res and Fix
1080: 6e 75 6d 20 3d 3d 3d 20 72 65 73 2e 66 69 72 73 num === res.firs
1090: 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 t.</code></li>. 
10a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
10b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
10c0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
10d0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
10e0: 6f 64 65 3e 20 20 20 20 20 20 20 20 73 74 61 74 ode>        stat
10f0: 75 73 28 72 65 73 2e 73 68 69 66 74 29 0a 3c 2f us(res.shift).</
1100: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1110: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1120: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1130: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1140: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1150: 20 20 20 20 20 20 20 20 62 6f 64 79 28 72 65 73         body(res
1160: 2e 70 6f 70 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c .pop).</code></l
1170: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1180: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1190: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
11a0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
11b0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
11c0: 68 65 61 64 65 72 73 28 2a 72 65 73 29 0a 3c 2f headers(*res).</
11d0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
11e0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
11f0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1200: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1210: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1220: 20 20 20 20 20 20 65 6c 73 69 66 20 72 65 73 2e       elsif res.
1230: 72 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 65 61 63 respond_to? :eac
1240: 68 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 h.</code></li>. 
1250: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1260: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1270: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
1280: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1290: 6f 64 65 3e 20 20 20 20 20 20 20 20 62 6f 64 79 ode>        body
12a0: 20 72 65 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  res.</code></li
12b0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
12c0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
12d0: 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20  </ol>.         
12e0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
12f0: 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22     <div class="
1300: 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 clear"></div>.  
1310: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
1320: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
1330: 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20      .      .   
1340: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
1350: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1360: 66 72 61 6d 65 2d 69 6e 66 6f 20 66 72 61 6d 65 frame-info frame
1370: 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 work">.         
1380: 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46      <code>&#x2F
1390: 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 ;Users&#x2F;kare
13a0: 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 emgrant&#x2F;.rv
13b0: 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 m&#x2F;gems&#x2F
13c0: 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 ;ruby-1.9.3-p194
13d0: 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 @traffic_spy&#x2
13e0: 46 3b 67 65 6d 73 26 23 78 32 46 3b 73 69 6e 61 F;gems&#x2F;sina
13f0: 74 72 61 2d 31 2e 33 2e 35 26 23 78 32 46 3b 6c tra-1.3.5&#x2F;l
1400: 69 62 26 23 78 32 46 3b 73 69 6e 61 74 72 61 26 ib&#x2F;sinatra&
1410: 23 78 32 46 3b 62 61 73 65 2e 72 62 3c 2f 63 6f #x2F;base.rb</co
1420: 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 20 de> in.         
1430: 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73 74        <code><st
1440: 72 6f 6e 67 3e 69 6e 76 6f 6b 65 3c 2f 73 74 72 rong>invoke</str
1450: 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 ong></code>.    
1460: 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20         </li>.. 
1470: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1480: 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d 65 lass="code frame
1490: 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 work">.         
14a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
14b0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39     <ol start="9
14c0: 33 39 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 39".            
14d0: 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65       class="pre
14e0: 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 -context" id="pr
14f0: 65 2d 31 39 22 0a 20 20 20 20 20 20 20 20 20 20 e-19".          
1500: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
1510: 22 74 6f 67 67 6c 65 28 31 39 29 3b 22 3e 0a 20 "toggle(19);">. 
1520: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1530: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1540: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1550: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1560: 64 65 3e 20 20 20 20 23 20 43 72 65 61 74 65 73 de>    # Creates
1570: 20 61 20 48 61 73 68 20 77 69 74 68 20 69 6e 64  a Hash with ind
1580: 69 66 66 65 72 65 6e 74 20 61 63 63 65 73 73 2e ifferent access.
1590: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
15a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
15b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
15c0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
15d0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
15e0: 65 3e 20 20 20 20 64 65 66 20 69 6e 64 69 66 66 e>    def indiff
15f0: 65 72 65 6e 74 5f 68 61 73 68 0a 3c 2f 63 6f 64 erent_hash.</cod
1600: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1610: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1620: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1630: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
1640: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1650: 20 20 48 61 73 68 2e 6e 65 77 20 7b 7c 68 61 73   Hash.new {|has
1660: 68 2c 6b 65 79 7c 20 68 61 73 68 5b 6b 65 79 2e h,key| hash[key.
1670: 74 6f 5f 73 5d 20 69 66 20 53 79 6d 62 6f 6c 20 to_s] if Symbol 
1680: 3d 3d 3d 20 6b 65 79 20 7d 0a 3c 2f 63 6f 64 65 === key }.</code
1690: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
16a0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
16b0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
16c0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
16d0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 ine"><code>    e
16e0: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
16f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1700: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1710: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
1720: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1730: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
1740: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1750: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1760: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1770: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1780: 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 6e 20 <code>    # Run 
1790: 74 68 65 20 62 6c 6f 63 6b 20 77 69 74 68 20 26 the block with &
17a0: 23 78 32 37 3b 74 68 72 6f 77 20 3a 68 61 6c 74 #x27;throw :halt
17b0: 26 23 78 32 37 3b 20 73 75 70 70 6f 72 74 20 61 &#x27; support a
17c0: 6e 64 20 61 70 70 6c 79 20 72 65 73 75 6c 74 20 nd apply result 
17d0: 74 6f 20 74 68 65 20 72 65 73 70 6f 6e 73 65 2e to the response.
17e0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
17f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1800: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1810: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
1820: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1830: 65 3e 20 20 20 20 64 65 66 20 69 6e 76 6f 6b 65 e>    def invoke
1840: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1850: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1860: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
1870: 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 l>.             
1880: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20  ..             
1890: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34 36 22  <ol start="946"
18a0: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22  class="context"
18b0: 20 69 64 3d 22 31 39 22 0a 20 20 20 20 20 20 20  id="19".       
18c0: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
18d0: 63 6b 3d 22 74 6f 67 67 6c 65 28 31 39 29 3b 22 ck="toggle(19);"
18e0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
18f0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e   <li class="con
1900: 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 text-line" id="c
1910: 6f 6e 74 65 78 74 2d 31 39 22 3e 3c 63 6f 64 65 ontext-19"><code
1920: 3e 20 20 20 20 20 20 72 65 73 20 3d 20 63 61 74 >      res = cat
1930: 63 68 28 3a 68 61 6c 74 29 20 7b 20 79 69 65 6c ch(:halt) { yiel
1940: 64 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a d }</code></li>.
1950: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
1960: 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 ol>..           
1970: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1980: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34 37   <ol start="947
1990: 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f " class="post-co
19a0: 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 ntext".         
19b0: 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73          id="pos
19c0: 74 2d 31 39 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 t-19" onclick="t
19d0: 6f 67 67 6c 65 28 31 39 29 3b 22 3e 0a 20 20 20 oggle(19);">.   
19e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
19f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1a00: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1a10: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1a20: 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 5b 72 e>      res = [r
1a30: 65 73 5d 20 69 66 20 46 69 78 6e 75 6d 20 3d 3d es] if Fixnum ==
1a40: 3d 20 72 65 73 20 6f 72 20 53 74 72 69 6e 67 20 = res or String 
1a50: 3d 3d 3d 20 72 65 73 0a 3c 2f 63 6f 64 65 3e 3c === res.</code><
1a60: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1a70: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1a80: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1a90: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1aa0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1ab0: 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72 65 73 if Array === res
1ac0: 20 61 6e 64 20 46 69 78 6e 75 6d 20 3d 3d 3d 20  and Fixnum === 
1ad0: 72 65 73 2e 66 69 72 73 74 0a 3c 2f 63 6f 64 65 res.first.</code
1ae0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1af0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1b00: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1b10: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1b20: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1b30: 20 20 20 20 73 74 61 74 75 73 28 72 65 73 2e 73     status(res.s
1b40: 68 69 66 74 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c hift).</code></l
1b50: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1b60: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1b70: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1b80: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1b90: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
1ba0: 62 6f 64 79 28 72 65 73 2e 70 6f 70 29 0a 3c 2f body(res.pop).</
1bb0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1bc0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1bd0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1be0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1bf0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1c00: 20 20 20 20 20 20 20 20 68 65 61 64 65 72 73 28         headers(
1c10: 2a 72 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c *res).</code></l
1c20: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1c30: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1c40: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1c50: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1c60: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6c "><code>      el
1c70: 73 69 66 20 72 65 73 2e 72 65 73 70 6f 6e 64 5f sif res.respond_
1c80: 74 6f 3f 20 3a 65 61 63 68 0a 3c 2f 63 6f 64 65 to? :each.</code
1c90: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1ca0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1cb0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1cc0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1cd0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1ce0: 20 20 20 20 62 6f 64 79 20 72 65 73 0a 3c 2f 63     body res.</c
1cf0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1d00: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1d10: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
1d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1d30: 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76             <div
1d40: 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c  class="clear"><
1d50: 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 /div>.          
1d60: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
1d70: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20    ..        .  
1d80: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a     .          .
1d90: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
1da0: 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e  class="frame-in
1db0: 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 fo framework">. 
1dc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
1dd0: 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 de>&#x2F;Users&#
1de0: 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 x2F;kareemgrant&
1df0: 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 #x2F;.rvm&#x2F;g
1e00: 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e ems&#x2F;ruby-1.
1e10: 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 9.3-p194@traffic
1e20: 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 _spy&#x2F;gems&#
1e30: 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e x2F;sinatra-1.3.
1e40: 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 5&#x2F;lib&#x2F;
1e50: 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 sinatra&#x2F;bas
1e60: 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 e.rb</code> in. 
1e70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1e80: 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 64 69 73 code><strong>dis
1e90: 70 61 74 63 68 21 3c 2f 73 74 72 6f 6e 67 3e 3c patch!</strong><
1ea0: 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 /code>.         
1eb0: 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20    </li>..      
1ec0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1ed0: 22 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 "code framework"
1ee0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1ef0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
1f00: 6f 6c 20 73 74 61 72 74 3d 22 39 35 33 22 0a 20 ol start="953". 
1f10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1f20: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1f30: 65 78 74 22 20 69 64 3d 22 70 72 65 2d 32 30 22 ext" id="pre-20"
1f40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1f50: 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67    onclick="togg
1f60: 6c 65 28 32 30 29 3b 22 3e 0a 20 20 20 20 20 20 le(20);">.      
1f70: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1f80: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1f90: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1fa0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
1fb0: 20 20 20 20 20 20 62 6f 64 79 20 72 65 73 0a 3c       body res.<
1fc0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1fd0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1ff0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
2000: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2010: 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65       end.</code
2020: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2030: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2040: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2050: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2060: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2070: 20 6e 69 6c 20 23 20 61 76 6f 69 64 20 64 6f 75  nil # avoid dou
2080: 62 6c 65 20 73 65 74 74 69 6e 67 20 74 68 65 20 ble setting the 
2090: 73 61 6d 65 20 72 65 73 70 6f 6e 73 65 20 74 75 same response tu
20a0: 70 6c 65 20 74 77 69 63 65 0a 3c 2f 63 6f 64 65 ple twice.</code
20b0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
20c0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
20d0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
20e0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
20f0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 ine"><code>    e
2100: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
2110: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2120: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2130: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2140: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2150: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
2160: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2170: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2180: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2190: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
21a0: 3c 63 6f 64 65 3e 20 20 20 20 23 20 44 69 73 70 <code>    # Disp
21b0: 61 74 63 68 20 61 20 72 65 71 75 65 73 74 20 77 atch a request w
21c0: 69 74 68 20 65 72 72 6f 72 20 68 61 6e 64 6c 69 ith error handli
21d0: 6e 67 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ng..</code></li>
21e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
21f0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2200: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
2210: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2220: 63 6f 64 65 3e 20 20 20 20 64 65 66 20 64 69 73 code>    def dis
2230: 70 61 74 63 68 21 0a 3c 2f 63 6f 64 65 3e 3c 2f patch!.</code></
2240: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2250: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2260: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
2270: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
2280: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
2290: 3d 22 39 36 30 22 20 63 6c 61 73 73 3d 22 63 6f ="960" class="co
22a0: 6e 74 65 78 74 22 20 69 64 3d 22 32 30 22 0a 20 ntext" id="20". 
22b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
22c0: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
22d0: 28 32 30 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 (20);">.        
22e0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
22f0: 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 s="context-line"
2300: 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 32 30 22  id="context-20"
2310: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 69 6e 76 ><code>      inv
2320: 6f 6b 65 20 64 6f 3c 2f 63 6f 64 65 3e 3c 2f 6c oke do</code></l
2330: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2340: 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20  </ol>..        
2350: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2360: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
2370: 39 36 31 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 961" class="post
2380: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
2390: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
23a0: 70 6f 73 74 2d 32 30 22 20 6f 6e 63 6c 69 63 6b post-20" onclick
23b0: 3d 22 74 6f 67 67 6c 65 28 32 30 29 3b 22 3e 0a ="toggle(20);">.
23c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
23d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
23e0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
23f0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2400: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 73 74 61 code>        sta
2410: 74 69 63 21 20 69 66 20 73 65 74 74 69 6e 67 73 tic! if settings
2420: 2e 73 74 61 74 69 63 3f 20 26 61 6d 70 3b 26 61 .static? &amp;&a
2430: 6d 70 3b 20 28 72 65 71 75 65 73 74 2e 67 65 74 mp; (request.get
2440: 3f 20 7c 7c 20 72 65 71 75 65 73 74 2e 68 65 61 ? || request.hea
2450: 64 3f 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e d?).</code></li>
2460: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2470: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2480: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
2490: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
24a0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 66 69 <code>        fi
24b0: 6c 74 65 72 21 20 3a 62 65 66 6f 72 65 0a 3c 2f lter! :before.</
24c0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
24d0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
24e0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
24f0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2500: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2510: 20 20 20 20 20 20 20 20 72 6f 75 74 65 21 0a 3c         route!.<
2520: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2530: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2540: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2550: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
2560: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2570: 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 >      end.</cod
2580: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2590: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
25a0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
25b0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
25c0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
25d0: 20 72 65 73 63 75 65 20 3a 3a 45 78 63 65 70 74  rescue ::Except
25e0: 69 6f 6e 20 3d 26 67 74 3b 20 62 6f 6f 6d 0a 3c ion =&gt; boom.<
25f0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2600: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2610: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2620: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
2630: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2640: 3e 20 20 20 20 20 20 69 6e 76 6f 6b 65 20 7b 20 >      invoke { 
2650: 68 61 6e 64 6c 65 5f 65 78 63 65 70 74 69 6f 6e handle_exception
2660: 21 28 62 6f 6f 6d 29 20 7d 0a 3c 2f 63 6f 64 65 !(boom) }.</code
2670: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2680: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2690: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
26a0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
26b0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
26c0: 65 6e 73 75 72 65 0a 3c 2f 63 6f 64 65 3e 3c 2f ensure.</code></
26d0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
26e0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
26f0: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
2700: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2710: 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73       <div class
2720: 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a ="clear"></div>.
2730: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
2740: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 >..          .. 
2750: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20        .      . 
2760: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
2770: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2780: 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 66 72 61 ="frame-info fra
2790: 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 mework">.       
27a0: 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78        <code>&#x
27b0: 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 2F;Users&#x2F;ka
27c0: 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e reemgrant&#x2F;.
27d0: 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 rvm&#x2F;gems&#x
27e0: 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 2F;ruby-1.9.3-p1
27f0: 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 94@traffic_spy&#
2800: 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 73 69 x2F;gems&#x2F;si
2810: 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 78 32 46 natra-1.3.5&#x2F
2820: 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e 61 74 72 ;lib&#x2F;sinatr
2830: 61 26 23 78 32 46 3b 62 61 73 65 2e 72 62 3c 2f a&#x2F;base.rb</
2840: 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 code> in.       
2850: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c          <code><
2860: 73 74 72 6f 6e 67 3e 62 6c 6f 63 6b 20 69 6e 20 strong>block in 
2870: 63 61 6c 6c 21 3c 2f 73 74 72 6f 6e 67 3e 3c 2f call!</strong></
2880: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
2890: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
28a0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
28b0: 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e code framework">
28c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
28d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
28e0: 6c 20 73 74 61 72 74 3d 22 37 38 37 22 0a 20 20 l start="787".  
28f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2900: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2910: 78 74 22 20 69 64 3d 22 70 72 65 2d 32 31 22 0a xt" id="pre-21".
2920: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2930: 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c   onclick="toggl
2940: 65 28 32 31 29 3b 22 3e 0a 20 20 20 20 20 20 20 e(21);">.       
2950: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2960: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2970: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2980: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2990: 20 20 20 40 72 65 71 75 65 73 74 20 20 3d 20 52    @request  = R
29a0: 65 71 75 65 73 74 2e 6e 65 77 28 65 6e 76 29 0a equest.new(env).
29b0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
29c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
29d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
29e0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
29f0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2a00: 3e 20 20 20 20 20 20 40 72 65 73 70 6f 6e 73 65 >      @response
2a10: 20 3d 20 52 65 73 70 6f 6e 73 65 2e 6e 65 77 0a  = Response.new.
2a20: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2a30: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2a40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2a50: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2a60: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2a70: 3e 20 20 20 20 20 20 40 70 61 72 61 6d 73 20 20 >      @params  
2a80: 20 3d 20 69 6e 64 69 66 66 65 72 65 6e 74 5f 70  = indifferent_p
2a90: 61 72 61 6d 73 28 40 72 65 71 75 65 73 74 2e 70 arams(@request.p
2aa0: 61 72 61 6d 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f arams).</code></
2ab0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2ac0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2ad0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2ae0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
2af0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 74 65 "><code>      te
2b00: 6d 70 6c 61 74 65 5f 63 61 63 68 65 2e 63 6c 65 mplate_cache.cle
2b10: 61 72 20 69 66 20 73 65 74 74 69 6e 67 73 2e 72 ar if settings.r
2b20: 65 6c 6f 61 64 5f 74 65 6d 70 6c 61 74 65 73 0a eload_templates.
2b30: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2b40: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2b50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2b60: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2b70: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2b80: 3e 20 20 20 20 20 20 66 6f 72 63 65 5f 65 6e 63 >      force_enc
2b90: 6f 64 69 6e 67 28 40 70 61 72 61 6d 73 29 0a 3c oding(@params).<
2ba0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2bb0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2bc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2bd0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
2be0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2bf0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
2c00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2c10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
2c20: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
2c30: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2c40: 65 3e 20 20 20 20 20 20 40 72 65 73 70 6f 6e 73 e>      @respons
2c50: 65 5b 26 23 78 32 37 3b 43 6f 6e 74 65 6e 74 2d e[&#x27;Content-
2c60: 54 79 70 65 26 23 78 32 37 3b 5d 20 3d 20 6e 69 Type&#x27;] = ni
2c70: 6c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 l.</code></li>. 
2c80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2c90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
2ca0: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
2cb0: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
2cc0: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 37 39 34   <ol start="794
2cd0: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
2ce0: 22 20 69 64 3d 22 32 31 22 0a 20 20 20 20 20 20 " id="21".      
2cf0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
2d00: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 31 29 3b ick="toggle(21);
2d10: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
2d20: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
2d30: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
2d40: 63 6f 6e 74 65 78 74 2d 32 31 22 3e 3c 63 6f 64 context-21"><cod
2d50: 65 3e 20 20 20 20 20 20 69 6e 76 6f 6b 65 20 7b e>      invoke {
2d60: 20 64 69 73 70 61 74 63 68 21 20 7d 3c 2f 63 6f  dispatch! }</co
2d70: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2d80: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
2d90: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2da0: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
2db0: 74 61 72 74 3d 22 37 39 35 22 20 63 6c 61 73 73 tart="795" class
2dc0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a ="post-context".
2dd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2de0: 20 20 69 64 3d 22 70 6f 73 74 2d 32 31 22 20 6f   id="post-21" o
2df0: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 nclick="toggle(2
2e00: 31 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 1);">.          
2e10: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2e20: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2e30: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2e40: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2e50: 20 69 6e 76 6f 6b 65 20 7b 20 65 72 72 6f 72 5f  invoke { error_
2e60: 62 6c 6f 63 6b 21 28 72 65 73 70 6f 6e 73 65 2e block!(response.
2e70: 73 74 61 74 75 73 29 20 7d 0a 3c 2f 63 6f 64 65 status) }.</code
2e80: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2e90: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2ea0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2eb0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
2ec0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
2ed0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2ee0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2ef0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2f00: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2f10: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2f20: 20 20 20 20 20 75 6e 6c 65 73 73 20 40 72 65 73      unless @res
2f30: 70 6f 6e 73 65 5b 26 23 78 32 37 3b 43 6f 6e 74 ponse[&#x27;Cont
2f40: 65 6e 74 2d 54 79 70 65 26 23 78 32 37 3b 5d 0a ent-Type&#x27;].
2f50: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2f60: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2f70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2f80: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
2f90: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2fa0: 65 3e 20 20 20 20 20 20 20 20 69 66 20 41 72 72 e>        if Arr
2fb0: 61 79 20 3d 3d 3d 20 62 6f 64 79 20 61 6e 64 20 ay === body and 
2fc0: 62 6f 64 79 5b 30 5d 2e 72 65 73 70 6f 6e 64 5f body[0].respond_
2fd0: 74 6f 3f 20 3a 63 6f 6e 74 65 6e 74 5f 74 79 70 to? :content_typ
2fe0: 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 e.</code></li>. 
2ff0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3000: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3010: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
3020: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3030: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 63 6f ode>          co
3040: 6e 74 65 6e 74 5f 74 79 70 65 20 62 6f 64 79 5b ntent_type body[
3050: 30 5d 2e 63 6f 6e 74 65 6e 74 5f 74 79 70 65 0a 0].content_type.
3060: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3070: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3080: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3090: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
30a0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
30b0: 65 3e 20 20 20 20 20 20 20 20 65 6c 73 65 0a 3c e>        else.<
30c0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
30d0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
30e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
30f0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
3100: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3110: 3e 20 20 20 20 20 20 20 20 20 20 63 6f 6e 74 65 >          conte
3120: 6e 74 5f 74 79 70 65 20 3a 68 74 6d 6c 0a 3c 2f nt_type :html.</
3130: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3140: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3150: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
3160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3170: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69              <di
3180: 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e v class="clear">
3190: 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 </div>.         
31a0: 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20    </li>..      
31b0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20     ..        . 
31c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
31d0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
31e0: 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 i class="frame-i
31f0: 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a nfo framework">.
3200: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
3210: 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 ode>&#x2F;Users&
3220: 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 #x2F;kareemgrant
3230: 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b &#x2F;.rvm&#x2F;
3240: 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 gems&#x2F;ruby-1
3250: 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 .9.3-p194@traffi
3260: 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 c_spy&#x2F;gems&
3270: 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 #x2F;sinatra-1.3
3280: 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 .5&#x2F;lib&#x2F
3290: 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 ;sinatra&#x2F;ba
32a0: 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a se.rb</code> in.
32b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
32c0: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c <code><strong>bl
32d0: 6f 63 6b 20 69 6e 20 69 6e 76 6f 6b 65 3c 2f 73 ock in invoke</s
32e0: 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 trong></code>.  
32f0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
3300: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
3310: 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61  class="code fra
3320: 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 mework">.       
3330: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3340: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
3350: 22 39 33 39 22 0a 20 20 20 20 20 20 20 20 20 20 "939".          
3360: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
3370: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
3380: 70 72 65 2d 32 32 22 0a 20 20 20 20 20 20 20 20 pre-22".        
3390: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
33a0: 6b 3d 22 74 6f 67 67 6c 65 28 32 32 29 3b 22 3e k="toggle(22);">
33b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
33c0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
33d0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
33e0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
33f0: 63 6f 64 65 3e 20 20 20 20 23 20 43 72 65 61 74 code>    # Creat
3400: 65 73 20 61 20 48 61 73 68 20 77 69 74 68 20 69 es a Hash with i
3410: 6e 64 69 66 66 65 72 65 6e 74 20 61 63 63 65 73 ndifferent acces
3420: 73 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a s..</code></li>.
3430: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3440: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3450: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
3460: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3470: 6f 64 65 3e 20 20 20 20 64 65 66 20 69 6e 64 69 ode>    def indi
3480: 66 66 65 72 65 6e 74 5f 68 61 73 68 0a 3c 2f 63 fferent_hash.</c
3490: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
34a0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
34b0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
34c0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
34d0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
34e0: 20 20 20 20 48 61 73 68 2e 6e 65 77 20 7b 7c 68     Hash.new {|h
34f0: 61 73 68 2c 6b 65 79 7c 20 68 61 73 68 5b 6b 65 ash,key| hash[ke
3500: 79 2e 74 6f 5f 73 5d 20 69 66 20 53 79 6d 62 6f y.to_s] if Symbo
3510: 6c 20 3d 3d 3d 20 6b 65 79 20 7d 0a 3c 2f 63 6f l === key }.</co
3520: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3530: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3540: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3550: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
3560: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
3570: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
3580: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3590: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
35a0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
35b0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
35c0: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
35d0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
35e0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
35f0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3600: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3610: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 "><code>    # Ru
3620: 6e 20 74 68 65 20 62 6c 6f 63 6b 20 77 69 74 68 n the block with
3630: 20 26 23 78 32 37 3b 74 68 72 6f 77 20 3a 68 61  &#x27;throw :ha
3640: 6c 74 26 23 78 32 37 3b 20 73 75 70 70 6f 72 74 lt&#x27; support
3650: 20 61 6e 64 20 61 70 70 6c 79 20 72 65 73 75 6c  and apply resul
3660: 74 20 74 6f 20 74 68 65 20 72 65 73 70 6f 6e 73 t to the respons
3670: 65 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e..</code></li>.
3680: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3690: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
36a0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
36b0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
36c0: 6f 64 65 3e 20 20 20 20 64 65 66 20 69 6e 76 6f ode>    def invo
36d0: 6b 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ke.</code></li>.
36e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
36f0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
3700: 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /ol>.           
3710: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
3720: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34    <ol start="94
3730: 36 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 6" class="contex
3740: 74 22 20 69 64 3d 22 32 32 22 0a 20 20 20 20 20 t" id="22".     
3750: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
3760: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 32 29 lick="toggle(22)
3770: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
3780: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63     <li class="c
3790: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d ontext-line" id=
37a0: 22 63 6f 6e 74 65 78 74 2d 32 32 22 3e 3c 63 6f "context-22"><co
37b0: 64 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 63 de>      res = c
37c0: 61 74 63 68 28 3a 68 61 6c 74 29 20 7b 20 79 69 atch(:halt) { yi
37d0: 65 6c 64 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 eld }</code></li
37e0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
37f0: 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 </ol>..         
3800: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3810: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39     <ol start="9
3820: 34 37 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 47" class="post-
3830: 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 context".       
3840: 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70            id="p
3850: 6f 73 74 2d 32 32 22 20 6f 6e 63 6c 69 63 6b 3d ost-22" onclick=
3860: 22 74 6f 67 67 6c 65 28 32 32 29 3b 22 3e 0a 20 "toggle(22);">. 
3870: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3880: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3890: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
38a0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
38b0: 6f 64 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 ode>      res = 
38c0: 5b 72 65 73 5d 20 69 66 20 46 69 78 6e 75 6d 20 [res] if Fixnum 
38d0: 3d 3d 3d 20 72 65 73 20 6f 72 20 53 74 72 69 6e === res or Strin
38e0: 67 20 3d 3d 3d 20 72 65 73 0a 3c 2f 63 6f 64 65 g === res.</code
38f0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3900: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3910: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3920: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
3930: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3940: 20 20 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72   if Array === r
3950: 65 73 20 61 6e 64 20 46 69 78 6e 75 6d 20 3d 3d es and Fixnum ==
3960: 3d 20 72 65 73 2e 66 69 72 73 74 0a 3c 2f 63 6f = res.first.</co
3970: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3980: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3990: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
39a0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
39b0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
39c0: 20 20 20 20 20 20 73 74 61 74 75 73 28 72 65 73       status(res
39d0: 2e 73 68 69 66 74 29 0a 3c 2f 63 6f 64 65 3e 3c .shift).</code><
39e0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
39f0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3a00: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3a10: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
3a20: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
3a30: 20 20 62 6f 64 79 28 72 65 73 2e 70 6f 70 29 0a   body(res.pop).
3a40: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3a50: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3a60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3a70: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
3a80: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3a90: 65 3e 20 20 20 20 20 20 20 20 68 65 61 64 65 72 e>        header
3aa0: 73 28 2a 72 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c s(*res).</code><
3ab0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3ac0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3ad0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3ae0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
3af0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
3b00: 65 6c 73 69 66 20 72 65 73 2e 72 65 73 70 6f 6e elsif res.respon
3b10: 64 5f 74 6f 3f 20 3a 65 61 63 68 0a 3c 2f 63 6f d_to? :each.</co
3b20: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3b30: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3b40: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3b50: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
3b60: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
3b70: 20 20 20 20 20 20 62 6f 64 79 20 72 65 73 0a 3c       body res.<
3b80: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3b90: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3ba0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
3bb0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
3bc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
3bd0: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
3be0: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
3bf0: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
3c00: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
3c10: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3c20: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
3c30: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
3c40: 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e info framework">
3c50: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
3c60: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
3c70: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
3c80: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
3c90: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
3ca0: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
3cb0: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
3cc0: 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e &#x2F;sinatra-1.
3cd0: 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 3.5&#x2F;lib&#x2
3ce0: 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 F;sinatra&#x2F;b
3cf0: 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e ase.rb</code> in
3d00: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3d10: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63  <code><strong>c
3d20: 61 74 63 68 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 atch</strong></c
3d30: 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 ode>.           
3d40: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
3d50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63     <li class="c
3d60: 6f 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a ode framework">.
3d70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3d80: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
3d90: 20 73 74 61 72 74 3d 22 39 33 39 22 0a 20 20 20  start="939".   
3da0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63                c
3db0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
3dc0: 74 22 20 69 64 3d 22 70 72 65 2d 32 33 22 0a 20 t" id="pre-23". 
3dd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3de0: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
3df0: 28 32 33 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 (23);">.        
3e00: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3e10: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3e20: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
3e30: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3e40: 23 20 43 72 65 61 74 65 73 20 61 20 48 61 73 68 # Creates a Hash
3e50: 20 77 69 74 68 20 69 6e 64 69 66 66 65 72 65 6e  with indifferen
3e60: 74 20 61 63 63 65 73 73 2e 0a 3c 2f 63 6f 64 65 t access..</code
3e70: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3e80: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3e90: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3ea0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
3eb0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 ine"><code>    d
3ec0: 65 66 20 69 6e 64 69 66 66 65 72 65 6e 74 5f 68 ef indifferent_h
3ed0: 61 73 68 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ash.</code></li>
3ee0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3ef0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3f00: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3f10: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3f20: 63 6f 64 65 3e 20 20 20 20 20 20 48 61 73 68 2e code>      Hash.
3f30: 6e 65 77 20 7b 7c 68 61 73 68 2c 6b 65 79 7c 20 new {|hash,key| 
3f40: 68 61 73 68 5b 6b 65 79 2e 74 6f 5f 73 5d 20 69 hash[key.to_s] i
3f50: 66 20 53 79 6d 62 6f 6c 20 3d 3d 3d 20 6b 65 79 f Symbol === key
3f60: 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a  }.</code></li>.
3f70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3f80: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3f90: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
3fa0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3fb0: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
3fc0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3fd0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3fe0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3ff0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
<= Recv data, 16384 bytes (0x4000)
0000: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
0010: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0020: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0030: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0040: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
0050: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0060: 20 20 20 23 20 52 75 6e 20 74 68 65 20 62 6c 6f    # Run the blo
0070: 63 6b 20 77 69 74 68 20 26 23 78 32 37 3b 74 68 ck with &#x27;th
0080: 72 6f 77 20 3a 68 61 6c 74 26 23 78 32 37 3b 20 row :halt&#x27; 
0090: 73 75 70 70 6f 72 74 20 61 6e 64 20 61 70 70 6c support and appl
00a0: 79 20 72 65 73 75 6c 74 20 74 6f 20 74 68 65 20 y result to the 
00b0: 72 65 73 70 6f 6e 73 65 2e 0a 3c 2f 63 6f 64 65 response..</code
00c0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
00d0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
00e0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
00f0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
0100: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 ine"><code>    d
0110: 65 66 20 69 6e 76 6f 6b 65 0a 3c 2f 63 6f 64 65 ef invoke.</code
0120: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0130: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0140: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
0150: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
0160: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
0170: 61 72 74 3d 22 39 34 36 22 20 63 6c 61 73 73 3d art="946" class=
0180: 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 32 33 "context" id="23
0190: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
01a0: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
01b0: 67 6c 65 28 32 33 29 3b 22 3e 0a 20 20 20 20 20 gle(23);">.     
01c0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
01d0: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 lass="context-li
01e0: 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d ne" id="context-
01f0: 32 33 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 23"><code>      
0200: 72 65 73 20 3d 20 63 61 74 63 68 28 3a 68 61 6c res = catch(:hal
0210: 74 29 20 7b 20 79 69 65 6c 64 20 7d 3c 2f 63 6f t) { yield }</co
0220: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0230: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
0240: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0250: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
0260: 74 61 72 74 3d 22 39 34 37 22 20 63 6c 61 73 73 tart="947" class
0270: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a ="post-context".
0280: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0290: 20 20 69 64 3d 22 70 6f 73 74 2d 32 33 22 20 6f   id="post-23" o
02a0: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 nclick="toggle(2
02b0: 33 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 3);">.          
02c0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
02d0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
02e0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
02f0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0300: 20 72 65 73 20 3d 20 5b 72 65 73 5d 20 69 66 20  res = [res] if 
0310: 46 69 78 6e 75 6d 20 3d 3d 3d 20 72 65 73 20 6f Fixnum === res o
0320: 72 20 53 74 72 69 6e 67 20 3d 3d 3d 20 72 65 73 r String === res
0330: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0340: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0350: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0360: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
0370: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0380: 64 65 3e 20 20 20 20 20 20 69 66 20 41 72 72 61 de>      if Arra
0390: 79 20 3d 3d 3d 20 72 65 73 20 61 6e 64 20 46 69 y === res and Fi
03a0: 78 6e 75 6d 20 3d 3d 3d 20 72 65 73 2e 66 69 72 xnum === res.fir
03b0: 73 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a st.</code></li>.
03c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
03d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
03e0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
03f0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0400: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 73 74 61 code>        sta
0410: 74 75 73 28 72 65 73 2e 73 68 69 66 74 29 0a 3c tus(res.shift).<
0420: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0430: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0440: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0450: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0460: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0470: 3e 20 20 20 20 20 20 20 20 62 6f 64 79 28 72 65 >        body(re
0480: 73 2e 70 6f 70 29 0a 3c 2f 63 6f 64 65 3e 3c 2f s.pop).</code></
0490: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
04a0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
04b0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
04c0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
04d0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
04e0: 20 68 65 61 64 65 72 73 28 2a 72 65 73 29 0a 3c  headers(*res).<
04f0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0500: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0510: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0520: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0530: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0540: 3e 20 20 20 20 20 20 65 6c 73 69 66 20 72 65 73 >      elsif res
0550: 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 65 61 .respond_to? :ea
0560: 63 68 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ch.</code></li>.
0570: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0580: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0590: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
05a0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
05b0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 62 6f 64 code>        bod
05c0: 79 20 72 65 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c y res.</code></l
05d0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
05e0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
05f0: 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20   </ol>.        
0600: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0610: 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73 3d      <div class=
0620: 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 "clear"></div>. 
0630: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
0640: 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 ..          ..  
0650: 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20 20       .      .  
0660: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
0670: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0680: 22 66 72 61 6d 65 2d 69 6e 66 6f 20 66 72 61 6d "frame-info fram
0690: 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 ework">.        
06a0: 20 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32       <code>&#x2
06b0: 46 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 F;Users&#x2F;kar
06c0: 65 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 eemgrant&#x2F;.r
06d0: 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 vm&#x2F;gems&#x2
06e0: 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 F;ruby-1.9.3-p19
06f0: 34 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 4@traffic_spy&#x
0700: 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 73 69 6e 2F;gems&#x2F;sin
0710: 61 74 72 61 2d 31 2e 33 2e 35 26 23 78 32 46 3b atra-1.3.5&#x2F;
0720: 6c 69 62 26 23 78 32 46 3b 73 69 6e 61 74 72 61 lib&#x2F;sinatra
0730: 26 23 78 32 46 3b 62 61 73 65 2e 72 62 3c 2f 63 &#x2F;base.rb</c
0740: 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 ode> in.        
0750: 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73         <code><s
0760: 74 72 6f 6e 67 3e 69 6e 76 6f 6b 65 3c 2f 73 74 trong>invoke</st
0770: 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 rong></code>.   
0780: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
0790: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
07a0: 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d class="code fram
07b0: 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 ework">.        
07c0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
07d0: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
07e0: 39 33 39 22 0a 20 20 20 20 20 20 20 20 20 20 20 939".           
07f0: 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72        class="pr
0800: 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 e-context" id="p
0810: 72 65 2d 32 34 22 0a 20 20 20 20 20 20 20 20 20 re-24".         
0820: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
0830: 3d 22 74 6f 67 67 6c 65 28 32 34 29 3b 22 3e 0a ="toggle(24);">.
0840: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0850: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0860: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0870: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0880: 6f 64 65 3e 20 20 20 20 23 20 43 72 65 61 74 65 ode>    # Create
0890: 73 20 61 20 48 61 73 68 20 77 69 74 68 20 69 6e s a Hash with in
08a0: 64 69 66 66 65 72 65 6e 74 20 61 63 63 65 73 73 different access
08b0: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
08c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
08d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
08e0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
08f0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0900: 64 65 3e 20 20 20 20 64 65 66 20 69 6e 64 69 66 de>    def indif
0910: 66 65 72 65 6e 74 5f 68 61 73 68 0a 3c 2f 63 6f ferent_hash.</co
0920: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0930: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0940: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0950: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0960: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0970: 20 20 20 48 61 73 68 2e 6e 65 77 20 7b 7c 68 61    Hash.new {|ha
0980: 73 68 2c 6b 65 79 7c 20 68 61 73 68 5b 6b 65 79 sh,key| hash[key
0990: 2e 74 6f 5f 73 5d 20 69 66 20 53 79 6d 62 6f 6c .to_s] if Symbol
09a0: 20 3d 3d 3d 20 6b 65 79 20 7d 0a 3c 2f 63 6f 64  === key }.</cod
09b0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
09c0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
09d0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
09e0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
09f0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
0a00: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
0a10: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0a20: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0a30: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0a40: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0a50: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
0a60: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0a70: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0a80: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0a90: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
0aa0: 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 52 75 6e ><code>    # Run
0ab0: 20 74 68 65 20 62 6c 6f 63 6b 20 77 69 74 68 20  the block with 
0ac0: 26 23 78 32 37 3b 74 68 72 6f 77 20 3a 68 61 6c &#x27;throw :hal
0ad0: 74 26 23 78 32 37 3b 20 73 75 70 70 6f 72 74 20 t&#x27; support 
0ae0: 61 6e 64 20 61 70 70 6c 79 20 72 65 73 75 6c 74 and apply result
0af0: 20 74 6f 20 74 68 65 20 72 65 73 70 6f 6e 73 65  to the response
0b00: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
0b10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0b20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0b30: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0b40: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0b50: 64 65 3e 20 20 20 20 64 65 66 20 69 6e 76 6f 6b de>    def invok
0b60: 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 e.</code></li>. 
0b70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0b80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
0b90: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
0ba0: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
0bb0: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34 36   <ol start="946
0bc0: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
0bd0: 22 20 69 64 3d 22 32 34 22 0a 20 20 20 20 20 20 " id="24".      
0be0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
0bf0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 34 29 3b ick="toggle(24);
0c00: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
0c10: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0c20: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
0c30: 63 6f 6e 74 65 78 74 2d 32 34 22 3e 3c 63 6f 64 context-24"><cod
0c40: 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 63 61 e>      res = ca
0c50: 74 63 68 28 3a 68 61 6c 74 29 20 7b 20 79 69 65 tch(:halt) { yie
0c60: 6c 64 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ld }</code></li>
0c70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
0c80: 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /ol>..          
0c90: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0ca0: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34    <ol start="94
0cb0: 37 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 7" class="post-c
0cc0: 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 ontext".        
0cd0: 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f           id="po
0ce0: 73 74 2d 32 34 22 20 6f 6e 63 6c 69 63 6b 3d 22 st-24" onclick="
0cf0: 74 6f 67 67 6c 65 28 32 34 29 3b 22 3e 0a 20 20 toggle(24);">.  
0d00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0d10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0d20: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
0d30: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0d40: 64 65 3e 20 20 20 20 20 20 72 65 73 20 3d 20 5b de>      res = [
0d50: 72 65 73 5d 20 69 66 20 46 69 78 6e 75 6d 20 3d res] if Fixnum =
0d60: 3d 3d 20 72 65 73 20 6f 72 20 53 74 72 69 6e 67 == res or String
0d70: 20 3d 3d 3d 20 72 65 73 0a 3c 2f 63 6f 64 65 3e  === res.</code>
0d80: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0d90: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0da0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0db0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
0dc0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0dd0: 20 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72 65  if Array === re
0de0: 73 20 61 6e 64 20 46 69 78 6e 75 6d 20 3d 3d 3d s and Fixnum ===
0df0: 20 72 65 73 2e 66 69 72 73 74 0a 3c 2f 63 6f 64  res.first.</cod
0e00: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0e10: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0e20: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0e30: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0e40: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0e50: 20 20 20 20 20 73 74 61 74 75 73 28 72 65 73 2e      status(res.
0e60: 73 68 69 66 74 29 0a 3c 2f 63 6f 64 65 3e 3c 2f shift).</code></
0e70: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0e80: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0e90: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0ea0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
0eb0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
0ec0: 20 62 6f 64 79 28 72 65 73 2e 70 6f 70 29 0a 3c  body(res.pop).<
0ed0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0ee0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0ef0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0f00: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0f10: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0f20: 3e 20 20 20 20 20 20 20 20 68 65 61 64 65 72 73 >        headers
0f30: 28 2a 72 65 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f (*res).</code></
0f40: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0f50: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0f60: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0f70: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
0f80: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 e"><code>      e
0f90: 6c 73 69 66 20 72 65 73 2e 72 65 73 70 6f 6e 64 lsif res.respond
0fa0: 5f 74 6f 3f 20 3a 65 61 63 68 0a 3c 2f 63 6f 64 _to? :each.</cod
0fb0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0fc0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0fd0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0fe0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0ff0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1000: 20 20 20 20 20 62 6f 64 79 20 72 65 73 0a 3c 2f      body res.</
1010: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1020: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1030: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
1040: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1050: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69              <di
1060: 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e v class="clear">
1070: 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 </div>.         
1080: 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20    </li>..      
1090: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20     ..        . 
10a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
10b0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
10c0: 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 i class="frame-i
10d0: 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a nfo framework">.
10e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
10f0: 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 ode>&#x2F;Users&
1100: 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 #x2F;kareemgrant
1110: 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b &#x2F;.rvm&#x2F;
1120: 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 gems&#x2F;ruby-1
1130: 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 .9.3-p194@traffi
1140: 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 c_spy&#x2F;gems&
1150: 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 #x2F;sinatra-1.3
1160: 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 .5&#x2F;lib&#x2F
1170: 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 ;sinatra&#x2F;ba
1180: 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a se.rb</code> in.
1190: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
11a0: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 <code><strong>ca
11b0: 6c 6c 21 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f ll!</strong></co
11c0: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
11d0: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
11e0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
11f0: 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 de framework">. 
1200: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1210: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
1220: 73 74 61 72 74 3d 22 37 38 37 22 0a 20 20 20 20 start="787".    
1230: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c               cl
1240: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1250: 22 20 69 64 3d 22 70 72 65 2d 32 35 22 0a 20 20 " id="pre-25".  
1260: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1270: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
1280: 32 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 25);">.         
1290: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
12a0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
12b0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
12c0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
12d0: 20 40 72 65 71 75 65 73 74 20 20 3d 20 52 65 71  @request  = Req
12e0: 75 65 73 74 2e 6e 65 77 28 65 6e 76 29 0a 3c 2f uest.new(env).</
12f0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1300: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1310: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1320: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
1330: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
1340: 20 20 20 20 20 40 72 65 73 70 6f 6e 73 65 20 3d      @response =
1350: 20 52 65 73 70 6f 6e 73 65 2e 6e 65 77 0a 3c 2f  Response.new.</
1360: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1370: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1380: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1390: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
13a0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
13b0: 20 20 20 20 20 40 70 61 72 61 6d 73 20 20 20 3d      @params   =
13c0: 20 69 6e 64 69 66 66 65 72 65 6e 74 5f 70 61 72  indifferent_par
13d0: 61 6d 73 28 40 72 65 71 75 65 73 74 2e 70 61 72 ams(@request.par
13e0: 61 6d 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ams).</code></li
13f0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1400: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1410: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1420: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1430: 3c 63 6f 64 65 3e 20 20 20 20 20 20 74 65 6d 70 <code>      temp
1440: 6c 61 74 65 5f 63 61 63 68 65 2e 63 6c 65 61 72 late_cache.clear
1450: 20 69 66 20 73 65 74 74 69 6e 67 73 2e 72 65 6c  if settings.rel
1460: 6f 61 64 5f 74 65 6d 70 6c 61 74 65 73 0a 3c 2f oad_templates.</
1470: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1480: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1490: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
14a0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
14b0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
14c0: 20 20 20 20 20 66 6f 72 63 65 5f 65 6e 63 6f 64      force_encod
14d0: 69 6e 67 28 40 70 61 72 61 6d 73 29 0a 3c 2f 63 ing(@params).</c
14e0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
14f0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1500: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1510: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1520: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1530: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1540: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1550: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1560: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1570: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1580: 20 20 20 20 20 20 40 72 65 73 70 6f 6e 73 65 5b       @response[
1590: 26 23 78 32 37 3b 43 6f 6e 74 65 6e 74 2d 54 79 &#x27;Content-Ty
15a0: 70 65 26 23 78 32 37 3b 5d 20 3d 20 6e 69 6c 0a pe&#x27;] = nil.
15b0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
15c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
15d0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
15e0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
15f0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
1600: 3c 6f 6c 20 73 74 61 72 74 3d 22 37 39 34 22 20 <ol start="794" 
1610: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 class="context" 
1620: 69 64 3d 22 32 35 22 0a 20 20 20 20 20 20 20 20 id="25".        
1630: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
1640: 6b 3d 22 74 6f 67 67 6c 65 28 32 35 29 3b 22 3e k="toggle(25);">
1650: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1660: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74  <li class="cont
1670: 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f ext-line" id="co
1680: 6e 74 65 78 74 2d 32 35 22 3e 3c 63 6f 64 65 3e ntext-25"><code>
1690: 20 20 20 20 20 20 69 6e 76 6f 6b 65 20 7b 20 64       invoke { d
16a0: 69 73 70 61 74 63 68 21 20 7d 3c 2f 63 6f 64 65 ispatch! }</code
16b0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
16c0: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20      </ol>..    
16d0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
16e0: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
16f0: 72 74 3d 22 37 39 35 22 20 63 6c 61 73 73 3d 22 rt="795" class="
1700: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 post-context".  
1710: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1720: 69 64 3d 22 70 6f 73 74 2d 32 35 22 20 6f 6e 63 id="post-25" onc
1730: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 35 29 lick="toggle(25)
1740: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
1750: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1760: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1770: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
1780: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 69 e"><code>      i
1790: 6e 76 6f 6b 65 20 7b 20 65 72 72 6f 72 5f 62 6c nvoke { error_bl
17a0: 6f 63 6b 21 28 72 65 73 70 6f 6e 73 65 2e 73 74 ock!(response.st
17b0: 61 74 75 73 29 20 7d 0a 3c 2f 63 6f 64 65 3e 3c atus) }.</code><
17c0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
17d0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
17e0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
17f0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1800: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
1810: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1820: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1830: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1840: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
1850: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1860: 20 20 20 75 6e 6c 65 73 73 20 40 72 65 73 70 6f    unless @respo
1870: 6e 73 65 5b 26 23 78 32 37 3b 43 6f 6e 74 65 6e nse[&#x27;Conten
1880: 74 2d 54 79 70 65 26 23 78 32 37 3b 5d 0a 3c 2f t-Type&#x27;].</
1890: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
18a0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
18b0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
18c0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
18d0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
18e0: 20 20 20 20 20 20 20 20 69 66 20 41 72 72 61 79         if Array
18f0: 20 3d 3d 3d 20 62 6f 64 79 20 61 6e 64 20 62 6f  === body and bo
1900: 64 79 5b 30 5d 2e 72 65 73 70 6f 6e 64 5f 74 6f dy[0].respond_to
1910: 3f 20 3a 63 6f 6e 74 65 6e 74 5f 74 79 70 65 0a ? :content_type.
1920: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1930: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1940: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1950: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1960: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1970: 65 3e 20 20 20 20 20 20 20 20 20 20 63 6f 6e 74 e>          cont
1980: 65 6e 74 5f 74 79 70 65 20 62 6f 64 79 5b 30 5d ent_type body[0]
1990: 2e 63 6f 6e 74 65 6e 74 5f 74 79 70 65 0a 3c 2f .content_type.</
19a0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
19b0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
19c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
19d0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
19e0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
19f0: 20 20 20 20 20 20 20 20 65 6c 73 65 0a 3c 2f 63         else.</c
1a00: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1a10: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1a20: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1a30: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
1a40: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
1a50: 20 20 20 20 20 20 20 20 20 63 6f 6e 74 65 6e 74          content
1a60: 5f 74 79 70 65 20 3a 68 74 6d 6c 0a 3c 2f 63 6f _type :html.</co
1a70: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1a80: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1a90: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
1aa0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1ab0: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
1ac0: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
1ad0: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
1ae0: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
1af0: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
1b00: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
1b10: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1b20: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
1b30: 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 o framework">.  
1b40: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
1b50: 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 e>&#x2F;Users&#x
1b60: 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 2F;kareemgrant&#
1b70: 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 x2F;.rvm&#x2F;ge
1b80: 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 ms&#x2F;ruby-1.9
1b90: 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f .3-p194@traffic_
1ba0: 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 spy&#x2F;gems&#x
1bb0: 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 2F;sinatra-1.3.5
1bc0: 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 &#x2F;lib&#x2F;s
1bd0: 69 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 inatra&#x2F;base
1be0: 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 .rb</code> in.  
1bf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
1c00: 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c ode><strong>call
1c10: 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e </strong></code>
1c20: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
1c30: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 i>..            
1c40: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 <li class="code 
1c50: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
1c60: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1c70: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
1c80: 72 74 3d 22 37 37 33 22 0a 20 20 20 20 20 20 20 rt="773".       
1c90: 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73            class
1ca0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 ="pre-context" i
1cb0: 64 3d 22 70 72 65 2d 32 36 22 0a 20 20 20 20 20 d="pre-26".     
1cc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
1cd0: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 36 29 lick="toggle(26)
1ce0: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
1cf0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1d00: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1d10: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
1d20: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 61 "><code>      @a
1d30: 70 70 20 3d 20 61 70 70 0a 3c 2f 63 6f 64 65 3e pp = app.</code>
1d40: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
1d50: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1d60: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1d70: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
1d80: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1d90: 40 74 65 6d 70 6c 61 74 65 5f 63 61 63 68 65 20 @template_cache 
1da0: 3d 20 54 69 6c 74 3a 3a 43 61 63 68 65 2e 6e 65 = Tilt::Cache.ne
1db0: 77 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 w.</code></li>. 
1dc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1dd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1de0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1df0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1e00: 64 65 3e 20 20 20 20 20 20 79 69 65 6c 64 20 73 de>      yield s
1e10: 65 6c 66 20 69 66 20 62 6c 6f 63 6b 5f 67 69 76 elf if block_giv
1e20: 65 6e 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e en?.</code></li>
1e30: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1e40: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1e50: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
1e60: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1e70: 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 code>    end.</c
1e80: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1e90: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1ea0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1eb0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1ec0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1ed0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1ee0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1ef0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1f00: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1f10: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1f20: 20 20 20 20 23 20 52 61 63 6b 20 63 61 6c 6c 20     # Rack call 
1f30: 69 6e 74 65 72 66 61 63 65 2e 0a 3c 2f 63 6f 64 interface..</cod
1f40: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1f50: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1f60: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1f70: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
1f80: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1f90: 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f def call(env).</
1fa0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1fb0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1fc0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
1fd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a               ..
1fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
1ff0: 6c 20 73 74 61 72 74 3d 22 37 38 30 22 20 63 6c l start="780" cl
2000: 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 ass="context" id
2010: 3d 22 32 36 22 0a 20 20 20 20 20 20 20 20 20 20 ="26".          
2020: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
2030: 22 74 6f 67 67 6c 65 28 32 36 29 3b 22 3e 0a 20 "toggle(26);">. 
2040: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
2050: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 li class="contex
2060: 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 t-line" id="cont
2070: 65 78 74 2d 32 36 22 3e 3c 63 6f 64 65 3e 20 20 ext-26"><code>  
2080: 20 20 20 20 64 75 70 2e 63 61 6c 6c 21 28 65 6e     dup.call!(en
2090: 76 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 v)</code></li>. 
20a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
20b0: 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 l>..            
20c0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
20d0: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 37 38 31 22  <ol start="781"
20e0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
20f0: 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 text".          
2100: 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74         id="post
2110: 2d 32 36 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f -26" onclick="to
2120: 67 67 6c 65 28 32 36 29 3b 22 3e 0a 20 20 20 20 ggle(26);">.    
2130: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2140: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2150: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
2160: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2170: 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e >    end.</code>
2180: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2190: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
21a0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
21b0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
21c0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
21d0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
21e0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
21f0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2200: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
2210: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2220: 20 20 61 74 74 72 5f 61 63 63 65 73 73 6f 72 20   attr_accessor 
2230: 3a 65 6e 76 2c 20 3a 72 65 71 75 65 73 74 2c 20 :env, :request, 
2240: 3a 72 65 73 70 6f 6e 73 65 2c 20 3a 70 61 72 61 :response, :para
2250: 6d 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ms.</code></li>.
2260: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2270: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2280: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
2290: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
22a0: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
22b0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
22c0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
22d0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
22e0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
22f0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 "><code>    def 
2300: 63 61 6c 6c 21 28 65 6e 76 29 20 23 20 3a 6e 6f call!(env) # :no
2310: 64 6f 63 3a 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 doc:.</code></li
2320: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2330: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2340: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
2350: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
2360: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 65 6e ><code>      @en
2370: 76 20 20 20 20 20 20 3d 20 65 6e 76 0a 3c 2f 63 v      = env.</c
2380: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2390: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
23a0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
23b0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
23c0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
23d0: 20 20 20 20 20 40 72 65 71 75 65 73 74 20 20 3d      @request  =
23e0: 20 52 65 71 75 65 73 74 2e 6e 65 77 28 65 6e 76  Request.new(env
23f0: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
2400: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2410: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
2420: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
2430: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2440: 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65  <div class="cle
2450: 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 ar"></div>.     
2460: 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20        </li>..  
2470: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
2480: 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20   .      .      
2490: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
24a0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61   <li class="fra
24b0: 6d 65 2d 69 6e 66 6f 20 73 79 73 74 65 6d 22 3e me-info system">
24c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
24d0: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
24e0: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
24f0: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
2500: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
2510: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
2520: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
2530: 26 23 78 32 46 3b 72 61 63 6b 2d 70 72 6f 74 65 &#x2F;rack-prote
2540: 63 74 69 6f 6e 2d 31 2e 34 2e 30 26 23 78 32 46 ction-1.4.0&#x2F
2550: 3b 6c 69 62 26 23 78 32 46 3b 72 61 63 6b 26 23 ;lib&#x2F;rack&#
2560: 78 32 46 3b 70 72 6f 74 65 63 74 69 6f 6e 26 23 x2F;protection&#
2570: 78 32 46 3b 78 73 73 5f 68 65 61 64 65 72 2e 72 x2F;xss_header.r
2580: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
2590: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
25a0: 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f e><strong>call</
25b0: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
25c0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
25d0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
25e0: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 i class="code sy
25f0: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
2600: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2610: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31     <ol start="1
2620: 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 1".             
2630: 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d      class="pre-
2640: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 context" id="pre
2650: 2d 32 37 22 0a 20 20 20 20 20 20 20 20 20 20 20 -27".           
2660: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
2670: 74 6f 67 67 6c 65 28 32 37 29 3b 22 3e 0a 20 20 toggle(27);">.  
2680: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2690: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
26a0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
26b0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
26c0: 65 3e 20 20 20 20 23 0a 3c 2f 63 6f 64 65 3e 3c e>    #.</code><
26d0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
26e0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
26f0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2700: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
2710: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 4f e"><code>    # O
2720: 70 74 69 6f 6e 73 3a 0a 3c 2f 63 6f 64 65 3e 3c ptions:.</code><
2730: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
2740: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2750: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2760: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
2770: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 78 e"><code>    # x
2780: 73 73 5f 6d 6f 64 65 3a 3a 20 48 6f 77 20 74 68 ss_mode:: How th
2790: 65 20 62 72 6f 77 73 65 72 20 73 68 6f 75 6c 64 e browser should
27a0: 20 70 72 65 76 65 6e 74 20 74 68 65 20 61 74 74  prevent the att
27b0: 61 63 6b 20 28 64 65 66 61 75 6c 74 3a 20 3a 62 ack (default: :b
27c0: 6c 6f 63 6b 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c lock).</code></l
27d0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
27e0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
27f0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2800: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
2810: 3e 3c 63 6f 64 65 3e 20 20 20 20 63 6c 61 73 73 ><code>    class
2820: 20 58 53 53 48 65 61 64 65 72 20 26 6c 74 3b 20  XSSHeader &lt; 
2830: 42 61 73 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 Base.</code></li
2840: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2850: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2860: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2870: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2880: 3c 63 6f 64 65 3e 20 20 20 20 20 20 64 65 66 61 <code>      defa
2890: 75 6c 74 5f 6f 70 74 69 6f 6e 73 20 3a 78 73 73 ult_options :xss
28a0: 5f 6d 6f 64 65 20 3d 26 67 74 3b 20 3a 62 6c 6f _mode =&gt; :blo
28b0: 63 6b 2c 20 3a 6e 6f 73 6e 69 66 66 20 3d 26 67 ck, :nosniff =&g
28c0: 74 3b 20 74 72 75 65 0a 3c 2f 63 6f 64 65 3e 3c t; true.</code><
28d0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
28e0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
28f0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2900: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
2910: 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 e"><code>.</code
2920: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2930: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2940: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2950: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2960: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2970: 20 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c  def call(env).<
2980: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2990: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
29a0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
29b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
29c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
29d0: 6f 6c 20 73 74 61 72 74 3d 22 31 38 22 20 63 6c ol start="18" cl
29e0: 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 ass="context" id
29f0: 3d 22 32 37 22 0a 20 20 20 20 20 20 20 20 20 20 ="27".          
2a00: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
2a10: 22 74 6f 67 67 6c 65 28 32 37 29 3b 22 3e 0a 20 "toggle(27);">. 
2a20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
2a30: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 li class="contex
2a40: 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 t-line" id="cont
2a50: 65 78 74 2d 32 37 22 3e 3c 63 6f 64 65 3e 20 20 ext-27"><code>  
2a60: 20 20 20 20 20 20 73 74 61 74 75 73 2c 20 68 65       status, he
2a70: 61 64 65 72 73 2c 20 62 6f 64 79 20 3d 20 40 61 aders, body = @a
2a80: 70 70 2e 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f pp.call(env)</co
2a90: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2aa0: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
2ab0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2ac0: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
2ad0: 74 61 72 74 3d 22 31 39 22 20 63 6c 61 73 73 3d tart="19" class=
2ae0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 "post-context". 
2af0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2b00: 20 69 64 3d 22 70 6f 73 74 2d 32 37 22 20 6f 6e  id="post-27" on
2b10: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 37 click="toggle(27
2b20: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
2b30: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2b40: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2b50: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
2b60: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2b70: 20 20 68 65 61 64 65 72 73 5b 26 23 78 32 37 3b   headers[&#x27;
2b80: 58 2d 58 53 53 2d 50 72 6f 74 65 63 74 69 6f 6e X-XSS-Protection
2b90: 26 23 78 32 37 3b 5d 20 20 20 20 20 20 20 7c 7c &#x27;]       ||
2ba0: 3d 20 26 71 75 6f 74 3b 31 3b 20 6d 6f 64 65 3d = &quot;1; mode=
2bb0: 23 7b 6f 70 74 69 6f 6e 73 5b 3a 78 73 73 5f 6d #{options[:xss_m
2bc0: 6f 64 65 5d 7d 26 71 75 6f 74 3b 20 69 66 20 68 ode]}&quot; if h
2bd0: 74 6d 6c 3f 20 68 65 61 64 65 72 73 0a 3c 2f 63 tml? headers.</c
2be0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2bf0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2c00: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2c10: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2c20: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2c30: 20 20 20 20 20 20 20 68 65 61 64 65 72 73 5b 26        headers[&
2c40: 23 78 32 37 3b 58 2d 43 6f 6e 74 65 6e 74 2d 54 #x27;X-Content-T
2c50: 79 70 65 2d 4f 70 74 69 6f 6e 73 26 23 78 32 37 ype-Options&#x27
2c60: 3b 5d 20 7c 7c 3d 20 26 23 78 32 37 3b 6e 6f 73 ;] ||= &#x27;nos
2c70: 6e 69 66 66 26 23 78 32 37 3b 20 20 20 20 20 20 niff&#x27;      
2c80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2c90: 20 69 66 20 6f 70 74 69 6f 6e 73 5b 3a 6e 6f 73  if options[:nos
2ca0: 6e 69 66 66 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c niff].</code></l
2cb0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2cc0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2cd0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2ce0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2cf0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2d00: 5b 73 74 61 74 75 73 2c 20 68 65 61 64 65 72 73 [status, headers
2d10: 2c 20 62 6f 64 79 5d 0a 3c 2f 63 6f 64 65 3e 3c , body].</code><
2d20: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
2d30: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2d40: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2d50: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
2d60: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2d70: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
2d80: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2d90: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2da0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
2db0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
2dc0: 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f <code>    end.</
2dd0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2de0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2df0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2e00: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2e10: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2e20: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
2e30: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2e40: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2e50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2e60: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2e70: 22 3e 3c 63 6f 64 65 3e 65 6e 64 0a 3c 2f 63 6f "><code>end.</co
2e80: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2e90: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2ea0: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
2eb0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2ec0: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
2ed0: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
2ee0: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
2ef0: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
2f00: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
2f10: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
2f20: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2f30: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
2f40: 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 o system">.     
2f50: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
2f60: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
2f70: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
2f80: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
2f90: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
2fa0: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
2fb0: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
2fc0: 72 61 63 6b 2d 70 72 6f 74 65 63 74 69 6f 6e 2d rack-protection-
2fd0: 31 2e 34 2e 30 26 23 78 32 46 3b 6c 69 62 26 23 1.4.0&#x2F;lib&#
2fe0: 78 32 46 3b 72 61 63 6b 26 23 78 32 46 3b 70 72 x2F;rack&#x2F;pr
2ff0: 6f 74 65 63 74 69 6f 6e 26 23 78 32 46 3b 70 61 otection&#x2F;pa
3000: 74 68 5f 74 72 61 76 65 72 73 61 6c 2e 72 62 3c th_traversal.rb<
3010: 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 /code> in.      
3020: 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e           <code>
3030: 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f 73 74 <strong>call</st
3040: 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 rong></code>.   
3050: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
3060: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3070: 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 73 74 class="code syst
3080: 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 em">.           
3090: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
30a0: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 39 22 0a   <ol start="9".
30b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
30c0: 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e   class="pre-con
30d0: 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d 32 38 text" id="pre-28
30e0: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
30f0: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
3100: 67 6c 65 28 32 38 29 3b 22 3e 0a 20 20 20 20 20 gle(28);">.     
3110: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3120: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3130: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3140: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3150: 20 20 20 23 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69    #.</code></li
3160: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3170: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3180: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
3190: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
31a0: 3c 63 6f 64 65 3e 20 20 20 20 23 20 55 6e 65 73 <code>    # Unes
31b0: 63 61 70 65 73 20 26 23 78 32 37 3b 26 23 78 32 capes &#x27;&#x2
31c0: 46 3b 26 23 78 32 37 3b 20 61 6e 64 20 26 23 78 F;&#x27; and &#x
31d0: 32 37 3b 2e 26 23 78 32 37 3b 2c 20 65 78 70 61 27;.&#x27;, expa
31e0: 6e 64 73 20 2b 70 61 74 68 5f 69 6e 66 6f 2b 2e nds +path_info+.
31f0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3200: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3210: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3220: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3230: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3240: 65 3e 20 20 20 20 23 20 54 68 75 73 20 26 6c 74 e>    # Thus &lt
3250: 3b 74 74 26 67 74 3b 47 45 54 20 26 23 78 32 46 ;tt&gt;GET &#x2F
3260: 3b 66 6f 6f 26 23 78 32 46 3b 25 32 65 25 32 65 ;foo&#x2F;%2e%2e
3270: 25 32 66 62 61 72 26 6c 74 3b 26 23 78 32 46 3b %2fbar&lt;&#x2F;
3280: 74 74 26 67 74 3b 20 62 65 63 6f 6d 65 73 20 26 tt&gt; becomes &
3290: 6c 74 3b 74 74 26 67 74 3b 47 45 54 20 26 23 78 lt;tt&gt;GET &#x
32a0: 32 46 3b 62 61 72 26 6c 74 3b 26 23 78 32 46 3b 2F;bar&lt;&#x2F;
32b0: 74 74 26 67 74 3b 2e 0a 3c 2f 63 6f 64 65 3e 3c tt&gt;..</code><
32c0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
32d0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
32e0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
32f0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
3300: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 63 6c 61 e"><code>    cla
3310: 73 73 20 50 61 74 68 54 72 61 76 65 72 73 61 6c ss PathTraversal
3320: 20 26 6c 74 3b 20 42 61 73 65 0a 3c 2f 63 6f 64  &lt; Base.</cod
3330: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3340: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3350: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3360: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
3370: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3380: 20 20 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a   def call(env).
3390: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
33a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
33b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
33c0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
33d0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
33e0: 3e 20 20 20 20 20 20 20 20 70 61 74 68 5f 77 61 >        path_wa
33f0: 73 20 20 20 20 20 20 20 20 20 3d 20 65 6e 76 5b s         = env[
3400: 26 71 75 6f 74 3b 50 41 54 48 5f 49 4e 46 4f 26 &quot;PATH_INFO&
3410: 71 75 6f 74 3b 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f quot;].</code></
3420: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
3430: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3440: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3450: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3460: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
3470: 65 6e 76 5b 26 71 75 6f 74 3b 50 41 54 48 5f 49 env[&quot;PATH_I
3480: 4e 46 4f 26 71 75 6f 74 3b 5d 20 3d 20 63 6c 65 NFO&quot;] = cle
3490: 61 6e 75 70 20 70 61 74 68 5f 77 61 73 20 69 66 anup path_was if
34a0: 20 70 61 74 68 5f 77 61 73 20 26 61 6d 70 3b 26  path_was &amp;&
34b0: 61 6d 70 3b 20 21 70 61 74 68 5f 77 61 73 2e 65 amp; !path_was.e
34c0: 6d 70 74 79 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c mpty?.</code></l
34d0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
34e0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
34f0: 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20   </ol>.        
3500: 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20       ..        
3510: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
3520: 22 31 36 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 "16" class="cont
3530: 65 78 74 22 20 69 64 3d 22 32 38 22 0a 20 20 20 ext" id="28".   
3540: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f                o
3550: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 32 nclick="toggle(2
3560: 38 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 8);">.          
3570: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3580: 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 "context-line" i
3590: 64 3d 22 63 6f 6e 74 65 78 74 2d 32 38 22 3e 3c d="context-28"><
35a0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 61 70 70 code>        app
35b0: 2e 63 61 6c 6c 20 65 6e 76 3c 2f 63 6f 64 65 3e .call env</code>
35c0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
35d0: 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20     </ol>..     
35e0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
35f0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
3600: 74 3d 22 31 37 22 20 63 6c 61 73 73 3d 22 70 6f t="17" class="po
3610: 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 st-context".    
3620: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64               id
3630: 3d 22 70 6f 73 74 2d 32 38 22 20 6f 6e 63 6c 69 ="post-28" oncli
3640: 63 6b 3d 22 74 6f 67 67 6c 65 28 32 38 29 3b 22 ck="toggle(28);"
3650: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3660: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3670: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
3680: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
3690: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 73 ><code>      ens
36a0: 75 72 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ure.</code></li>
36b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
36c0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
36d0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
36e0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
36f0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 65 6e <code>        en
3700: 76 5b 26 71 75 6f 74 3b 50 41 54 48 5f 49 4e 46 v[&quot;PATH_INF
3710: 4f 26 71 75 6f 74 3b 5d 20 3d 20 70 61 74 68 5f O&quot;] = path_
3720: 77 61 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e was.</code></li>
3730: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3740: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3750: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3760: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3770: 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a <code>      end.
3780: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3790: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
37a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
37b0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
37c0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
37d0: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
37e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
37f0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3800: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
3810: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3820: 63 6f 64 65 3e 20 20 20 20 20 20 64 65 66 20 63 code>      def c
3830: 6c 65 61 6e 75 70 28 70 61 74 68 29 0a 3c 2f 63 leanup(path).</c
3840: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
3850: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3860: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3870: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
3880: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3890: 20 20 20 20 20 20 20 70 61 72 74 73 20 20 20 20        parts    
38a0: 20 3d 20 5b 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c  = [].</code></l
38b0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
38c0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
38d0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
38e0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
38f0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
3900: 75 6e 65 73 63 61 70 65 64 20 3d 20 70 61 74 68 unescaped = path
3910: 2e 67 73 75 62 28 26 23 78 32 37 3b 25 32 65 26 .gsub(&#x27;%2e&
3920: 23 78 32 37 3b 2c 20 26 23 78 32 37 3b 2e 26 23 #x27;, &#x27;.&#
3930: 78 32 37 3b 29 2e 67 73 75 62 28 26 23 78 32 37 x27;).gsub(&#x27
3940: 3b 25 32 66 26 23 78 32 37 3b 2c 20 26 23 78 32 ;%2f&#x27;, &#x2
3950: 37 3b 26 23 78 32 46 3b 26 23 78 32 37 3b 29 0a 7;&#x2F;&#x27;).
3960: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3970: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3980: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
3990: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
39a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
39b0: 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 div class="clear
39c0: 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 "></div>.       
39d0: 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20      </li>..    
39e0: 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20       ..        
39f0: 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 .      .        
3a00: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
3a10: 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 <li class="frame
3a20: 2d 69 6e 66 6f 20 73 79 73 74 65 6d 22 3e 0a 20 -info system">. 
3a30: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
3a40: 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 de>&#x2F;Users&#
3a50: 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 x2F;kareemgrant&
3a60: 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 #x2F;.rvm&#x2F;g
3a70: 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e ems&#x2F;ruby-1.
3a80: 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 9.3-p194@traffic
3a90: 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 _spy&#x2F;gems&#
3aa0: 78 32 46 3b 72 61 63 6b 2d 70 72 6f 74 65 63 74 x2F;rack-protect
3ab0: 69 6f 6e 2d 31 2e 34 2e 30 26 23 78 32 46 3b 6c ion-1.4.0&#x2F;l
3ac0: 69 62 26 23 78 32 46 3b 72 61 63 6b 26 23 78 32 ib&#x2F;rack&#x2
3ad0: 46 3b 70 72 6f 74 65 63 74 69 6f 6e 26 23 78 32 F;protection&#x2
3ae0: 46 3b 6a 73 6f 6e 5f 63 73 72 66 2e 72 62 3c 2f F;json_csrf.rb</
3af0: 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 code> in.       
3b00: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c          <code><
3b10: 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f 73 74 72 strong>call</str
3b20: 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 ong></code>.    
3b30: 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20         </li>.. 
3b40: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3b50: 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 73 74 65 lass="code syste
3b60: 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 m">.            
3b70: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3b80: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 31 22 0a  <ol start="11".
3b90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3ba0: 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e   class="pre-con
3bb0: 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d 32 39 text" id="pre-29
3bc0: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
3bd0: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
3be0: 67 6c 65 28 32 39 29 3b 22 3e 0a 20 20 20 20 20 gle(29);">.     
3bf0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3c00: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3c10: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3c20: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3c30: 20 20 20 23 20 41 72 72 61 79 20 70 72 6f 74 6f    # Array proto
3c40: 74 79 70 65 20 68 61 73 20 62 65 65 6e 20 70 61 type has been pa
3c50: 74 63 68 65 64 20 74 6f 20 74 72 61 63 6b 20 64 tched to track d
3c60: 61 74 61 2e 20 43 68 65 63 6b 73 20 74 68 65 20 ata. Checks the 
3c70: 72 65 66 65 72 72 65 72 0a 3c 2f 63 6f 64 65 3e referrer.</code>
3c80: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3c90: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3ca0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3cb0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
3cc0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 20 ne"><code>    # 
3cd0: 65 76 65 6e 20 6f 6e 20 47 45 54 20 72 65 71 75 even on GET requ
3ce0: 65 73 74 73 20 69 66 20 74 68 65 20 63 6f 6e 74 ests if the cont
3cf0: 65 6e 74 20 74 79 70 65 20 69 73 20 4a 53 4f 4e ent type is JSON
3d00: 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ..</code></li>. 
3d10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3d30: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
3d40: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3d50: 64 65 3e 20 20 20 20 63 6c 61 73 73 20 4a 73 6f de>    class Jso
3d60: 6e 43 73 72 66 20 26 6c 74 3b 20 42 61 73 65 0a nCsrf &lt; Base.
3d70: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3d80: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3d90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3da0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
3db0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3dc0: 3e 20 20 20 20 20 20 64 65 66 61 75 6c 74 5f 72 >      default_r
3dd0: 65 61 63 74 69 6f 6e 20 3a 64 65 6e 79 0a 3c 2f eaction :deny.</
3de0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3df0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3e00: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3e10: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3e20: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a xt-line"><code>.
3e30: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3e40: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3e50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3e60: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
3e70: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3e80: 3e 20 20 20 20 20 20 64 65 66 20 63 61 6c 6c 28 >      def call(
3e90: 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 env).</code></li
3ea0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3eb0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3ec0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
3ed0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
3ee0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 72 65 <code>        re
3ef0: 71 75 65 73 74 20 20 20 20 20 20 20 20 20 20 20 quest           
3f00: 20 20 20 20 3d 20 52 65 71 75 65 73 74 2e 6e 65     = Request.ne
3f10: 77 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f w(env).</code></
3f20: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
3f30: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3f40: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
3f50: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
3f60: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
3f70: 3d 22 31 38 22 20 63 6c 61 73 73 3d 22 63 6f 6e ="18" class="con
3f80: 74 65 78 74 22 20 69 64 3d 22 32 39 22 0a 20 20 text" id="29".  
3f90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3fa0: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
3fb0: 32 39 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 29);">.         
3fc0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3fd0: 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 ="context-line" 
3fe0: 69 64 3d 22 63 6f 6e 74 65 78 74 2d 32 39 22 3e id="context-29">
3ff0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 73 74 <code>        st
<= Recv data, 16384 bytes (0x4000)
0000: 61 74 75 73 2c 20 68 65 61 64 65 72 73 2c 20 62 atus, headers, b
0010: 6f 64 79 20 3d 20 61 70 70 2e 63 61 6c 6c 28 65 ody = app.call(e
0020: 6e 76 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nv)</code></li>.
0030: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
0040: 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 ol>..           
0050: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0060: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 39 22   <ol start="19"
0070: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0080: 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 text".          
0090: 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74         id="post
00a0: 2d 32 39 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f -29" onclick="to
00b0: 67 67 6c 65 28 32 39 29 3b 22 3e 0a 20 20 20 20 ggle(29);">.    
00c0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
00d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
00e0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
00f0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0100: 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 >.</code></li>. 
0110: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0120: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0130: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
0140: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0150: 6f 64 65 3e 20 20 20 20 20 20 20 20 69 66 20 68 ode>        if h
0160: 61 73 5f 76 65 63 74 6f 72 3f 20 72 65 71 75 65 as_vector? reque
0170: 73 74 2c 20 68 65 61 64 65 72 73 0a 3c 2f 63 6f st, headers.</co
0180: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0190: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
01a0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
01b0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
01c0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
01d0: 20 20 20 20 20 20 20 20 77 61 72 6e 20 65 6e 76         warn env
01e0: 2c 20 26 71 75 6f 74 3b 61 74 74 61 63 6b 20 70 , &quot;attack p
01f0: 72 65 76 65 6e 74 65 64 20 62 79 20 23 7b 73 65 revented by #{se
0200: 6c 66 2e 63 6c 61 73 73 7d 26 71 75 6f 74 3b 0a lf.class}&quot;.
0210: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0220: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0230: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
0240: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
0250: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0260: 65 3e 20 20 20 20 20 20 20 20 20 20 72 65 61 63 e>          reac
0270: 74 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f t(env).</code></
0280: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0290: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
02a0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
02b0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
02c0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
02d0: 20 65 6c 73 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c  else.</code></l
02e0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
02f0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0300: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0310: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
0320: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
0330: 20 20 5b 73 74 61 74 75 73 2c 20 68 65 61 64 65   [status, heade
0340: 72 73 2c 20 62 6f 64 79 5d 0a 3c 2f 63 6f 64 65 rs, body].</code
0350: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0360: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0370: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0380: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
0390: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
03a0: 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c     end.</code><
03b0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
03c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
03d0: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
03e0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
03f0: 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73        <div clas
0400: 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e s="clear"></div>
0410: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
0420: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a i>..          ..
0430: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a         .      .
0440: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
0450: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0460: 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 s="frame-info sy
0470: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
0480: 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46      <code>&#x2F
0490: 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 ;Users&#x2F;kare
04a0: 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 emgrant&#x2F;.rv
04b0: 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 m&#x2F;gems&#x2F
04c0: 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 ;ruby-1.9.3-p194
04d0: 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 @traffic_spy&#x2
04e0: 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 61 63 6b F;gems&#x2F;rack
04f0: 2d 70 72 6f 74 65 63 74 69 6f 6e 2d 31 2e 34 2e -protection-1.4.
0500: 30 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 0&#x2F;lib&#x2F;
0510: 72 61 63 6b 26 23 78 32 46 3b 70 72 6f 74 65 63 rack&#x2F;protec
0520: 74 69 6f 6e 26 23 78 32 46 3b 62 61 73 65 2e 72 tion&#x2F;base.r
0530: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
0540: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
0550: 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f e><strong>call</
0560: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
0570: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
0580: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
0590: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 i class="code sy
05a0: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
05b0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
05c0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 34     <ol start="4
05d0: 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 1".             
05e0: 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d      class="pre-
05f0: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 context" id="pre
0600: 2d 33 30 22 0a 20 20 20 20 20 20 20 20 20 20 20 -30".           
0610: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
0620: 74 6f 67 67 6c 65 28 33 30 29 3b 22 3e 0a 20 20 toggle(30);">.  
0630: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0640: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0650: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
0660: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0670: 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f e>      end.</co
0680: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0690: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
06a0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
06b0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
06c0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
06d0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
06e0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
06f0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0700: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
0710: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0720: 20 20 20 20 20 64 65 66 20 63 61 6c 6c 28 65 6e      def call(en
0730: 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a v).</code></li>.
0740: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0750: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0760: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0770: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0780: 6f 64 65 3e 20 20 20 20 20 20 20 20 75 6e 6c 65 ode>        unle
0790: 73 73 20 61 63 63 65 70 74 73 3f 20 65 6e 76 0a ss accepts? env.
07a0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
07b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
07c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
07d0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
07e0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
07f0: 3e 20 20 20 20 20 20 20 20 20 20 77 61 72 6e 20 >          warn 
0800: 65 6e 76 2c 20 26 71 75 6f 74 3b 61 74 74 61 63 env, &quot;attac
0810: 6b 20 70 72 65 76 65 6e 74 65 64 20 62 79 20 23 k prevented by #
0820: 7b 73 65 6c 66 2e 63 6c 61 73 73 7d 26 71 75 6f {self.class}&quo
0830: 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a t;.</code></li>.
0840: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0850: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0860: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
0870: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0880: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 72 65 ode>          re
0890: 73 75 6c 74 20 3d 20 72 65 61 63 74 20 65 6e 76 sult = react env
08a0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
08b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
08c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
08d0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
08e0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
08f0: 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c 2f e>        end.</
0900: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0910: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0920: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
0930: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a               ..
0940: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
0950: 6c 20 73 74 61 72 74 3d 22 34 38 22 20 63 6c 61 l start="48" cla
0960: 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d ss="context" id=
0970: 22 33 30 22 0a 20 20 20 20 20 20 20 20 20 20 20 "30".           
0980: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
0990: 74 6f 67 67 6c 65 28 33 30 29 3b 22 3e 0a 20 20 toggle(30);">.  
09a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
09b0: 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 i class="context
09c0: 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 -line" id="conte
09d0: 78 74 2d 33 30 22 3e 3c 63 6f 64 65 3e 20 20 20 xt-30"><code>   
09e0: 20 20 20 20 20 72 65 73 75 6c 74 20 6f 72 20 61      result or a
09f0: 70 70 2e 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f pp.call(env)</co
0a00: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0a10: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
0a20: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0a30: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
0a40: 74 61 72 74 3d 22 34 39 22 20 63 6c 61 73 73 3d tart="49" class=
0a50: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 "post-context". 
0a60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0a70: 20 69 64 3d 22 70 6f 73 74 2d 33 30 22 20 6f 6e  id="post-30" on
0a80: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 30 click="toggle(30
0a90: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
0aa0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0ab0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0ac0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
0ad0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
0ae0: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
0af0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0b00: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0b10: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
0b20: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
0b30: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
0b40: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0b50: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0b60: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0b70: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
0b80: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 64 e"><code>      d
0b90: 65 66 20 72 65 61 63 74 28 65 6e 76 29 0a 3c 2f ef react(env).</
0ba0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0bb0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0bc0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0bd0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
0be0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
0bf0: 20 20 20 20 20 20 20 20 72 65 73 75 6c 74 20 3d         result =
0c00: 20 73 65 6e 64 28 6f 70 74 69 6f 6e 73 5b 3a 72  send(options[:r
0c10: 65 61 63 74 69 6f 6e 5d 2c 20 65 6e 76 29 0a 3c eaction], env).<
0c20: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0c30: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0c40: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0c50: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0c60: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0c70: 3e 20 20 20 20 20 20 20 20 72 65 73 75 6c 74 20 >        result 
0c80: 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72 65 73 if Array === res
0c90: 75 6c 74 20 61 6e 64 20 72 65 73 75 6c 74 2e 73 ult and result.s
0ca0: 69 7a 65 20 3d 3d 20 33 0a 3c 2f 63 6f 64 65 3e ize == 3.</code>
0cb0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0cc0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0cd0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0ce0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
0cf0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0d00: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
0d10: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0d20: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0d30: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
0d40: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
0d50: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
0d60: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0d70: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0d80: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
0d90: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0da0: 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73        <div clas
0db0: 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e s="clear"></div>
0dc0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
0dd0: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a i>..          ..
0de0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a         .      .
0df0: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
0e00: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0e10: 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 s="frame-info sy
0e20: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
0e30: 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46      <code>&#x2F
0e40: 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 ;Users&#x2F;kare
0e50: 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 emgrant&#x2F;.rv
0e60: 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 m&#x2F;gems&#x2F
0e70: 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 ;ruby-1.9.3-p194
0e80: 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 @traffic_spy&#x2
0e90: 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 61 63 6b F;gems&#x2F;rack
0ea0: 2d 70 72 6f 74 65 63 74 69 6f 6e 2d 31 2e 34 2e -protection-1.4.
0eb0: 30 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 0&#x2F;lib&#x2F;
0ec0: 72 61 63 6b 26 23 78 32 46 3b 70 72 6f 74 65 63 rack&#x2F;protec
0ed0: 74 69 6f 6e 26 23 78 32 46 3b 62 61 73 65 2e 72 tion&#x2F;base.r
0ee0: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
0ef0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
0f00: 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f e><strong>call</
0f10: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
0f20: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
0f30: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
0f40: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 i class="code sy
0f50: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
0f60: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0f70: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 34     <ol start="4
0f80: 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 1".             
0f90: 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d      class="pre-
0fa0: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 context" id="pre
0fb0: 2d 33 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 -31".           
0fc0: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
0fd0: 74 6f 67 67 6c 65 28 33 31 29 3b 22 3e 0a 20 20 toggle(31);">.  
0fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0ff0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1000: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
1010: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1020: 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f e>      end.</co
1030: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1040: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1050: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1060: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1070: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
1080: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1090: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
10a0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
10b0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
10c0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
10d0: 20 20 20 20 20 64 65 66 20 63 61 6c 6c 28 65 6e      def call(en
10e0: 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a v).</code></li>.
10f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1100: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1110: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
1120: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1130: 6f 64 65 3e 20 20 20 20 20 20 20 20 75 6e 6c 65 ode>        unle
1140: 73 73 20 61 63 63 65 70 74 73 3f 20 65 6e 76 0a ss accepts? env.
1150: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1160: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1170: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1180: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
1190: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
11a0: 3e 20 20 20 20 20 20 20 20 20 20 77 61 72 6e 20 >          warn 
11b0: 65 6e 76 2c 20 26 71 75 6f 74 3b 61 74 74 61 63 env, &quot;attac
11c0: 6b 20 70 72 65 76 65 6e 74 65 64 20 62 79 20 23 k prevented by #
11d0: 7b 73 65 6c 66 2e 63 6c 61 73 73 7d 26 71 75 6f {self.class}&quo
11e0: 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a t;.</code></li>.
11f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1200: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1210: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
1220: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1230: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 72 65 ode>          re
1240: 73 75 6c 74 20 3d 20 72 65 61 63 74 20 65 6e 76 sult = react env
1250: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1260: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1270: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1280: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
1290: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
12a0: 65 3e 20 20 20 20 20 20 20 20 65 6e 64 0a 3c 2f e>        end.</
12b0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
12c0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
12d0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
12e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a               ..
12f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
1300: 6c 20 73 74 61 72 74 3d 22 34 38 22 20 63 6c 61 l start="48" cla
1310: 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d ss="context" id=
1320: 22 33 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 "31".           
1330: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
1340: 74 6f 67 67 6c 65 28 33 31 29 3b 22 3e 0a 20 20 toggle(31);">.  
1350: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1360: 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 i class="context
1370: 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 -line" id="conte
1380: 78 74 2d 33 31 22 3e 3c 63 6f 64 65 3e 20 20 20 xt-31"><code>   
1390: 20 20 20 20 20 72 65 73 75 6c 74 20 6f 72 20 61      result or a
13a0: 70 70 2e 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f pp.call(env)</co
13b0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
13c0: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
13d0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
13e0: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
13f0: 74 61 72 74 3d 22 34 39 22 20 63 6c 61 73 73 3d tart="49" class=
1400: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 "post-context". 
1410: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1420: 20 69 64 3d 22 70 6f 73 74 2d 33 31 22 20 6f 6e  id="post-31" on
1430: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 31 click="toggle(31
1440: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
1450: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1460: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1470: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1480: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1490: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
14a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
14b0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
14c0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
14d0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
14e0: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
14f0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
1500: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1510: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1520: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
1530: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 64 e"><code>      d
1540: 65 66 20 72 65 61 63 74 28 65 6e 76 29 0a 3c 2f ef react(env).</
1550: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1560: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1570: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1580: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1590: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
15a0: 20 20 20 20 20 20 20 20 72 65 73 75 6c 74 20 3d         result =
15b0: 20 73 65 6e 64 28 6f 70 74 69 6f 6e 73 5b 3a 72  send(options[:r
15c0: 65 61 63 74 69 6f 6e 5d 2c 20 65 6e 76 29 0a 3c eaction], env).<
15d0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
15e0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
15f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1600: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
1610: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1620: 3e 20 20 20 20 20 20 20 20 72 65 73 75 6c 74 20 >        result 
1630: 69 66 20 41 72 72 61 79 20 3d 3d 3d 20 72 65 73 if Array === res
1640: 75 6c 74 20 61 6e 64 20 72 65 73 75 6c 74 2e 73 ult and result.s
1650: 69 7a 65 20 3d 3d 20 33 0a 3c 2f 63 6f 64 65 3e ize == 3.</code>
1660: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
1670: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1680: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1690: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
16a0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
16b0: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
16c0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
16d0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
16e0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
16f0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
1700: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
1710: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1720: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1730: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
1740: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1750: 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73        <div clas
1760: 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e s="clear"></div>
1770: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c .            </l
1780: 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a i>..          ..
1790: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a         .      .
17a0: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
17b0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
17c0: 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 s="frame-info sy
17d0: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
17e0: 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46      <code>&#x2F
17f0: 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 ;Users&#x2F;kare
1800: 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 emgrant&#x2F;.rv
1810: 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 m&#x2F;gems&#x2F
1820: 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 ;ruby-1.9.3-p194
1830: 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 @traffic_spy&#x2
1840: 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 61 63 6b F;gems&#x2F;rack
1850: 2d 70 72 6f 74 65 63 74 69 6f 6e 2d 31 2e 34 2e -protection-1.4.
1860: 30 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 0&#x2F;lib&#x2F;
1870: 72 61 63 6b 26 23 78 32 46 3b 70 72 6f 74 65 63 rack&#x2F;protec
1880: 74 69 6f 6e 26 23 78 32 46 3b 66 72 61 6d 65 5f tion&#x2F;frame_
1890: 6f 70 74 69 6f 6e 73 2e 72 62 3c 2f 63 6f 64 65 options.rb</code
18a0: 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 > in.           
18b0: 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f      <code><stro
18c0: 6e 67 3e 63 61 6c 6c 3c 2f 73 74 72 6f 6e 67 3e ng>call</strong>
18d0: 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 </code>.        
18e0: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
18f0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1900: 3d 22 63 6f 64 65 20 73 79 73 74 65 6d 22 3e 0a ="code system">.
1910: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1920: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
1930: 20 73 74 61 72 74 3d 22 32 34 22 0a 20 20 20 20  start="24".    
1940: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c               cl
1950: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1960: 22 20 69 64 3d 22 70 72 65 2d 33 32 22 0a 20 20 " id="pre-32".  
1970: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1980: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
1990: 33 32 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 32);">.         
19a0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
19b0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
19c0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
19d0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
19e0: 20 20 20 20 20 66 72 61 6d 65 5f 6f 70 74 69 6f      frame_optio
19f0: 6e 73 20 3d 20 6f 70 74 69 6f 6e 73 5b 3a 66 72 ns = options[:fr
1a00: 61 6d 65 5f 6f 70 74 69 6f 6e 73 5d 0a 3c 2f 63 ame_options].</c
1a10: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1a20: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1a30: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1a40: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1a50: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
1a60: 20 20 20 20 20 20 20 20 66 72 61 6d 65 5f 6f 70         frame_op
1a70: 74 69 6f 6e 73 20 3d 20 6f 70 74 69 6f 6e 73 5b tions = options[
1a80: 3a 66 72 61 6d 65 5f 6f 70 74 69 6f 6e 73 5d 2e :frame_options].
1a90: 74 6f 5f 73 2e 75 70 63 61 73 65 20 75 6e 6c 65 to_s.upcase unle
1aa0: 73 73 20 66 72 61 6d 65 5f 6f 70 74 69 6f 6e 73 ss frame_options
1ab0: 2e 72 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 74 6f .respond_to? :to
1ac0: 5f 73 74 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 _str.</code></li
1ad0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1ae0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1af0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1b00: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1b10: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 <code>          
1b20: 66 72 61 6d 65 5f 6f 70 74 69 6f 6e 73 2e 74 6f frame_options.to
1b30: 5f 73 74 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 _str.</code></li
1b40: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1b50: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1b60: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1b70: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1b80: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 65 6e <code>        en
1b90: 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 d.</code></li>. 
1ba0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1bb0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1bc0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1bd0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1be0: 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 de>      end.</c
1bf0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1c00: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1c10: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1c20: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1c30: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1c40: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1c50: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1c60: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1c70: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1c80: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1c90: 20 20 20 20 20 20 64 65 66 20 63 61 6c 6c 28 65       def call(e
1ca0: 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e nv).</code></li>
1cb0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1cc0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1cd0: 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 </ol>.          
1ce0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
1cf0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 33     <ol start="3
1d00: 31 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 1" class="contex
1d10: 74 22 20 69 64 3d 22 33 32 22 0a 20 20 20 20 20 t" id="32".     
1d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
1d30: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 32 29 lick="toggle(32)
1d40: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
1d50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63     <li class="c
1d60: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d ontext-line" id=
1d70: 22 63 6f 6e 74 65 78 74 2d 33 32 22 3e 3c 63 6f "context-32"><co
1d80: 64 65 3e 20 20 20 20 20 20 20 20 73 74 61 74 75 de>        statu
1d90: 73 2c 20 68 65 61 64 65 72 73 2c 20 62 6f 64 79 s, headers, body
1da0: 20 20 20 20 20 20 20 20 3d 20 40 61 70 70 2e 63         = @app.c
1db0: 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 3e 3c all(env)</code><
1dc0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1dd0: 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20    </ol>..      
1de0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1df0: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
1e00: 3d 22 33 32 22 20 63 6c 61 73 73 3d 22 70 6f 73 ="32" class="pos
1e10: 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 t-context".     
1e20: 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d              id=
1e30: 22 70 6f 73 74 2d 33 32 22 20 6f 6e 63 6c 69 63 "post-32" onclic
1e40: 6b 3d 22 74 6f 67 67 6c 65 28 33 32 29 3b 22 3e k="toggle(32);">
1e50: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1e60: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1e70: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
1e80: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
1e90: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 68 65 <code>        he
1ea0: 61 64 65 72 73 5b 26 23 78 32 37 3b 58 2d 46 72 aders[&#x27;X-Fr
1eb0: 61 6d 65 2d 4f 70 74 69 6f 6e 73 26 23 78 32 37 ame-Options&#x27
1ec0: 3b 5d 20 7c 7c 3d 20 66 72 61 6d 65 5f 6f 70 74 ;] ||= frame_opt
1ed0: 69 6f 6e 73 20 69 66 20 68 74 6d 6c 3f 20 68 65 ions if html? he
1ee0: 61 64 65 72 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c aders.</code></l
1ef0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1f00: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1f10: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1f20: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1f30: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
1f40: 5b 73 74 61 74 75 73 2c 20 68 65 61 64 65 72 73 [status, headers
1f50: 2c 20 62 6f 64 79 5d 0a 3c 2f 63 6f 64 65 3e 3c , body].</code><
1f60: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1f70: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1f80: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1f90: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1fa0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1fb0: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
1fc0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1fd0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1fe0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
1ff0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
2000: 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f <code>    end.</
2010: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2020: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2030: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2040: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2050: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2060: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
2070: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2080: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2090: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
20a0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
20b0: 22 3e 3c 63 6f 64 65 3e 65 6e 64 0a 3c 2f 63 6f "><code>end.</co
20c0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
20d0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
20e0: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
20f0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2100: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
2110: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
2120: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
2130: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
2140: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
2150: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
2160: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2170: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
2180: 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 o system">.     
2190: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
21a0: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
21b0: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
21c0: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
21d0: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
21e0: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
21f0: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
2200: 72 61 63 6b 2d 31 2e 35 2e 32 26 23 78 32 46 3b rack-1.5.2&#x2F;
2210: 6c 69 62 26 23 78 32 46 3b 72 61 63 6b 26 23 78 lib&#x2F;rack&#x
2220: 32 46 3b 6e 75 6c 6c 6c 6f 67 67 65 72 2e 72 62 2F;nulllogger.rb
2230: 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 </code> in.     
2240: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
2250: 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f 73 ><strong>call</s
2260: 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 trong></code>.  
2270: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
2280: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
2290: 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 73  class="code sys
22a0: 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 tem">.          
22b0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
22c0: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 32 22    <ol start="2"
22d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
22e0: 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f    class="pre-co
22f0: 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d 33 ntext" id="pre-3
2300: 33 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 3".             
2310: 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f      onclick="to
2320: 67 67 6c 65 28 33 33 29 3b 22 3e 0a 20 20 20 20 ggle(33);">.    
2330: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2340: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2350: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
2360: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2370: 20 20 63 6c 61 73 73 20 4e 75 6c 6c 4c 6f 67 67   class NullLogg
2380: 65 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a er.</code></li>.
2390: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
23a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
23b0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
23c0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
23d0: 6f 64 65 3e 20 20 20 20 64 65 66 20 69 6e 69 74 ode>    def init
23e0: 69 61 6c 69 7a 65 28 61 70 70 29 0a 3c 2f 63 6f ialize(app).</co
23f0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2400: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2410: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2420: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2430: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2440: 20 20 20 40 61 70 70 20 3d 20 61 70 70 0a 3c 2f    @app = app.</
2450: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2460: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2470: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2480: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2490: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
24a0: 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f    end.</code></
24b0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
24c0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
24d0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
24e0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
24f0: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
2500: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2510: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2520: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2530: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
2540: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
2550: 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f f call(env).</co
2560: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2570: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2580: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2590: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
25a0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
25b0: 20 20 20 65 6e 76 5b 26 23 78 32 37 3b 72 61 63    env[&#x27;rac
25c0: 6b 2e 6c 6f 67 67 65 72 26 23 78 32 37 3b 5d 20 k.logger&#x27;] 
25d0: 3d 20 73 65 6c 66 0a 3c 2f 63 6f 64 65 3e 3c 2f = self.</code></
25e0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
25f0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2600: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
2610: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
2620: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
2630: 3d 22 39 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 ="9" class="cont
2640: 65 78 74 22 20 69 64 3d 22 33 33 22 0a 20 20 20 ext" id="33".   
2650: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f                o
2660: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 nclick="toggle(3
2670: 33 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 3);">.          
2680: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2690: 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 "context-line" i
26a0: 64 3d 22 63 6f 6e 74 65 78 74 2d 33 33 22 3e 3c d="context-33"><
26b0: 63 6f 64 65 3e 20 20 20 20 20 20 40 61 70 70 2e code>      @app.
26c0: 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 3e call(env)</code>
26d0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
26e0: 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20     </ol>..     
26f0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2700: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
2710: 74 3d 22 31 30 22 20 63 6c 61 73 73 3d 22 70 6f t="10" class="po
2720: 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 st-context".    
2730: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64               id
2740: 3d 22 70 6f 73 74 2d 33 33 22 20 6f 6e 63 6c 69 ="post-33" oncli
2750: 63 6b 3d 22 74 6f 67 67 6c 65 28 33 33 29 3b 22 ck="toggle(33);"
2760: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2770: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2780: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
2790: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
27a0: 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c ><code>    end.<
27b0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
27c0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
27d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
27e0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
27f0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2800: 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 >.</code></li>. 
2810: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2820: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2830: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
2840: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2850: 6f 64 65 3e 20 20 20 20 64 65 66 20 69 6e 66 6f ode>    def info
2860: 28 70 72 6f 67 6e 61 6d 65 20 3d 20 6e 69 6c 2c (progname = nil,
2870: 20 26 61 6d 70 3b 62 6c 6f 63 6b 29 3b 20 20 65  &amp;block);  e
2880: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
2890: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
28a0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
28b0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
28c0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
28d0: 63 6f 64 65 3e 20 20 20 20 64 65 66 20 64 65 62 code>    def deb
28e0: 75 67 28 70 72 6f 67 6e 61 6d 65 20 3d 20 6e 69 ug(progname = ni
28f0: 6c 2c 20 26 61 6d 70 3b 62 6c 6f 63 6b 29 3b 20 l, &amp;block); 
2900: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
2910: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2920: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2930: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
2940: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
2950: 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 77 61 <code>    def wa
2960: 72 6e 28 70 72 6f 67 6e 61 6d 65 20 3d 20 6e 69 rn(progname = ni
2970: 6c 2c 20 26 61 6d 70 3b 62 6c 6f 63 6b 29 3b 20 l, &amp;block); 
2980: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
2990: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
29a0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
29b0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
29c0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
29d0: 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 65 ><code>    def e
29e0: 72 72 6f 72 28 70 72 6f 67 6e 61 6d 65 20 3d 20 rror(progname = 
29f0: 6e 69 6c 2c 20 26 61 6d 70 3b 62 6c 6f 63 6b 29 nil, &amp;block)
2a00: 3b 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c ; end.</code></l
2a10: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2a20: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2a30: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2a40: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2a50: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 "><code>    def 
2a60: 66 61 74 61 6c 28 70 72 6f 67 6e 61 6d 65 20 3d fatal(progname =
2a70: 20 6e 69 6c 2c 20 26 61 6d 70 3b 62 6c 6f 63 6b  nil, &amp;block
2a80: 29 3b 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f ); end.</code></
2a90: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2aa0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2ab0: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
2ac0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2ad0: 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73       <div class
2ae0: 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a ="clear"></div>.
2af0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
2b00: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 >..          .. 
2b10: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20        .      . 
2b20: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
2b30: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2b40: 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 73 ="frame-info sys
2b50: 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 tem">.          
2b60: 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b     <code>&#x2F;
2b70: 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 65 Users&#x2F;karee
2b80: 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d mgrant&#x2F;.rvm
2b90: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
2ba0: 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 ruby-1.9.3-p194@
2bb0: 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 46 traffic_spy&#x2F
2bc0: 3b 67 65 6d 73 26 23 78 32 46 3b 72 61 63 6b 2d ;gems&#x2F;rack-
2bd0: 31 2e 35 2e 32 26 23 78 32 46 3b 6c 69 62 26 23 1.5.2&#x2F;lib&#
2be0: 78 32 46 3b 72 61 63 6b 26 23 78 32 46 3b 68 65 x2F;rack&#x2F;he
2bf0: 61 64 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a ad.rb</code> in.
2c00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2c10: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 <code><strong>ca
2c20: 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 ll</strong></cod
2c30: 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c e>.            <
2c40: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
2c50: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64   <li class="cod
2c60: 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 e system">.     
2c70: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2c80: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
2c90: 74 3d 22 34 22 0a 20 20 20 20 20 20 20 20 20 20 t="4".          
2ca0: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
2cb0: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
2cc0: 70 72 65 2d 33 34 22 0a 20 20 20 20 20 20 20 20 pre-34".        
2cd0: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
2ce0: 6b 3d 22 74 6f 67 67 6c 65 28 33 34 29 3b 22 3e k="toggle(34);">
2cf0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2d00: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2d10: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
2d20: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2d30: 63 6f 64 65 3e 20 20 23 20 52 61 63 6b 3a 3a 48 code>  # Rack::H
2d40: 65 61 64 20 72 65 74 75 72 6e 73 20 61 6e 20 65 ead returns an e
2d50: 6d 70 74 79 20 62 6f 64 79 20 66 6f 72 20 61 6c mpty body for al
2d60: 6c 20 48 45 41 44 20 72 65 71 75 65 73 74 73 2e l HEAD requests.
2d70: 20 49 74 20 6c 65 61 76 65 73 0a 3c 2f 63 6f 64  It leaves.</cod
2d80: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2d90: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2da0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2db0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2dc0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 23 20 line"><code>  # 
2dd0: 61 6c 6c 20 6f 74 68 65 72 20 72 65 71 75 65 73 all other reques
2de0: 74 73 20 75 6e 63 68 61 6e 67 65 64 2e 0a 3c 2f ts unchanged..</
2df0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2e00: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2e10: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2e20: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2e30: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2e40: 20 64 65 66 20 69 6e 69 74 69 61 6c 69 7a 65 28  def initialize(
2e50: 61 70 70 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 app).</code></li
2e60: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2e70: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2e80: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2e90: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2ea0: 3c 63 6f 64 65 3e 20 20 20 20 40 61 70 70 20 3d <code>    @app =
2eb0: 20 61 70 70 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  app.</code></li
2ec0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2ed0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2ee0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2ef0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2f00: 3c 63 6f 64 65 3e 20 20 65 6e 64 0a 3c 2f 63 6f <code>  end.</co
2f10: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2f20: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2f30: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2f40: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2f50: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
2f60: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2f70: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2f80: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2f90: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2fa0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2fb0: 20 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c  def call(env).<
2fc0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2fd0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2fe0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
2ff0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
3000: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
3010: 6f 6c 20 73 74 61 72 74 3d 22 31 31 22 20 63 6c ol start="11" cl
3020: 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 ass="context" id
3030: 3d 22 33 34 22 0a 20 20 20 20 20 20 20 20 20 20 ="34".          
3040: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
3050: 22 74 6f 67 67 6c 65 28 33 34 29 3b 22 3e 0a 20 "toggle(34);">. 
3060: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3070: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 li class="contex
3080: 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 t-line" id="cont
3090: 65 78 74 2d 33 34 22 3e 3c 63 6f 64 65 3e 20 20 ext-34"><code>  
30a0: 20 20 73 74 61 74 75 73 2c 20 68 65 61 64 65 72   status, header
30b0: 73 2c 20 62 6f 64 79 20 3d 20 40 61 70 70 2e 63 s, body = @app.c
30c0: 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 3e 3c all(env)</code><
30d0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
30e0: 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20    </ol>..      
30f0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3100: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
3110: 3d 22 31 32 22 20 63 6c 61 73 73 3d 22 70 6f 73 ="12" class="pos
3120: 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 t-context".     
3130: 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d              id=
3140: 22 70 6f 73 74 2d 33 34 22 20 6f 6e 63 6c 69 63 "post-34" onclic
3150: 6b 3d 22 74 6f 67 67 6c 65 28 33 34 29 3b 22 3e k="toggle(34);">
3160: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3170: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3180: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3190: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
31a0: 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f <code>.</code></
31b0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
31c0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
31d0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
31e0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
31f0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 69 66 20 e"><code>    if 
3200: 65 6e 76 5b 26 71 75 6f 74 3b 52 45 51 55 45 53 env[&quot;REQUES
3210: 54 5f 4d 45 54 48 4f 44 26 71 75 6f 74 3b 5d 20 T_METHOD&quot;] 
3220: 3d 3d 20 26 71 75 6f 74 3b 48 45 41 44 26 71 75 == &quot;HEAD&qu
3230: 6f 74 3b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ot;.</code></li>
3240: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3250: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3260: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3270: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3280: 3c 63 6f 64 65 3e 20 20 20 20 20 20 62 6f 64 79 <code>      body
3290: 2e 63 6c 6f 73 65 20 69 66 20 62 6f 64 79 2e 72 .close if body.r
32a0: 65 73 70 6f 6e 64 5f 74 6f 3f 20 3a 63 6c 6f 73 espond_to? :clos
32b0: 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 e.</code></li>. 
32c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
32d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
32e0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
32f0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3300: 6f 64 65 3e 20 20 20 20 20 20 5b 73 74 61 74 75 ode>      [statu
3310: 73 2c 20 68 65 61 64 65 72 73 2c 20 5b 5d 5d 0a s, headers, []].
3320: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3330: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3340: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3350: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
3360: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3370: 65 3e 20 20 20 20 65 6c 73 65 0a 3c 2f 63 6f 64 e>    else.</cod
3380: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3390: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
33a0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
33b0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
33c0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
33d0: 20 20 20 5b 73 74 61 74 75 73 2c 20 68 65 61 64    [status, head
33e0: 65 72 73 2c 20 62 6f 64 79 5d 0a 3c 2f 63 6f 64 ers, body].</cod
33f0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3400: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3410: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3420: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
3430: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
3440: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
3450: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3460: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3470: 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20  </ol>.         
3480: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3490: 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22     <div class="
34a0: 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 clear"></div>.  
34b0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
34c0: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
34d0: 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20      .      .   
34e0: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
34f0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3500: 66 72 61 6d 65 2d 69 6e 66 6f 20 66 72 61 6d 65 frame-info frame
3510: 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 work">.         
3520: 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46      <code>&#x2F
3530: 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 ;Users&#x2F;kare
3540: 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 emgrant&#x2F;.rv
3550: 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 m&#x2F;gems&#x2F
3560: 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 ;ruby-1.9.3-p194
3570: 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 @traffic_spy&#x2
3580: 46 3b 67 65 6d 73 26 23 78 32 46 3b 73 69 6e 61 F;gems&#x2F;sina
3590: 74 72 61 2d 31 2e 33 2e 35 26 23 78 32 46 3b 6c tra-1.3.5&#x2F;l
35a0: 69 62 26 23 78 32 46 3b 73 69 6e 61 74 72 61 26 ib&#x2F;sinatra&
35b0: 23 78 32 46 3b 73 68 6f 77 65 78 63 65 70 74 69 #x2F;showexcepti
35c0: 6f 6e 73 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e ons.rb</code> in
35d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
35e0: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63  <code><strong>c
35f0: 61 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f all</strong></co
3600: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
3610: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
3620: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
3630: 64 65 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 de framework">. 
3640: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3650: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
3660: 73 74 61 72 74 3d 22 31 34 22 0a 20 20 20 20 20 start="14".     
3670: 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61              cla
3680: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 ss="pre-context"
3690: 20 69 64 3d 22 70 72 65 2d 33 35 22 0a 20 20 20  id="pre-35".   
36a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f                o
36b0: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 nclick="toggle(3
36c0: 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 5);">.          
36d0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
36e0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
36f0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
3700: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
3710: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3720: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3730: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3740: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
3750: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3760: 64 65 66 20 69 6e 69 74 69 61 6c 69 7a 65 28 61 def initialize(a
3770: 70 70 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e pp).</code></li>
3780: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3790: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
37a0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
37b0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
37c0: 63 6f 64 65 3e 20 20 20 20 20 20 40 61 70 70 20 code>      @app 
37d0: 20 20 20 20 20 3d 20 61 70 70 0a 3c 2f 63 6f 64      = app.</cod
37e0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
37f0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3800: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3810: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
3820: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3830: 20 20 40 74 65 6d 70 6c 61 74 65 20 3d 20 45 52   @template = ER
3840: 42 2e 6e 65 77 28 54 45 4d 50 4c 41 54 45 29 0a B.new(TEMPLATE).
3850: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3860: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3870: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3880: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
3890: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
38a0: 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e >    end.</code>
38b0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
38c0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
38d0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
38e0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
38f0: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
3900: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3910: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3920: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3930: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
3940: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3950: 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f def call(env).</
3960: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3970: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3980: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
3990: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a               ..
39a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
39b0: 6c 20 73 74 61 72 74 3d 22 32 31 22 20 63 6c 61 l start="21" cla
39c0: 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d ss="context" id=
39d0: 22 33 35 22 0a 20 20 20 20 20 20 20 20 20 20 20 "35".           
39e0: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
39f0: 74 6f 67 67 6c 65 28 33 35 29 3b 22 3e 0a 20 20 toggle(35);">.  
3a00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3a10: 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 i class="context
3a20: 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 -line" id="conte
3a30: 78 74 2d 33 35 22 3e 3c 63 6f 64 65 3e 20 20 20 xt-35"><code>   
3a40: 20 20 20 40 61 70 70 2e 63 61 6c 6c 28 65 6e 76    @app.call(env
3a50: 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 )</code></li>.  
3a60: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
3a70: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 >..             
3a80: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3a90: 3c 6f 6c 20 73 74 61 72 74 3d 22 32 32 22 20 63 <ol start="22" c
3aa0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
3ab0: 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 xt".            
3ac0: 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 33       id="post-3
3ad0: 35 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 5" onclick="togg
3ae0: 6c 65 28 33 35 29 3b 22 3e 0a 20 20 20 20 20 20 le(35);">.      
3af0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3b00: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3b10: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
3b20: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3b30: 20 20 20 72 65 73 63 75 65 20 45 78 63 65 70 74    rescue Except
3b40: 69 6f 6e 20 3d 26 67 74 3b 20 65 0a 3c 2f 63 6f ion =&gt; e.</co
3b50: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3b60: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3b70: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3b80: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
3b90: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
3ba0: 20 20 20 20 65 72 72 6f 72 73 2c 20 65 6e 76 5b     errors, env[
3bb0: 26 71 75 6f 74 3b 72 61 63 6b 2e 65 72 72 6f 72 &quot;rack.error
3bc0: 73 26 71 75 6f 74 3b 5d 20 3d 20 65 6e 76 5b 26 s&quot;] = env[&
3bd0: 71 75 6f 74 3b 72 61 63 6b 2e 65 72 72 6f 72 73 quot;rack.errors
3be0: 26 71 75 6f 74 3b 5d 2c 20 40 40 65 61 74 73 5f &quot;], @@eats_
3bf0: 65 72 72 6f 72 73 0a 3c 2f 63 6f 64 65 3e 3c 2f errors.</code></
3c00: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
3c10: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3c20: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3c30: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
3c40: 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 e"><code>.</code
3c50: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3c60: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3c70: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3c80: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
3c90: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
3ca0: 20 20 69 66 20 72 65 73 70 6f 6e 64 5f 74 6f 3f   if respond_to?
3cb0: 28 3a 70 72 65 66 65 72 73 5f 70 6c 61 69 6e 5f (:prefers_plain_
3cc0: 74 65 78 74 3f 29 20 61 6e 64 20 70 72 65 66 65 text?) and prefe
3cd0: 72 73 5f 70 6c 61 69 6e 5f 74 65 78 74 3f 28 65 rs_plain_text?(e
3ce0: 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e nv).</code></li>
3cf0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3d00: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3d10: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3d20: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3d30: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 63 6f <code>        co
3d40: 6e 74 65 6e 74 5f 74 79 70 65 20 3d 20 26 71 75 ntent_type = &qu
3d50: 6f 74 3b 74 65 78 74 26 23 78 32 46 3b 70 6c 61 ot;text&#x2F;pla
3d60: 69 6e 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 65 3e in&quot;.</code>
3d70: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3d80: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3d90: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3da0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
3db0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
3dc0: 20 20 20 62 6f 64 79 20 3d 20 5b 64 75 6d 70 5f    body = [dump_
3dd0: 65 78 63 65 70 74 69 6f 6e 28 65 29 5d 0a 3c 2f exception(e)].</
3de0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3df0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3e00: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3e10: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
3e20: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3e30: 20 20 20 20 20 20 65 6c 73 65 0a 3c 2f 63 6f 64       else.</cod
3e40: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
3e50: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3e60: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
3e70: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3e80: 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63           <div c
3e90: 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 lass="clear"></d
3ea0: 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 iv>.            
3eb0: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
3ec0: 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20  ..        .    
3ed0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20   .          .. 
3ee0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3ef0: 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f lass="frame-info
3f00: 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20  framework">.   
3f10: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
3f20: 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 >&#x2F;Users&#x2
3f30: 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 F;kareemgrant&#x
3f40: 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 2F;.rvm&#x2F;gem
3f50: 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e s&#x2F;ruby-1.9.
3f60: 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 3-p194@traffic_s
3f70: 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 py&#x2F;gems&#x2
3f80: 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 F;sinatra-1.3.5&
3f90: 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 #x2F;lib&#x2F;si
3fa0: 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e natra&#x2F;base.
3fb0: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
3fc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
3fd0: 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c de><strong>call<
3fe0: 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a /strong></code>.
3ff0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
<= Recv data, 16384 bytes (0x4000)
0000: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c >..            <
0010: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 li class="code f
0020: 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 ramework">.     
0030: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0040: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
0050: 74 3d 22 31 31 37 22 0a 20 20 20 20 20 20 20 20 t="117".        
0060: 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d           class=
0070: 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 "pre-context" id
0080: 3d 22 70 72 65 2d 33 36 22 0a 20 20 20 20 20 20 ="pre-36".      
0090: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
00a0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 36 29 3b ick="toggle(36);
00b0: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
00c0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
00d0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
00e0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
00f0: 3e 3c 63 6f 64 65 3e 20 20 23 20 53 6f 6d 65 20 ><code>  # Some 
0100: 52 61 63 6b 20 68 61 6e 64 6c 65 72 73 20 28 54 Rack handlers (T
0110: 68 69 6e 2c 20 52 61 69 6e 62 6f 77 73 21 29 20 hin, Rainbows!) 
0120: 69 6d 70 6c 65 6d 65 6e 74 20 61 6e 20 65 78 74 implement an ext
0130: 65 6e 64 65 64 20 62 6f 64 79 20 6f 62 6a 65 63 ended body objec
0140: 74 20 70 72 6f 74 6f 63 6f 6c 2c 20 68 6f 77 65 t protocol, howe
0150: 76 65 72 2c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ver,.</code></li
0160: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0170: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0180: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
0190: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
01a0: 3c 63 6f 64 65 3e 20 20 23 20 73 6f 6d 65 20 6d <code>  # some m
01b0: 69 64 64 6c 65 77 61 72 65 20 28 6e 61 6d 65 6c iddleware (namel
01c0: 79 20 52 61 63 6b 3a 3a 4c 69 6e 74 29 20 77 69 y Rack::Lint) wi
01d0: 6c 6c 20 62 72 65 61 6b 20 69 74 20 62 79 20 6e ll break it by n
01e0: 6f 74 20 6d 69 72 72 6f 72 69 6e 67 20 74 68 65 ot mirroring the
01f0: 20 6d 65 74 68 6f 64 73 20 69 6e 20 71 75 65 73  methods in ques
0200: 74 69 6f 6e 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c tion..</code></l
0210: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0220: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0230: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0240: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
0250: 3e 3c 63 6f 64 65 3e 20 20 23 20 54 68 69 73 20 ><code>  # This 
0260: 6d 69 64 64 6c 65 77 61 72 65 20 77 69 6c 6c 20 middleware will 
0270: 64 65 74 65 63 74 20 61 6e 20 65 78 74 65 6e 64 detect an extend
0280: 65 64 20 62 6f 64 79 20 6f 62 6a 65 63 74 20 61 ed body object a
0290: 6e 64 20 77 69 6c 6c 20 6d 61 6b 65 20 73 75 72 nd will make sur
02a0: 65 20 69 74 20 72 65 61 63 68 65 73 20 74 68 65 e it reaches the
02b0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
02c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
02d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
02e0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
02f0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0300: 65 3e 20 20 23 20 68 61 6e 64 6c 65 72 20 64 69 e>  # handler di
0310: 72 65 63 74 6c 79 2e 20 57 65 20 64 6f 20 74 68 rectly. We do th
0320: 69 73 20 68 65 72 65 2c 20 73 6f 20 6f 75 72 20 is here, so our 
0330: 6d 69 64 64 6c 65 77 61 72 65 20 61 6e 64 20 6d middleware and m
0340: 69 64 64 6c 65 77 61 72 65 20 73 65 74 20 75 70 iddleware set up
0350: 20 62 79 20 74 68 65 20 61 70 70 20 77 69 6c 6c  by the app will
0360: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0370: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0380: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0390: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
03a0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
03b0: 65 3e 20 20 23 20 73 74 69 6c 6c 20 62 65 20 61 e>  # still be a
03c0: 62 6c 65 20 74 6f 20 72 75 6e 2e 0a 3c 2f 63 6f ble to run..</co
03d0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
03e0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
03f0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0400: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0410: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 63 -line"><code>  c
0420: 6c 61 73 73 20 45 78 74 65 6e 64 65 64 52 61 63 lass ExtendedRac
0430: 6b 20 26 6c 74 3b 20 53 74 72 75 63 74 2e 6e 65 k &lt; Struct.ne
0440: 77 28 3a 61 70 70 29 0a 3c 2f 63 6f 64 65 3e 3c w(:app).</code><
0450: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0460: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0470: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0480: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
0490: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 e"><code>    def
04a0: 20 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64  call(env).</cod
04b0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
04c0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
04d0: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
04e0: 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20            ..   
04f0: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
0500: 74 61 72 74 3d 22 31 32 34 22 20 63 6c 61 73 73 tart="124" class
0510: 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 33 ="context" id="3
0520: 36 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 6".             
0530: 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f      onclick="to
0540: 67 67 6c 65 28 33 36 29 3b 22 3e 0a 20 20 20 20 ggle(36);">.    
0550: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0560: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c class="context-l
0570: 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 ine" id="context
0580: 2d 33 36 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 -36"><code>     
0590: 20 72 65 73 75 6c 74 2c 20 63 61 6c 6c 62 61 63  result, callbac
05a0: 6b 20 3d 20 61 70 70 2e 63 61 6c 6c 28 65 6e 76 k = app.call(env
05b0: 29 2c 20 65 6e 76 5b 26 23 78 32 37 3b 61 73 79 ), env[&#x27;asy
05c0: 6e 63 2e 63 61 6c 6c 62 61 63 6b 26 23 78 32 37 nc.callback&#x27
05d0: 3b 5d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ;]</code></li>. 
05e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f              </o
05f0: 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 l>..            
0600: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0610: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 32 35 22  <ol start="125"
0620: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0630: 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 text".          
0640: 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74         id="post
0650: 2d 33 36 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f -36" onclick="to
0660: 67 67 6c 65 28 33 36 29 3b 22 3e 0a 20 20 20 20 ggle(36);">.    
0670: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0680: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0690: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
06a0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
06b0: 3e 20 20 20 20 20 20 72 65 74 75 72 6e 20 72 65 >      return re
06c0: 73 75 6c 74 20 75 6e 6c 65 73 73 20 63 61 6c 6c sult unless call
06d0: 62 61 63 6b 20 61 6e 64 20 61 73 79 6e 63 3f 28 back and async?(
06e0: 2a 72 65 73 75 6c 74 29 0a 3c 2f 63 6f 64 65 3e *result).</code>
06f0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0700: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0710: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0720: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
0730: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0740: 20 61 66 74 65 72 5f 72 65 73 70 6f 6e 73 65 20  after_response 
0750: 7b 20 63 61 6c 6c 62 61 63 6b 2e 63 61 6c 6c 20 { callback.call 
0760: 72 65 73 75 6c 74 20 7d 0a 3c 2f 63 6f 64 65 3e result }.</code>
0770: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0780: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0790: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
07a0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
07b0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
07c0: 20 73 65 74 75 70 5f 63 6c 6f 73 65 28 65 6e 76  setup_close(env
07d0: 2c 20 2a 72 65 73 75 6c 74 29 0a 3c 2f 63 6f 64 , *result).</cod
07e0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
07f0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0800: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0810: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0820: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0830: 20 20 20 74 68 72 6f 77 20 3a 61 73 79 6e 63 0a    throw :async.
0840: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0850: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0860: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
0870: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
0880: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0890: 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 e>    end.</code
08a0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
08b0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
08c0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
08d0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
08e0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 line"><code>.</c
08f0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0900: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0910: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0920: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
0930: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0940: 20 20 20 70 72 69 76 61 74 65 0a 3c 2f 63 6f 64    private.</cod
0950: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0960: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0970: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
0980: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0990: 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63           <div c
09a0: 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 lass="clear"></d
09b0: 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 iv>.            
09c0: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
09d0: 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20  ..        .    
09e0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20   .          .. 
09f0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0a00: 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f lass="frame-info
0a10: 20 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20  framework">.   
0a20: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
0a30: 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 >&#x2F;Users&#x2
0a40: 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 F;kareemgrant&#x
0a50: 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 2F;.rvm&#x2F;gem
0a60: 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e s&#x2F;ruby-1.9.
0a70: 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 3-p194@traffic_s
0a80: 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 py&#x2F;gems&#x2
0a90: 46 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 F;sinatra-1.3.5&
0aa0: 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 #x2F;lib&#x2F;si
0ab0: 6e 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e natra&#x2F;base.
0ac0: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
0ad0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
0ae0: 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c 6f 63 6b de><strong>block
0af0: 20 69 6e 20 63 61 6c 6c 3c 2f 73 74 72 6f 6e 67  in call</strong
0b00: 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 ></code>.       
0b10: 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20      </li>..    
0b20: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0b30: 73 3d 22 63 6f 64 65 20 66 72 61 6d 65 77 6f 72 s="code framewor
0b40: 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 k">.            
0b50: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0b60: 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 34 31 30  <ol start="1410
0b70: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
0b80: 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63     class="pre-c
0b90: 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d ontext" id="pre-
0ba0: 33 37 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 37".            
0bb0: 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74       onclick="t
0bc0: 6f 67 67 6c 65 28 33 37 29 3b 22 3e 0a 20 20 20 oggle(37);">.   
0bd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0be0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
0bf0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
0c00: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0c10: 3e 20 20 20 20 20 20 20 20 73 65 74 75 70 5f 64 >        setup_d
0c20: 65 66 61 75 6c 74 5f 6d 69 64 64 6c 65 77 61 72 efault_middlewar
0c30: 65 20 62 75 69 6c 64 65 72 0a 3c 2f 63 6f 64 65 e builder.</code
0c40: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0c50: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0c60: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0c70: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
0c80: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0c90: 20 20 20 73 65 74 75 70 5f 6d 69 64 64 6c 65 77    setup_middlew
0ca0: 61 72 65 20 62 75 69 6c 64 65 72 0a 3c 2f 63 6f are builder.</co
0cb0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0cc0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0cd0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0ce0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0cf0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0d00: 20 20 20 20 20 62 75 69 6c 64 65 72 2e 72 75 6e      builder.run
0d10: 20 6e 65 77 21 28 2a 61 72 67 73 2c 20 26 61 6d  new!(*args, &am
0d20: 70 3b 62 6b 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c p;bk).</code></l
0d30: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0d40: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0d50: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0d60: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
0d70: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 62 ><code>        b
0d80: 75 69 6c 64 65 72 0a 3c 2f 63 6f 64 65 3e 3c 2f uilder.</code></
0d90: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0da0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0db0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0dc0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
0dd0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e "><code>      en
0de0: 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 d.</code></li>. 
0df0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0e00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0e10: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0e20: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0e30: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
0e40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0e50: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0e60: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0e70: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0e80: 63 6f 64 65 3e 20 20 20 20 20 20 64 65 66 20 63 code>      def c
0e90: 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e all(env).</code>
0ea0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0eb0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0ec0: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
0ed0: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
0ee0: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
0ef0: 72 74 3d 22 31 34 31 37 22 20 63 6c 61 73 73 3d rt="1417" class=
0f00: 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 33 37 "context" id="37
0f10: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
0f20: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
0f30: 67 6c 65 28 33 37 29 3b 22 3e 0a 20 20 20 20 20 gle(37);">.     
0f40: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0f50: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 lass="context-li
0f60: 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d ne" id="context-
0f70: 33 37 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 37"><code>      
0f80: 20 20 73 79 6e 63 68 72 6f 6e 69 7a 65 20 7b 20   synchronize { 
0f90: 70 72 6f 74 6f 74 79 70 65 2e 63 61 6c 6c 28 65 prototype.call(e
0fa0: 6e 76 29 20 7d 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 nv) }</code></li
0fb0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0fc0: 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 </ol>..         
0fd0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0fe0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31     <ol start="1
0ff0: 34 31 38 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 418" class="post
1000: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
1010: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
1020: 70 6f 73 74 2d 33 37 22 20 6f 6e 63 6c 69 63 6b post-37" onclick
1030: 3d 22 74 6f 67 67 6c 65 28 33 37 29 3b 22 3e 0a ="toggle(37);">.
1040: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1050: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1060: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
1070: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1080: 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c code>      end.<
1090: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
10a0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
10b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
10c0: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
10d0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
10e0: 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 >.</code></li>. 
10f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1100: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1110: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
1120: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1130: 6f 64 65 3e 20 20 20 20 70 72 69 76 61 74 65 0a ode>    private.
1140: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1150: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1170: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1180: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1190: 65 3e 20 20 20 20 20 20 64 65 66 20 73 65 74 75 e>      def setu
11a0: 70 5f 64 65 66 61 75 6c 74 5f 6d 69 64 64 6c 65 p_default_middle
11b0: 77 61 72 65 28 62 75 69 6c 64 65 72 29 0a 3c 2f ware(builder).</
11c0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
11d0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
11e0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
11f0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1200: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1210: 20 20 20 20 20 20 20 20 62 75 69 6c 64 65 72 2e         builder.
1220: 75 73 65 20 45 78 74 65 6e 64 65 64 52 61 63 6b use ExtendedRack
1230: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1240: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1250: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1260: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1270: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1280: 64 65 3e 20 20 20 20 20 20 20 20 62 75 69 6c 64 de>        build
1290: 65 72 2e 75 73 65 20 53 68 6f 77 45 78 63 65 70 er.use ShowExcep
12a0: 74 69 6f 6e 73 20 20 20 20 20 20 20 69 66 20 73 tions       if s
12b0: 68 6f 77 5f 65 78 63 65 70 74 69 6f 6e 73 3f 0a how_exceptions?.
12c0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
12d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
12e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
12f0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1300: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1310: 65 3e 20 20 20 20 20 20 20 20 62 75 69 6c 64 65 e>        builde
1320: 72 2e 75 73 65 20 52 61 63 6b 3a 3a 4d 65 74 68 r.use Rack::Meth
1330: 6f 64 4f 76 65 72 72 69 64 65 20 69 66 20 6d 65 odOverride if me
1340: 74 68 6f 64 5f 6f 76 65 72 72 69 64 65 3f 0a 3c thod_override?.<
1350: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1360: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1370: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
1380: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
1390: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
13a0: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
13b0: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
13c0: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
13d0: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
13e0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
13f0: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
1400: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
1410: 69 6e 66 6f 20 66 72 61 6d 65 77 6f 72 6b 22 3e info framework">
1420: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
1430: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
1440: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
1450: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
1460: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
1470: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
1480: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
1490: 26 23 78 32 46 3b 73 69 6e 61 74 72 61 2d 31 2e &#x2F;sinatra-1.
14a0: 33 2e 35 26 23 78 32 46 3b 6c 69 62 26 23 78 32 3.5&#x2F;lib&#x2
14b0: 46 3b 73 69 6e 61 74 72 61 26 23 78 32 46 3b 62 F;sinatra&#x2F;b
14c0: 61 73 65 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e ase.rb</code> in
14d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
14e0: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 73  <code><strong>s
14f0: 79 6e 63 68 72 6f 6e 69 7a 65 3c 2f 73 74 72 6f ynchronize</stro
1500: 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 ng></code>.     
1510: 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20        </li>..  
1520: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1530: 61 73 73 3d 22 63 6f 64 65 20 66 72 61 6d 65 77 ass="code framew
1540: 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 ork">.          
1550: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1560: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 34    <ol start="14
1570: 39 32 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 92".            
1580: 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65       class="pre
1590: 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 -context" id="pr
15a0: 65 2d 33 38 22 0a 20 20 20 20 20 20 20 20 20 20 e-38".          
15b0: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
15c0: 22 74 6f 67 67 6c 65 28 33 38 29 3b 22 3e 0a 20 "toggle(38);">. 
15d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
15e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
15f0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1600: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1610: 64 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 de>      end.</c
1620: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1630: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1640: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1650: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1660: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1670: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1680: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1690: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
16a0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
16b0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
16c0: 20 20 20 20 20 20 40 40 6d 75 74 65 78 20 3d 20       @@mutex = 
16d0: 4d 75 74 65 78 2e 6e 65 77 0a 3c 2f 63 6f 64 65 Mutex.new.</code
16e0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
16f0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1700: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1710: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
1720: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
1730: 20 64 65 66 20 73 79 6e 63 68 72 6f 6e 69 7a 65  def synchronize
1740: 28 26 61 6d 70 3b 62 6c 6f 63 6b 29 0a 3c 2f 63 (&amp;block).</c
1750: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1760: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1770: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1780: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
1790: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
17a0: 20 20 20 20 20 20 69 66 20 6c 6f 63 6b 3f 0a 3c       if lock?.<
17b0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
17c0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
17d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
17e0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
17f0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1800: 20 20 20 20 20 20 20 20 20 20 40 40 6d 75 74 65           @@mute
1810: 78 2e 73 79 6e 63 68 72 6f 6e 69 7a 65 28 26 61 x.synchronize(&a
1820: 6d 70 3b 62 6c 6f 63 6b 29 0a 3c 2f 63 6f 64 65 mp;block).</code
1830: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1840: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1850: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1860: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
1870: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
1880: 20 20 20 65 6c 73 65 0a 3c 2f 63 6f 64 65 3e 3c    else.</code><
1890: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
18a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
18b0: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
18c0: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
18d0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
18e0: 74 3d 22 31 34 39 39 22 20 63 6c 61 73 73 3d 22 t="1499" class="
18f0: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 33 38 22 context" id="38"
1900: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1910: 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67    onclick="togg
1920: 6c 65 28 33 38 29 3b 22 3e 0a 20 20 20 20 20 20 le(38);">.      
1930: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1940: 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e ass="context-lin
1950: 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 33 e" id="context-3
1960: 38 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 8"><code>       
1970: 20 20 20 79 69 65 6c 64 3c 2f 63 6f 64 65 3e 3c    yield</code><
1980: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1990: 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20    </ol>..      
19a0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
19b0: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
19c0: 3d 22 31 35 30 30 22 20 63 6c 61 73 73 3d 22 70 ="1500" class="p
19d0: 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 ost-context".   
19e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69                i
19f0: 64 3d 22 70 6f 73 74 2d 33 38 22 20 6f 6e 63 6c d="post-38" oncl
1a00: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 38 29 3b ick="toggle(38);
1a10: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
1a20: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1a30: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1a40: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1a50: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
1a60: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
1a70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1a80: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1a90: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
1aa0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
1ab0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 64 0a <code>      end.
1ac0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1ad0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1ae0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1af0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1b00: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1b10: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
1b20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1b30: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1b40: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
1b50: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1b60: 63 6f 64 65 3e 20 20 20 20 70 75 62 6c 69 63 0a code>    public.
1b70: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1b80: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1b90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1ba0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1bb0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1bc0: 65 3e 20 20 20 20 20 20 43 41 4c 4c 45 52 53 5f e>      CALLERS_
1bd0: 54 4f 5f 49 47 4e 4f 52 45 20 3d 20 5b 20 23 20 TO_IGNORE = [ # 
1be0: 3a 6e 6f 64 6f 63 3a 0a 3c 2f 63 6f 64 65 3e 3c :nodoc:.</code><
1bf0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1c00: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1c10: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1c20: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
1c30: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
1c40: 20 20 26 23 78 32 46 3b 5c 26 23 78 32 46 3b 73   &#x2F;\&#x2F;s
1c50: 69 6e 61 74 72 61 28 5c 26 23 78 32 46 3b 28 62 inatra(\&#x2F;(b
1c60: 61 73 65 7c 6d 61 69 6e 7c 73 68 6f 77 65 78 63 ase|main|showexc
1c70: 65 70 74 69 6f 6e 73 29 29 3f 5c 2e 72 62 24 26 eptions))?\.rb$&
1c80: 23 78 32 46 3b 2c 20 20 20 20 23 20 61 6c 6c 20 #x2F;,    # all 
1c90: 73 69 6e 61 74 72 61 20 63 6f 64 65 0a 3c 2f 63 sinatra code.</c
1ca0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1cb0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1cc0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
1cd0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
1ce0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
1cf0: 20 20 20 20 20 20 20 26 23 78 32 46 3b 6c 69 62        &#x2F;lib
1d00: 5c 26 23 78 32 46 3b 74 69 6c 74 2e 2a 5c 2e 72 \&#x2F;tilt.*\.r
1d10: 62 24 26 23 78 32 46 3b 2c 20 20 20 20 20 20 20 b$&#x2F;,       
1d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1d30: 20 20 20 20 20 20 20 20 20 20 23 20 61 6c 6c 20           # all 
1d40: 74 69 6c 74 20 63 6f 64 65 0a 3c 2f 63 6f 64 65 tilt code.</code
1d50: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1d60: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1d70: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20       </ol>.    
1d80: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1d90: 20 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c          <div cl
1da0: 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 ass="clear"></di
1db0: 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c v>.            <
1dc0: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
1dd0: 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 ..        .     
1de0: 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20  .          ..  
1df0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1e00: 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 ass="frame-info 
1e10: 66 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 framework">.    
1e20: 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e           <code>
1e30: 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 &#x2F;Users&#x2F
1e40: 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 ;kareemgrant&#x2
1e50: 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 F;.rvm&#x2F;gems
1e60: 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 &#x2F;ruby-1.9.3
1e70: 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 -p194@traffic_sp
1e80: 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 y&#x2F;gems&#x2F
1e90: 3b 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 ;sinatra-1.3.5&#
1ea0: 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e x2F;lib&#x2F;sin
1eb0: 61 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e 72 atra&#x2F;base.r
1ec0: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
1ed0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
1ee0: 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f e><strong>call</
1ef0: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
1f00: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
1f10: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
1f20: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 i class="code fr
1f30: 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 amework">.      
1f40: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1f50: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
1f60: 3d 22 31 34 31 30 22 0a 20 20 20 20 20 20 20 20 ="1410".        
1f70: 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d           class=
1f80: 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 "pre-context" id
1f90: 3d 22 70 72 65 2d 33 39 22 0a 20 20 20 20 20 20 ="pre-39".      
1fa0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
1fb0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 39 29 3b ick="toggle(39);
1fc0: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
1fd0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1fe0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1ff0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
2000: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 73 ><code>        s
2010: 65 74 75 70 5f 64 65 66 61 75 6c 74 5f 6d 69 64 etup_default_mid
2020: 64 6c 65 77 61 72 65 20 62 75 69 6c 64 65 72 0a dleware builder.
2030: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2040: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2050: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2060: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2070: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2080: 3e 20 20 20 20 20 20 20 20 73 65 74 75 70 5f 6d >        setup_m
2090: 69 64 64 6c 65 77 61 72 65 20 62 75 69 6c 64 65 iddleware builde
20a0: 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 r.</code></li>. 
20b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
20c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
20d0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
20e0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
20f0: 64 65 3e 20 20 20 20 20 20 20 20 62 75 69 6c 64 de>        build
2100: 65 72 2e 72 75 6e 20 6e 65 77 21 28 2a 61 72 67 er.run new!(*arg
2110: 73 2c 20 26 61 6d 70 3b 62 6b 29 0a 3c 2f 63 6f s, &amp;bk).</co
2120: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2130: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2140: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2150: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2160: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2170: 20 20 20 20 20 62 75 69 6c 64 65 72 0a 3c 2f 63      builder.</c
2180: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2190: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
21a0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
21b0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
21c0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
21d0: 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c     end.</code><
21e0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
21f0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2200: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2210: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
2220: 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 e"><code>.</code
2230: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2240: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2250: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2260: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
2270: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2280: 20 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c  def call(env).<
2290: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
22a0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
22b0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
22c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
22d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
22e0: 6f 6c 20 73 74 61 72 74 3d 22 31 34 31 37 22 20 ol start="1417" 
22f0: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 class="context" 
2300: 69 64 3d 22 33 39 22 0a 20 20 20 20 20 20 20 20 id="39".        
2310: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
2320: 6b 3d 22 74 6f 67 67 6c 65 28 33 39 29 3b 22 3e k="toggle(39);">
2330: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2340: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74  <li class="cont
2350: 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f ext-line" id="co
2360: 6e 74 65 78 74 2d 33 39 22 3e 3c 63 6f 64 65 3e ntext-39"><code>
2370: 20 20 20 20 20 20 20 20 73 79 6e 63 68 72 6f 6e         synchron
2380: 69 7a 65 20 7b 20 70 72 6f 74 6f 74 79 70 65 2e ize { prototype.
2390: 63 61 6c 6c 28 65 6e 76 29 20 7d 3c 2f 63 6f 64 call(env) }</cod
23a0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
23b0: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20       </ol>..   
23c0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
23d0: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
23e0: 61 72 74 3d 22 31 34 31 38 22 20 63 6c 61 73 73 art="1418" class
23f0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a ="post-context".
2400: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2410: 20 20 69 64 3d 22 70 6f 73 74 2d 33 39 22 20 6f   id="post-39" o
2420: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 33 nclick="toggle(3
2430: 39 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 9);">.          
2440: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2450: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2460: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2470: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2480: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
2490: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
24a0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
24b0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
24c0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
24d0: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
24e0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
24f0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2500: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2510: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
2520: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 70 72 ne"><code>    pr
2530: 69 76 61 74 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c ivate.</code></l
2540: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2550: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2560: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2570: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2580: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 64 65 "><code>      de
2590: 66 20 73 65 74 75 70 5f 64 65 66 61 75 6c 74 5f f setup_default_
25a0: 6d 69 64 64 6c 65 77 61 72 65 28 62 75 69 6c 64 middleware(build
25b0: 65 72 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e er).</code></li>
25c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
25d0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
25e0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
25f0: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
2600: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 62 75 <code>        bu
2610: 69 6c 64 65 72 2e 75 73 65 20 45 78 74 65 6e 64 ilder.use Extend
2620: 65 64 52 61 63 6b 0a 3c 2f 63 6f 64 65 3e 3c 2f edRack.</code></
2630: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2640: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2650: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2660: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
2670: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
2680: 20 62 75 69 6c 64 65 72 2e 75 73 65 20 53 68 6f  builder.use Sho
2690: 77 45 78 63 65 70 74 69 6f 6e 73 20 20 20 20 20 wExceptions     
26a0: 20 20 69 66 20 73 68 6f 77 5f 65 78 63 65 70 74   if show_except
26b0: 69 6f 6e 73 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c ions?.</code></l
26c0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
26d0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
26e0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
26f0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2700: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2710: 62 75 69 6c 64 65 72 2e 75 73 65 20 52 61 63 6b builder.use Rack
2720: 3a 3a 4d 65 74 68 6f 64 4f 76 65 72 72 69 64 65 ::MethodOverride
2730: 20 69 66 20 6d 65 74 68 6f 64 5f 6f 76 65 72 72  if method_overr
2740: 69 64 65 3f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ide?.</code></li
2750: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2760: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2770: 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20  </ol>.         
2780: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2790: 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22     <div class="
27a0: 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 clear"></div>.  
27b0: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
27c0: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
27d0: 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20      .      .   
27e0: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
27f0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2800: 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 73 74 65 frame-info syste
2810: 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 m">.            
2820: 20 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73   <code>&#x2F;Us
2830: 65 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 ers&#x2F;kareemg
2840: 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 rant&#x2F;.rvm&#
2850: 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 x2F;gems&#x2F;ru
2860: 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 by-1.9.3-p194@tr
2870: 61 66 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 affic_spy&#x2F;g
2880: 65 6d 73 26 23 78 32 46 3b 72 61 63 6b 2d 31 2e ems&#x2F;rack-1.
2890: 35 2e 32 26 23 78 32 46 3b 6c 69 62 26 23 78 32 5.2&#x2F;lib&#x2
28a0: 46 3b 72 61 63 6b 26 23 78 32 46 3b 6c 69 6e 74 F;rack&#x2F;lint
28b0: 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 .rb</code> in.  
28c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
28d0: 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 5f 63 61 6c ode><strong>_cal
28e0: 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 l</strong></code
28f0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f >.            </
2900: 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 li>..           
2910: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64 65  <li class="code
2920: 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 20  system">.      
2930: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2940: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
2950: 3d 22 34 32 22 0a 20 20 20 20 20 20 20 20 20 20 ="42".          
2960: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
2970: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
2980: 70 72 65 2d 34 30 22 0a 20 20 20 20 20 20 20 20 pre-40".        
2990: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
29a0: 6b 3d 22 74 6f 67 67 6c 65 28 34 30 29 3b 22 3e k="toggle(40);">
29b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
29c0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
29d0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
29e0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
29f0: 63 6f 64 65 3e 20 20 20 20 20 20 61 73 73 65 72 code>      asser
2a00: 74 28 26 71 75 6f 74 3b 4e 6f 20 65 6e 76 20 67 t(&quot;No env g
2a10: 69 76 65 6e 26 71 75 6f 74 3b 29 20 7b 20 65 6e iven&quot;) { en
2a20: 76 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e v }.</code></li>
2a30: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2a40: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2a50: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
2a60: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2a70: 63 6f 64 65 3e 20 20 20 20 20 20 63 68 65 63 6b code>      check
2a80: 5f 65 6e 76 20 65 6e 76 0a 3c 2f 63 6f 64 65 3e _env env.</code>
2a90: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2aa0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2ab0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2ac0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
2ad0: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
2ae0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2af0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2b00: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2b10: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2b20: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
2b30: 20 20 65 6e 76 5b 26 23 78 32 37 3b 72 61 63 6b   env[&#x27;rack
2b40: 2e 69 6e 70 75 74 26 23 78 32 37 3b 5d 20 3d 20 .input&#x27;] = 
2b50: 49 6e 70 75 74 57 72 61 70 70 65 72 2e 6e 65 77 InputWrapper.new
2b60: 28 65 6e 76 5b 26 23 78 32 37 3b 72 61 63 6b 2e (env[&#x27;rack.
2b70: 69 6e 70 75 74 26 23 78 32 37 3b 5d 29 0a 3c 2f input&#x27;]).</
2b80: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2b90: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2ba0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2bb0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2bc0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2bd0: 20 20 20 20 20 65 6e 76 5b 26 23 78 32 37 3b 72      env[&#x27;r
2be0: 61 63 6b 2e 65 72 72 6f 72 73 26 23 78 32 37 3b ack.errors&#x27;
2bf0: 5d 20 3d 20 45 72 72 6f 72 57 72 61 70 70 65 72 ] = ErrorWrapper
2c00: 2e 6e 65 77 28 65 6e 76 5b 26 23 78 32 37 3b 72 .new(env[&#x27;r
2c10: 61 63 6b 2e 65 72 72 6f 72 73 26 23 78 32 37 3b ack.errors&#x27;
2c20: 5d 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ]).</code></li>.
2c30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2c40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2c50: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2c60: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2c70: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
2c80: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2c90: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2ca0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2cb0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2cc0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 23 23 20 61 <code>      ## a
2cd0: 6e 64 20 72 65 74 75 72 6e 73 20 61 6e 20 41 72 nd returns an Ar
2ce0: 72 61 79 20 6f 66 20 65 78 61 63 74 6c 79 20 74 ray of exactly t
2cf0: 68 72 65 65 20 76 61 6c 75 65 73 3a 0a 3c 2f 63 hree values:.</c
2d00: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2d10: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2d20: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
2d30: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20              .. 
2d40: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
2d50: 20 73 74 61 72 74 3d 22 34 39 22 20 63 6c 61 73  start="49" clas
2d60: 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 s="context" id="
2d70: 34 30 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 40".            
2d80: 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74       onclick="t
2d90: 6f 67 67 6c 65 28 34 30 29 3b 22 3e 0a 20 20 20 oggle(40);">.   
2da0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2db0: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d  class="context-
2dc0: 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 line" id="contex
2dd0: 74 2d 34 30 22 3e 3c 63 6f 64 65 3e 20 20 20 20 t-40"><code>    
2de0: 20 20 73 74 61 74 75 73 2c 20 68 65 61 64 65 72   status, header
2df0: 73 2c 20 40 62 6f 64 79 20 3d 20 40 61 70 70 2e s, @body = @app.
2e00: 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 3e call(env)</code>
2e10: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2e20: 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20     </ol>..     
2e30: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2e40: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
2e50: 74 3d 22 35 30 22 20 63 6c 61 73 73 3d 22 70 6f t="50" class="po
2e60: 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 st-context".    
2e70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69 64               id
2e80: 3d 22 70 6f 73 74 2d 34 30 22 20 6f 6e 63 6c 69 ="post-40" oncli
2e90: 63 6b 3d 22 74 6f 67 67 6c 65 28 34 30 29 3b 22 ck="toggle(40);"
2ea0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2eb0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2ec0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
2ed0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
2ee0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 23 23 20 ><code>      ## 
2ef0: 54 68 65 20 2a 73 74 61 74 75 73 2a 2c 0a 3c 2f The *status*,.</
2f00: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2f10: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2f20: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2f30: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2f40: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2f50: 20 20 20 20 20 20 63 68 65 63 6b 5f 73 74 61 74       check_stat
2f60: 75 73 20 73 74 61 74 75 73 0a 3c 2f 63 6f 64 65 us status.</code
2f70: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
2f80: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2f90: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
2fa0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
2fb0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
2fc0: 20 20 23 23 20 74 68 65 20 2a 68 65 61 64 65 72   ## the *header
2fd0: 73 2a 2c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e s*,.</code></li>
2fe0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2ff0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3000: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3010: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3020: 3c 63 6f 64 65 3e 20 20 20 20 20 20 63 68 65 63 <code>      chec
3030: 6b 5f 68 65 61 64 65 72 73 20 68 65 61 64 65 72 k_headers header
3040: 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 s.</code></li>. 
3050: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3060: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3070: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
3080: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3090: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
30a0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
30b0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
30c0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
30d0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
30e0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 63 68 65 ><code>      che
30f0: 63 6b 5f 68 69 6a 61 63 6b 5f 72 65 73 70 6f 6e ck_hijack_respon
3100: 73 65 20 68 65 61 64 65 72 73 2c 20 65 6e 76 0a se headers, env.
3110: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3120: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3130: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3140: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
3150: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3160: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
3170: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3180: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
3190: 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /ol>.           
31a0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
31b0: 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c   <div class="cl
31c0: 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 ear"></div>.    
31d0: 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20         </li>.. 
31e0: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
31f0: 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20    .      .     
3200: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20      ..         
3210: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72    <li class="fr
3220: 61 6d 65 2d 69 6e 66 6f 20 73 79 73 74 65 6d 22 ame-info system"
3230: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3240: 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 <code>&#x2F;User
3250: 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 s&#x2F;kareemgra
3260: 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 nt&#x2F;.rvm&#x2
3270: 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 F;gems&#x2F;ruby
3280: 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 -1.9.3-p194@traf
3290: 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d fic_spy&#x2F;gem
32a0: 73 26 23 78 32 46 3b 72 61 63 6b 2d 31 2e 35 2e s&#x2F;rack-1.5.
32b0: 32 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 2&#x2F;lib&#x2F;
32c0: 72 61 63 6b 26 23 78 32 46 3b 6c 69 6e 74 2e 72 rack&#x2F;lint.r
32d0: 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 b</code> in.    
32e0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
32f0: 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f e><strong>call</
3300: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
3310: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
3320: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
3330: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 i class="code sy
3340: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
3350: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3360: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 33     <ol start="3
3370: 30 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 0".             
3380: 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d      class="pre-
3390: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 context" id="pre
33a0: 2d 34 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 -41".           
33b0: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
33c0: 74 6f 67 67 6c 65 28 34 31 29 3b 22 3e 0a 20 20 toggle(41);">.  
33d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
33e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
33f0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3400: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3410: 65 3e 20 20 20 20 23 23 20 61 66 74 65 72 20 74 e>    ## after t
3420: 6f 20 63 61 74 63 68 20 61 6c 6c 20 6d 69 73 74 o catch all mist
3430: 61 6b 65 73 2e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c akes..</code></l
3440: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3450: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3460: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3470: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
3480: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
3490: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
34a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
34b0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
34c0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
34d0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 23 20 e"><code>    ## 
34e0: 3d 20 52 61 63 6b 20 61 70 70 6c 69 63 61 74 69 = Rack applicati
34f0: 6f 6e 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ons.</code></li>
3500: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3510: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3520: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3530: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3540: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
3550: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3560: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3570: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3580: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
3590: 3e 3c 63 6f 64 65 3e 20 20 20 20 23 23 20 41 20 ><code>    ## A 
35a0: 52 61 63 6b 20 61 70 70 6c 69 63 61 74 69 6f 6e Rack application
35b0: 20 69 73 20 61 20 52 75 62 79 20 6f 62 6a 65 63  is a Ruby objec
35c0: 74 20 28 6e 6f 74 20 61 20 63 6c 61 73 73 29 20 t (not a class) 
35d0: 74 68 61 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 that.</code></li
35e0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
35f0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3600: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
3610: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
3620: 3c 63 6f 64 65 3e 20 20 20 20 23 23 20 72 65 73 <code>    ## res
3630: 70 6f 6e 64 73 20 74 6f 20 2b 63 61 6c 6c 2b 2e ponds to +call+.
3640: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3650: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3660: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3670: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
3680: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
3690: 65 3e 20 20 20 20 64 65 66 20 63 61 6c 6c 28 65 e>    def call(e
36a0: 6e 76 3d 6e 69 6c 29 0a 3c 2f 63 6f 64 65 3e 3c nv=nil).</code><
36b0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
36c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
36d0: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
36e0: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
36f0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
3700: 74 3d 22 33 37 22 20 63 6c 61 73 73 3d 22 63 6f t="37" class="co
3710: 6e 74 65 78 74 22 20 69 64 3d 22 34 31 22 0a 20 ntext" id="41". 
3720: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3730: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
3740: 28 34 31 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 (41);">.        
3750: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3760: 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 s="context-line"
3770: 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 34 31 22  id="context-41"
3780: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 64 75 70 ><code>      dup
3790: 2e 5f 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 ._call(env)</cod
37a0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
37b0: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20       </ol>..   
37c0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
37d0: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
37e0: 61 72 74 3d 22 33 38 22 20 63 6c 61 73 73 3d 22 art="38" class="
37f0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 post-context".  
3800: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3810: 69 64 3d 22 70 6f 73 74 2d 34 31 22 20 6f 6e 63 id="post-41" onc
3820: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 31 29 lick="toggle(41)
3830: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
3840: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3850: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3860: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
3870: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 e"><code>    end
3880: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3890: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
38a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
38b0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
38c0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
38d0: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
38e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
38f0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3900: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3910: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3920: 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 5f 63 <code>    def _c
3930: 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e all(env).</code>
3940: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3950: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3960: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3970: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
3980: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
3990: 20 23 23 20 49 74 20 74 61 6b 65 73 20 65 78 61  ## It takes exa
39a0: 63 74 6c 79 20 6f 6e 65 20 61 72 67 75 6d 65 6e ctly one argumen
39b0: 74 2c 20 74 68 65 20 2a 65 6e 76 69 72 6f 6e 6d t, the *environm
39c0: 65 6e 74 2a 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ent*.</code></li
39d0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
39e0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
39f0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
3a00: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
3a10: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 61 73 73 ><code>      ass
3a20: 65 72 74 28 26 71 75 6f 74 3b 4e 6f 20 65 6e 76 ert(&quot;No env
3a30: 20 67 69 76 65 6e 26 71 75 6f 74 3b 29 20 7b 20  given&quot;) { 
3a40: 65 6e 76 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c env }.</code></l
3a50: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3a60: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3a70: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3a80: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
3a90: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 63 68 "><code>      ch
3aa0: 65 63 6b 5f 65 6e 76 20 65 6e 76 0a 3c 2f 63 6f eck_env env.</co
3ab0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3ac0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3ad0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3ae0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
3af0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
3b00: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3b10: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3b20: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
3b30: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
3b40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
3b50: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
3b60: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
3b70: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
3b80: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
3b90: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3ba0: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
3bb0: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
3bc0: 69 6e 66 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 info system">.  
3bd0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
3be0: 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 e>&#x2F;Users&#x
3bf0: 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 2F;kareemgrant&#
3c00: 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 x2F;.rvm&#x2F;ge
3c10: 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 ms&#x2F;ruby-1.9
3c20: 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f .3-p194@traffic_
3c30: 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 spy&#x2F;gems&#x
3c40: 32 46 3b 72 61 63 6b 2d 31 2e 35 2e 32 26 23 78 2F;rack-1.5.2&#x
3c50: 32 46 3b 6c 69 62 26 23 78 32 46 3b 72 61 63 6b 2F;lib&#x2F;rack
3c60: 26 23 78 32 46 3b 73 68 6f 77 65 78 63 65 70 74 &#x2F;showexcept
3c70: 69 6f 6e 73 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 ions.rb</code> i
3c80: 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 n.              
3c90: 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e   <code><strong>
3ca0: 63 61 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 call</strong></c
3cb0: 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 ode>.           
3cc0: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
3cd0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63     <li class="c
3ce0: 6f 64 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 ode system">.   
3cf0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3d00: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
3d10: 61 72 74 3d 22 31 37 22 0a 20 20 20 20 20 20 20 art="17".       
3d20: 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73            class
3d30: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 ="pre-context" i
3d40: 64 3d 22 70 72 65 2d 34 32 22 0a 20 20 20 20 20 d="pre-42".     
3d50: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
3d60: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 32 29 lick="toggle(42)
3d70: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
3d80: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3d90: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3da0: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3db0: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
3dc0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3dd0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3de0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3df0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
3e00: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
3e10: 66 20 69 6e 69 74 69 61 6c 69 7a 65 28 61 70 70 f initialize(app
3e20: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
3e30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3e40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3e50: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
3e60: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3e70: 64 65 3e 20 20 20 20 20 20 40 61 70 70 20 3d 20 de>      @app = 
3e80: 61 70 70 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e app.</code></li>
3e90: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3ea0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3eb0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3ec0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3ed0: 63 6f 64 65 3e 20 20 20 20 20 20 40 74 65 6d 70 code>      @temp
3ee0: 6c 61 74 65 20 3d 20 45 52 42 2e 6e 65 77 28 54 late = ERB.new(T
3ef0: 45 4d 50 4c 41 54 45 29 0a 3c 2f 63 6f 64 65 3e EMPLATE).</code>
3f00: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3f10: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3f20: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3f30: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
3f40: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e ne"><code>    en
3f50: 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 d.</code></li>. 
3f60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3f70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3f80: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
3f90: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3fa0: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
3fb0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3fc0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3fd0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
3fe0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3ff0: 63 6f 64 65 3e 20 20 20 20 64 65 66 20 63 61 6c code>    def cal
<= Recv data, 16384 bytes (0x4000)
0000: 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c 2f l(env).</code></
0010: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0020: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0030: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
0040: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
0050: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
0060: 3d 22 32 34 22 20 63 6c 61 73 73 3d 22 63 6f 6e ="24" class="con
0070: 74 65 78 74 22 20 69 64 3d 22 34 32 22 0a 20 20 text" id="42".  
0080: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0090: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
00a0: 34 32 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 42);">.         
00b0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
00c0: 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 ="context-line" 
00d0: 69 64 3d 22 63 6f 6e 74 65 78 74 2d 34 32 22 3e id="context-42">
00e0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 61 70 70 <code>      @app
00f0: 2e 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 .call(env)</code
0100: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0110: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20      </ol>..    
0120: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0130: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
0140: 72 74 3d 22 32 35 22 20 63 6c 61 73 73 3d 22 70 rt="25" class="p
0150: 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 ost-context".   
0160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 69                i
0170: 64 3d 22 70 6f 73 74 2d 34 32 22 20 6f 6e 63 6c d="post-42" oncl
0180: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 32 29 3b ick="toggle(42);
0190: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
01a0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
01b0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
01c0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
01d0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 72 65 73 63 "><code>    resc
01e0: 75 65 20 53 74 61 6e 64 61 72 64 45 72 72 6f 72 ue StandardError
01f0: 2c 20 4c 6f 61 64 45 72 72 6f 72 2c 20 53 79 6e , LoadError, Syn
0200: 74 61 78 45 72 72 6f 72 20 3d 26 67 74 3b 20 65 taxError =&gt; e
0210: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0220: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0230: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0240: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
0250: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0260: 64 65 3e 20 20 20 20 20 20 65 78 63 65 70 74 69 de>      excepti
0270: 6f 6e 5f 73 74 72 69 6e 67 20 3d 20 64 75 6d 70 on_string = dump
0280: 5f 65 78 63 65 70 74 69 6f 6e 28 65 29 0a 3c 2f _exception(e).</
0290: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
02a0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
02b0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
02c0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
02d0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
02e0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
02f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0300: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0310: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
0320: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0330: 64 65 3e 20 20 20 20 20 20 65 6e 76 5b 26 71 75 de>      env[&qu
0340: 6f 74 3b 72 61 63 6b 2e 65 72 72 6f 72 73 26 71 ot;rack.errors&q
0350: 75 6f 74 3b 5d 2e 70 75 74 73 28 65 78 63 65 70 uot;].puts(excep
0360: 74 69 6f 6e 5f 73 74 72 69 6e 67 29 0a 3c 2f 63 tion_string).</c
0370: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0380: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0390: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
03a0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
03b0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
03c0: 20 20 20 20 20 65 6e 76 5b 26 71 75 6f 74 3b 72      env[&quot;r
03d0: 61 63 6b 2e 65 72 72 6f 72 73 26 71 75 6f 74 3b ack.errors&quot;
03e0: 5d 2e 66 6c 75 73 68 0a 3c 2f 63 6f 64 65 3e 3c ].flush.</code><
03f0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0400: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0410: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0420: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
0430: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
0440: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0450: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0460: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0470: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0480: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0490: 20 20 20 69 66 20 70 72 65 66 65 72 73 5f 70 6c    if prefers_pl
04a0: 61 69 6e 5f 74 65 78 74 3f 28 65 6e 76 29 0a 3c ain_text?(env).<
04b0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
04c0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
04d0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
04e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
04f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
0500: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
0510: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
0520: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
0530: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
0540: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0550: 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c  ..            <
0560: 6c 69 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d li class="frame-
0570: 69 6e 66 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 info system">.  
0580: 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64             <cod
0590: 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 23 78 e>&#x2F;Users&#x
05a0: 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 2F;kareemgrant&#
05b0: 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 x2F;.rvm&#x2F;ge
05c0: 6d 73 26 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 ms&#x2F;ruby-1.9
05d0: 2e 33 2d 70 31 39 34 40 74 72 61 66 66 69 63 5f .3-p194@traffic_
05e0: 73 70 79 26 23 78 32 46 3b 67 65 6d 73 26 23 78 spy&#x2F;gems&#x
05f0: 32 46 3b 72 61 63 6b 2d 31 2e 35 2e 32 26 23 78 2F;rack-1.5.2&#x
0600: 32 46 3b 6c 69 62 26 23 78 32 46 3b 72 61 63 6b 2F;lib&#x2F;rack
0610: 26 23 78 32 46 3b 63 6f 6d 6d 6f 6e 6c 6f 67 67 &#x2F;commonlogg
0620: 65 72 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a er.rb</code> in.
0630: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0640: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63 61 <code><strong>ca
0650: 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 ll</strong></cod
0660: 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c e>.            <
0670: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
0680: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64   <li class="cod
0690: 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 e system">.     
06a0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
06b0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
06c0: 74 3d 22 32 36 22 0a 20 20 20 20 20 20 20 20 20 t="26".         
06d0: 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22          class="
06e0: 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d pre-context" id=
06f0: 22 70 72 65 2d 34 33 22 0a 20 20 20 20 20 20 20 "pre-43".       
0700: 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69            oncli
0710: 63 6b 3d 22 74 6f 67 67 6c 65 28 34 33 29 3b 22 ck="toggle(43);"
0720: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0730: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0740: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
0750: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
0760: 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 69 6e <code>    def in
0770: 69 74 69 61 6c 69 7a 65 28 61 70 70 2c 20 6c 6f itialize(app, lo
0780: 67 67 65 72 3d 6e 69 6c 29 0a 3c 2f 63 6f 64 65 gger=nil).</code
0790: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
07a0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
07b0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
07c0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
07d0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
07e0: 20 40 61 70 70 20 3d 20 61 70 70 0a 3c 2f 63 6f  @app = app.</co
07f0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0800: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0810: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0820: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0830: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0840: 20 20 20 40 6c 6f 67 67 65 72 20 3d 20 6c 6f 67    @logger = log
0850: 67 65 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ger.</code></li>
0860: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0870: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
0880: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
0890: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
08a0: 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 code>    end.</c
08b0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
08c0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
08d0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
08e0: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
08f0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
0900: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
0910: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0920: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0930: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
0940: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
0950: 20 20 20 20 64 65 66 20 63 61 6c 6c 28 65 6e 76     def call(env
0960: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
0970: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0980: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0990: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
09a0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
09b0: 64 65 3e 20 20 20 20 20 20 62 65 67 61 6e 5f 61 de>      began_a
09c0: 74 20 3d 20 54 69 6d 65 2e 6e 6f 77 0a 3c 2f 63 t = Time.now.</c
09d0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
09e0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
09f0: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
0a00: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20              .. 
0a10: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
0a20: 20 73 74 61 72 74 3d 22 33 33 22 20 63 6c 61 73  start="33" clas
0a30: 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 s="context" id="
0a40: 34 33 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 43".            
0a50: 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74       onclick="t
0a60: 6f 67 67 6c 65 28 34 33 29 3b 22 3e 0a 20 20 20 oggle(43);">.   
0a70: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0a80: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d  class="context-
0a90: 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 line" id="contex
0aa0: 74 2d 34 33 22 3e 3c 63 6f 64 65 3e 20 20 20 20 t-43"><code>    
0ab0: 20 20 73 74 61 74 75 73 2c 20 68 65 61 64 65 72   status, header
0ac0: 2c 20 62 6f 64 79 20 3d 20 40 61 70 70 2e 63 61 , body = @app.ca
0ad0: 6c 6c 28 65 6e 76 29 3c 2f 63 6f 64 65 3e 3c 2f ll(env)</code></
0ae0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0af0: 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20   </ol>..       
0b00: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0b10: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
0b20: 22 33 34 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 "34" class="post
0b30: 2d 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 -context".      
0b40: 20 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22             id="
0b50: 70 6f 73 74 2d 34 33 22 20 6f 6e 63 6c 69 63 6b post-43" onclick
0b60: 3d 22 74 6f 67 67 6c 65 28 34 33 29 3b 22 3e 0a ="toggle(43);">.
0b70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0b80: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
0b90: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
0ba0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
0bb0: 63 6f 64 65 3e 20 20 20 20 20 20 68 65 61 64 65 code>      heade
0bc0: 72 20 3d 20 55 74 69 6c 73 3a 3a 48 65 61 64 65 r = Utils::Heade
0bd0: 72 48 61 73 68 2e 6e 65 77 28 68 65 61 64 65 72 rHash.new(header
0be0: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
0bf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0c00: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0c10: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
0c20: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0c30: 6f 64 65 3e 20 20 20 20 20 20 62 6f 64 79 20 3d ode>      body =
0c40: 20 42 6f 64 79 50 72 6f 78 79 2e 6e 65 77 28 62  BodyProxy.new(b
0c50: 6f 64 79 29 20 7b 20 6c 6f 67 28 65 6e 76 2c 20 ody) { log(env, 
0c60: 73 74 61 74 75 73 2c 20 68 65 61 64 65 72 2c 20 status, header, 
0c70: 62 65 67 61 6e 5f 61 74 29 20 7d 0a 3c 2f 63 6f began_at) }.</co
0c80: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0c90: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0ca0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0cb0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0cc0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0cd0: 20 20 20 20 5b 73 74 61 74 75 73 2c 20 68 65 61     [status, hea
0ce0: 64 65 72 2c 20 62 6f 64 79 5d 0a 3c 2f 63 6f 64 der, body].</cod
0cf0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0d00: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0d10: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0d20: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
0d30: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0d40: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
0d50: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
0d60: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
0d70: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
0d80: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
0d90: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
0da0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
0db0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
0dc0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
0dd0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
0de0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 70 72 ne"><code>    pr
0df0: 69 76 61 74 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c ivate.</code></l
0e00: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0e10: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0e20: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0e30: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
0e40: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
0e50: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0e60: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0e70: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
0e80: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0e90: 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61         <div cla
0ea0: 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 ss="clear"></div
0eb0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f >.            </
0ec0: 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a li>..          .
0ed0: 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 .        .      
0ee0: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
0ef0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0f00: 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 66 ss="frame-info f
0f10: 72 61 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 ramework">.     
0f20: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
0f30: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
0f40: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
0f50: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
0f60: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
0f70: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
0f80: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
0f90: 73 69 6e 61 74 72 61 2d 31 2e 33 2e 35 26 23 78 sinatra-1.3.5&#x
0fa0: 32 46 3b 6c 69 62 26 23 78 32 46 3b 73 69 6e 61 2F;lib&#x2F;sina
0fb0: 74 72 61 26 23 78 32 46 3b 62 61 73 65 2e 72 62 tra&#x2F;base.rb
0fc0: 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 </code> in.     
0fd0: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
0fe0: 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f 73 ><strong>call</s
0ff0: 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 trong></code>.  
1000: 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a           </li>.
1010: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
1020: 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 66 72 61  class="code fra
1030: 6d 65 77 6f 72 6b 22 3e 0a 20 20 20 20 20 20 20 mework">.       
1040: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1050: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
1060: 22 31 35 34 22 0a 20 20 20 20 20 20 20 20 20 20 "154".          
1070: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
1080: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
1090: 70 72 65 2d 34 34 22 0a 20 20 20 20 20 20 20 20 pre-44".        
10a0: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
10b0: 6b 3d 22 74 6f 67 67 6c 65 28 34 34 29 3b 22 3e k="toggle(44);">
10c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
10d0: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
10e0: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
10f0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1100: 63 6f 64 65 3e 20 20 20 20 20 20 65 6e 76 5b 26 code>      env[&
1110: 23 78 32 37 3b 73 69 6e 61 74 72 61 2e 63 6f 6d #x27;sinatra.com
1120: 6d 6f 6e 6c 6f 67 67 65 72 26 23 78 32 37 3b 5d monlogger&#x27;]
1130: 20 3f 20 40 61 70 70 2e 63 61 6c 6c 28 65 6e 76  ? @app.call(env
1140: 29 20 3a 20 73 75 70 65 72 0a 3c 2f 63 6f 64 65 ) : super.</code
1150: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1160: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1170: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1180: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
1190: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 ine"><code>    e
11a0: 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a nd.</code></li>.
11b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
11c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
11d0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
11e0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
11f0: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
1200: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1210: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1220: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1230: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1240: 3c 63 6f 64 65 3e 20 20 20 20 73 75 70 65 72 63 <code>    superc
1250: 6c 61 73 73 2e 63 6c 61 73 73 5f 65 76 61 6c 20 lass.class_eval 
1260: 64 6f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a do.</code></li>.
1270: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1280: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1290: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
12a0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
12b0: 6f 64 65 3e 20 20 20 20 20 20 61 6c 69 61 73 20 ode>      alias 
12c0: 63 61 6c 6c 5f 77 69 74 68 6f 75 74 5f 63 68 65 call_without_che
12d0: 63 6b 20 63 61 6c 6c 20 75 6e 6c 65 73 73 20 6d ck call unless m
12e0: 65 74 68 6f 64 5f 64 65 66 69 6e 65 64 3f 20 3a ethod_defined? :
12f0: 63 61 6c 6c 5f 77 69 74 68 6f 75 74 5f 63 68 65 call_without_che
1300: 63 6b 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ck.</code></li>.
1310: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1320: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1330: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
1340: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1350: 6f 64 65 3e 20 20 20 20 20 20 64 65 66 20 63 61 ode>      def ca
1360: 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 3e 3c ll(env).</code><
1370: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
1380: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1390: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
13a0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
13b0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
13c0: 20 65 6e 76 5b 26 23 78 32 37 3b 73 69 6e 61 74  env[&#x27;sinat
13d0: 72 61 2e 63 6f 6d 6d 6f 6e 6c 6f 67 67 65 72 26 ra.commonlogger&
13e0: 23 78 32 37 3b 5d 20 3d 20 74 72 75 65 0a 3c 2f #x27;] = true.</
13f0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1400: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1410: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
1420: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a               ..
1430: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
1440: 6c 20 73 74 61 72 74 3d 22 31 36 31 22 20 63 6c l start="161" cl
1450: 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 ass="context" id
1460: 3d 22 34 34 22 0a 20 20 20 20 20 20 20 20 20 20 ="44".          
1470: 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d         onclick=
1480: 22 74 6f 67 67 6c 65 28 34 34 29 3b 22 3e 0a 20 "toggle(44);">. 
1490: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
14a0: 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 li class="contex
14b0: 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 t-line" id="cont
14c0: 65 78 74 2d 34 34 22 3e 3c 63 6f 64 65 3e 20 20 ext-44"><code>  
14d0: 20 20 20 20 20 20 63 61 6c 6c 5f 77 69 74 68 6f       call_witho
14e0: 75 74 5f 63 68 65 63 6b 28 65 6e 76 29 3c 2f 63 ut_check(env)</c
14f0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1500: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20         </ol>.. 
1510: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1520: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
1530: 73 74 61 72 74 3d 22 31 36 32 22 20 63 6c 61 73 start="162" clas
1540: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 s="post-context"
1550: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1560: 20 20 20 69 64 3d 22 70 6f 73 74 2d 34 34 22 20    id="post-44" 
1570: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
1580: 34 34 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 44);">.         
1590: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
15a0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
15b0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
15c0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
15d0: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
15e0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
15f0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1600: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1610: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1620: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a "><code>    end.
1630: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1640: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1650: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
1660: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
1670: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
1680: 65 3e 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c e>  end.</code><
1690: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
16a0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
16b0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
16c0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
16d0: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
16e0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
16f0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1700: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1710: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
1720: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 63 -line"><code>  c
1730: 6c 61 73 73 20 4e 6f 74 46 6f 75 6e 64 20 26 6c lass NotFound &l
1740: 74 3b 20 4e 61 6d 65 45 72 72 6f 72 20 23 3a 6e t; NameError #:n
1750: 6f 64 6f 63 3a 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c odoc:.</code></l
1760: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1770: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1780: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1790: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
17a0: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 "><code>    def 
17b0: 63 6f 64 65 20 3b 20 34 30 34 20 3b 20 65 6e 64 code ; 404 ; end
17c0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
17d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
17e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
17f0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1800: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1810: 64 65 3e 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e de>  end.</code>
1820: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
1830: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1840: 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20      </ol>.     
1850: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1860: 20 20 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61         <div cla
1870: 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 ss="clear"></div
1880: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f >.            </
1890: 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a li>..          .
18a0: 0a 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 .        .      
18b0: 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 .          ..   
18c0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
18d0: 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 ss="frame-info s
18e0: 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 ystem">.        
18f0: 20 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32       <code>&#x2
1900: 46 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 F;Users&#x2F;kar
1910: 65 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 eemgrant&#x2F;.r
1920: 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 vm&#x2F;gems&#x2
1930: 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 F;ruby-1.9.3-p19
1940: 34 40 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 4@traffic_spy&#x
1950: 32 46 3b 67 65 6d 73 26 23 78 32 46 3b 73 68 6f 2F;gems&#x2F;sho
1960: 74 67 75 6e 2d 30 2e 39 26 23 78 32 46 3b 6c 69 tgun-0.9&#x2F;li
1970: 62 26 23 78 32 46 3b 73 68 6f 74 67 75 6e 26 23 b&#x2F;shotgun&#
1980: 78 32 46 3b 6c 6f 61 64 65 72 2e 72 62 3c 2f 63 x2F;loader.rb</c
1990: 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 ode> in.        
19a0: 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73         <code><s
19b0: 74 72 6f 6e 67 3e 70 72 6f 63 65 65 64 5f 61 73 trong>proceed_as
19c0: 5f 63 68 69 6c 64 3c 2f 73 74 72 6f 6e 67 3e 3c _child</strong><
19d0: 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 /code>.         
19e0: 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20    </li>..      
19f0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1a00: 22 63 6f 64 65 20 73 79 73 74 65 6d 22 3e 0a 20 "code system">. 
1a10: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1a20: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
1a30: 73 74 61 72 74 3d 22 37 39 22 0a 20 20 20 20 20 start="79".     
1a40: 20 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61              cla
1a50: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 ss="pre-context"
1a60: 20 69 64 3d 22 70 72 65 2d 34 35 22 0a 20 20 20  id="pre-45".   
1a70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f                o
1a80: 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 nclick="toggle(4
1a90: 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 5);">.          
1aa0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1ab0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1ac0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
1ad0: 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 ne"><code>.</cod
1ae0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1af0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1b00: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1b10: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
1b20: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1b30: 23 23 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ##.</code></li>.
1b40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1b50: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1b60: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
1b70: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1b80: 6f 64 65 3e 20 20 20 20 23 20 53 74 75 66 66 20 ode>    # Stuff 
1b90: 74 68 61 74 20 68 61 70 70 65 6e 73 20 69 6e 20 that happens in 
1ba0: 74 68 65 20 63 68 69 6c 64 20 70 72 6f 63 65 73 the child proces
1bb0: 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 s.</code></li>. 
1bc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1bd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1be0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1bf0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1c00: 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e de>.</code></li>
1c10: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1c20: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1c30: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
1c40: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
1c50: 63 6f 64 65 3e 20 20 20 20 64 65 66 20 70 72 6f code>    def pro
1c60: 63 65 65 64 5f 61 73 5f 63 68 69 6c 64 0a 3c 2f ceed_as_child.</
1c70: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1c80: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1c90: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1ca0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
1cb0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
1cc0: 20 20 20 20 20 62 6f 6f 6d 20 3d 20 66 61 6c 73      boom = fals
1cd0: 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 e.</code></li>. 
1ce0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1cf0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1d00: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1d10: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1d20: 64 65 3e 20 20 20 20 20 20 40 72 65 61 64 65 72 de>      @reader
1d30: 2e 63 6c 6f 73 65 0a 3c 2f 63 6f 64 65 3e 3c 2f .close.</code></
1d40: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
1d50: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1d60: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
1d70: 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20        ..       
1d80: 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74        <ol start
1d90: 3d 22 38 36 22 20 63 6c 61 73 73 3d 22 63 6f 6e ="86" class="con
1da0: 74 65 78 74 22 20 69 64 3d 22 34 35 22 0a 20 20 text" id="45".  
1db0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1dc0: 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 onclick="toggle(
1dd0: 34 35 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 45);">.         
1de0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1df0: 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 20 ="context-line" 
1e00: 69 64 3d 22 63 6f 6e 74 65 78 74 2d 34 35 22 3e id="context-45">
1e10: 3c 63 6f 64 65 3e 20 20 20 20 20 20 73 74 61 74 <code>      stat
1e20: 75 73 2c 20 68 65 61 64 65 72 73 2c 20 62 6f 64 us, headers, bod
1e30: 79 20 3d 20 61 73 73 65 6d 62 6c 65 5f 61 70 70 y = assemble_app
1e40: 2e 63 61 6c 6c 28 40 65 6e 76 29 3c 2f 63 6f 64 .call(@env)</cod
1e50: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1e60: 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20 20       </ol>..   
1e70: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1e80: 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74           <ol st
1e90: 61 72 74 3d 22 38 37 22 20 63 6c 61 73 73 3d 22 art="87" class="
1ea0: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 20 post-context".  
1eb0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1ec0: 69 64 3d 22 70 6f 73 74 2d 34 35 22 20 6f 6e 63 id="post-45" onc
1ed0: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 35 29 lick="toggle(45)
1ee0: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
1ef0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1f00: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
1f10: 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e post-context-lin
1f20: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 4d e"><code>      M
1f30: 61 72 73 68 61 6c 2e 64 75 6d 70 28 5b 3a 6f 6b arshal.dump([:ok
1f40: 2c 20 73 74 61 74 75 73 2c 20 68 65 61 64 65 72 , status, header
1f50: 73 2e 74 6f 5f 68 61 73 68 5d 2c 20 40 77 72 69 s.to_hash], @wri
1f60: 74 65 72 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ter).</code></li
1f70: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1f80: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1f90: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
1fa0: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
1fb0: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 73 70 65 ><code>      spe
1fc0: 63 5f 62 6f 64 79 28 62 6f 64 79 29 2e 65 61 63 c_body(body).eac
1fd0: 68 20 7b 20 7c 63 68 75 6e 6b 7c 20 40 77 72 69 h { |chunk| @wri
1fe0: 74 65 72 2e 77 72 69 74 65 28 63 68 75 6e 6b 29 ter.write(chunk)
1ff0: 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a  }.</code></li>.
2000: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2010: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2020: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
2030: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2040: 63 6f 64 65 3e 20 20 20 20 72 65 73 63 75 65 20 code>    rescue 
2050: 4f 62 6a 65 63 74 20 3d 26 67 74 3b 20 62 6f 6f Object =&gt; boo
2060: 6d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 m.</code></li>. 
2070: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2080: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2090: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
20a0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
20b0: 6f 64 65 3e 20 20 20 20 20 20 4d 61 72 73 68 61 ode>      Marsha
20c0: 6c 2e 64 75 6d 70 28 5b 0a 3c 2f 63 6f 64 65 3e l.dump([.</code>
20d0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
20e0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
20f0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2100: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2110: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
2120: 20 20 20 3a 65 72 72 6f 72 2c 0a 3c 2f 63 6f 64    :error,.</cod
2130: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2140: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2150: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2160: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
2170: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2180: 20 20 20 20 20 26 71 75 6f 74 3b 23 7b 62 6f 6f      &quot;#{boo
2190: 6d 2e 63 6c 61 73 73 2e 6e 61 6d 65 7d 3a 20 23 m.class.name}: #
21a0: 7b 62 6f 6f 6d 2e 74 6f 5f 73 7d 26 71 75 6f 74 {boom.to_s}&quot
21b0: 3b 2c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ;,.</code></li>.
21c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
21d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
21e0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
21f0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2200: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 62 6f 6f code>        boo
2210: 6d 2e 62 61 63 6b 74 72 61 63 65 0a 3c 2f 63 6f m.backtrace.</co
2220: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2230: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2240: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
2250: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2260: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
2270: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
2280: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
2290: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
22a0: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
22b0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
22c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
22d0: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
22e0: 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 o system">.     
22f0: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
2300: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
2310: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
2320: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
2330: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
2340: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
2350: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
2360: 73 68 6f 74 67 75 6e 2d 30 2e 39 26 23 78 32 46 shotgun-0.9&#x2F
2370: 3b 6c 69 62 26 23 78 32 46 3b 73 68 6f 74 67 75 ;lib&#x2F;shotgu
2380: 6e 26 23 78 32 46 3b 6c 6f 61 64 65 72 2e 72 62 n&#x2F;loader.rb
2390: 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 </code> in.     
23a0: 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65            <code
23b0: 3e 3c 73 74 72 6f 6e 67 3e 63 61 6c 6c 21 3c 2f ><strong>call!</
23c0: 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 strong></code>. 
23d0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e            </li>
23e0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c ..            <l
23f0: 69 20 63 6c 61 73 73 3d 22 63 6f 64 65 20 73 79 i class="code sy
2400: 73 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 stem">.         
2410: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2420: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 32     <ol start="2
2430: 34 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 4".             
2440: 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72 65 2d      class="pre-
2450: 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 72 65 context" id="pre
2460: 2d 34 36 22 0a 20 20 20 20 20 20 20 20 20 20 20 -46".           
2470: 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22        onclick="
2480: 74 6f 67 67 6c 65 28 34 36 29 3b 22 3e 0a 20 20 toggle(46);">.  
2490: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
24a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
24b0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
24c0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
24d0: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
24e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
24f0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2500: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2510: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2520: 6f 64 65 3e 20 20 20 20 20 20 53 68 6f 74 67 75 ode>      Shotgu
2530: 6e 2e 62 65 66 6f 72 65 5f 66 6f 72 6b 21 0a 3c n.before_fork!.<
2540: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
2550: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
2560: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
2570: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
2580: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2590: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
25a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
25b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
25c0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
25d0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
25e0: 65 3e 20 20 20 20 20 20 69 66 20 40 63 68 69 6c e>      if @chil
25f0: 64 20 3d 20 66 6f 72 6b 0a 3c 2f 63 6f 64 65 3e d = fork.</code>
2600: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2610: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2620: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2630: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
2640: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2650: 20 20 70 72 6f 63 65 65 64 5f 61 73 5f 70 61 72   proceed_as_par
2660: 65 6e 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ent.</code></li>
2670: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2680: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2690: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
26a0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
26b0: 63 6f 64 65 3e 20 20 20 20 20 20 65 6c 73 65 0a code>      else.
26c0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
26d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
26e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
26f0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2700: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2710: 3e 20 20 20 20 20 20 20 20 53 68 6f 74 67 75 6e >        Shotgun
2720: 2e 61 66 74 65 72 5f 66 6f 72 6b 21 0a 3c 2f 63 .after_fork!.</c
2730: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
2740: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2750: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
2760: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20              .. 
2770: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c              <ol
2780: 20 73 74 61 72 74 3d 22 33 31 22 20 63 6c 61 73  start="31" clas
2790: 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 s="context" id="
27a0: 34 36 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 46".            
27b0: 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74       onclick="t
27c0: 6f 67 67 6c 65 28 34 36 29 3b 22 3e 0a 20 20 20 oggle(46);">.   
27d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
27e0: 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d  class="context-
27f0: 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 line" id="contex
2800: 74 2d 34 36 22 3e 3c 63 6f 64 65 3e 20 20 20 20 t-46"><code>    
2810: 20 20 20 20 70 72 6f 63 65 65 64 5f 61 73 5f 63     proceed_as_c
2820: 68 69 6c 64 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e hild</code></li>
2830: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
2840: 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /ol>..          
2850: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2860: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 33 32    <ol start="32
2870: 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f " class="post-co
2880: 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 20 20 ntext".         
2890: 20 20 20 20 20 20 20 20 20 69 64 3d 22 70 6f 73          id="pos
28a0: 74 2d 34 36 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 t-46" onclick="t
28b0: 6f 67 67 6c 65 28 34 36 29 3b 22 3e 0a 20 20 20 oggle(46);">.   
28c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
28d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
28e0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
28f0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2900: 65 3e 20 20 20 20 20 20 65 6e 64 0a 3c 2f 63 6f e>      end.</co
2910: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2920: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2930: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2940: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
2950: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2960: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
2970: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2980: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2990: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
29a0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
29b0: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
29c0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
29d0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
29e0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
29f0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
2a00: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 23 ine"><code>    #
2a10: 23 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 #.</code></li>. 
2a20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2a30: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2a40: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
2a50: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2a60: 6f 64 65 3e 20 20 20 20 23 20 53 74 75 66 66 20 ode>    # Stuff 
2a70: 74 68 61 74 20 68 61 70 70 65 6e 73 20 69 6e 20 that happens in 
2a80: 74 68 65 20 70 61 72 65 6e 74 20 70 72 6f 63 65 the parent proce
2a90: 73 73 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ss.</code></li>.
2aa0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2ab0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2ac0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
2ad0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
2ae0: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
2af0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2b00: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2b10: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2b20: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2b30: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 "><code>    def 
2b40: 70 72 6f 63 65 65 64 5f 61 73 5f 70 61 72 65 6e proceed_as_paren
2b50: 74 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 t.</code></li>. 
2b60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2b70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
2b80: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
2b90: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2ba0: 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65  <div class="cle
2bb0: 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 ar"></div>.     
2bc0: 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20        </li>..  
2bd0: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
2be0: 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20   .      .      
2bf0: 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20     ..          
2c00: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72 61   <li class="fra
2c10: 6d 65 2d 69 6e 66 6f 20 73 79 73 74 65 6d 22 3e me-info system">
2c20: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
2c30: 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 code>&#x2F;Users
2c40: 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e &#x2F;kareemgran
2c50: 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 t&#x2F;.rvm&#x2F
2c60: 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 2d ;gems&#x2F;ruby-
2c70: 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 66 1.9.3-p194@traff
2c80: 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d 73 ic_spy&#x2F;gems
2c90: 26 23 78 32 46 3b 73 68 6f 74 67 75 6e 2d 30 2e &#x2F;shotgun-0.
2ca0: 39 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 9&#x2F;lib&#x2F;
2cb0: 73 68 6f 74 67 75 6e 26 23 78 32 46 3b 6c 6f 61 shotgun&#x2F;loa
2cc0: 64 65 72 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e der.rb</code> in
2cd0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2ce0: 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 63  <code><strong>c
2cf0: 61 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f all</strong></co
2d00: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
2d10: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
2d20: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
2d30: 64 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 de system">.    
2d40: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2d50: 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61          <ol sta
2d60: 72 74 3d 22 31 31 22 0a 20 20 20 20 20 20 20 20 rt="11".        
2d70: 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d           class=
2d80: 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 "pre-context" id
2d90: 3d 22 70 72 65 2d 34 37 22 0a 20 20 20 20 20 20 ="pre-47".      
2da0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
2db0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 37 29 3b ick="toggle(47);
2dc0: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
2dd0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2de0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2df0: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
2e00: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
2e10: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
2e20: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2e30: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2e40: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
2e50: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 e"><code>    def
2e60: 20 69 6e 69 74 69 61 6c 69 7a 65 28 72 61 63 6b  initialize(rack
2e70: 75 70 5f 66 69 6c 65 2c 20 26 61 6d 70 3b 62 6c up_file, &amp;bl
2e80: 6f 63 6b 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ock).</code></li
2e90: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2ea0: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
2eb0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
2ec0: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
2ed0: 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 72 61 63 <code>      @rac
2ee0: 6b 75 70 5f 66 69 6c 65 20 3d 20 72 61 63 6b 75 kup_file = racku
2ef0: 70 5f 66 69 6c 65 0a 3c 2f 63 6f 64 65 3e 3c 2f p_file.</code></
2f00: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2f10: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2f20: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
2f30: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
2f40: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 40 63 "><code>      @c
2f50: 6f 6e 66 69 67 20 3d 20 62 6c 6f 63 6b 20 7c 7c onfig = block ||
2f60: 20 50 72 6f 63 2e 6e 65 77 20 7b 20 7d 0a 3c 2f  Proc.new { }.</
2f70: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2f80: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2f90: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2fa0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
2fb0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2fc0: 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f    end.</code></
2fd0: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
2fe0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2ff0: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3000: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3010: 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e "><code>.</code>
3020: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
3030: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3040: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
3050: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
3060: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
3070: 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f f call(env).</co
3080: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3090: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
30a0: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
30b0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20             ..  
30c0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20             <ol 
30d0: 73 74 61 72 74 3d 22 31 38 22 20 63 6c 61 73 73 start="18" class
30e0: 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 34 ="context" id="4
30f0: 37 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 7".             
3100: 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f      onclick="to
3110: 67 67 6c 65 28 34 37 29 3b 22 3e 0a 20 20 20 20 ggle(47);">.    
3120: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3130: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c class="context-l
3140: 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 ine" id="context
3150: 2d 34 37 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 -47"><code>     
3160: 20 64 75 70 2e 63 61 6c 6c 21 28 65 6e 76 29 3c  dup.call!(env)<
3170: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
3180: 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a           </ol>.
3190: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
31a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6f               <o
31b0: 6c 20 73 74 61 72 74 3d 22 31 39 22 20 63 6c 61 l start="19" cla
31c0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
31d0: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
31e0: 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 34 37 22     id="post-47"
31f0: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
3200: 28 34 37 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 (47);">.        
3210: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
3220: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
3230: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
3240: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
3250: 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  end.</code></li
3260: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3270: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
3280: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f    <li class="po
3290: 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 st-context-line"
32a0: 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c ><code>.</code><
32b0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
32c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
32d0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
32e0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
32f0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 ne"><code>    de
3300: 66 20 63 61 6c 6c 21 28 65 6e 76 29 0a 3c 2f 63 f call!(env).</c
3310: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
3320: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
3330: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
3340: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
3350: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3360: 20 20 20 20 20 40 65 6e 76 20 3d 20 65 6e 76 0a      @env = env.
3370: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3380: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3390: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
33a0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
33b0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
33c0: 65 3e 20 20 20 20 20 20 40 72 65 61 64 65 72 2c e>      @reader,
33d0: 20 40 77 72 69 74 65 72 20 3d 20 49 4f 2e 70 69  @writer = IO.pi
33e0: 70 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a pe.</code></li>.
33f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3400: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3410: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
3420: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
3430: 63 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c code>.</code></l
3440: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3450: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3460: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3470: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
3480: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 53 68 "><code>      Sh
3490: 6f 74 67 75 6e 2e 62 65 66 6f 72 65 5f 66 6f 72 otgun.before_for
34a0: 6b 21 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a k!.</code></li>.
34b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
34c0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
34d0: 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /ol>.           
34e0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
34f0: 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63 6c   <div class="cl
3500: 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 ear"></div>.    
3510: 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20         </li>.. 
3520: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
3530: 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20 20    .      .     
3540: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20      ..         
3550: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66 72    <li class="fr
3560: 61 6d 65 2d 69 6e 66 6f 20 73 79 73 74 65 6d 22 ame-info system"
3570: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
3580: 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 <code>&#x2F;User
3590: 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 s&#x2F;kareemgra
35a0: 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 nt&#x2F;.rvm&#x2
35b0: 46 3b 67 65 6d 73 26 23 78 32 46 3b 72 75 62 79 F;gems&#x2F;ruby
35c0: 2d 31 2e 39 2e 33 2d 70 31 39 34 40 74 72 61 66 -1.9.3-p194@traf
35d0: 66 69 63 5f 73 70 79 26 23 78 32 46 3b 67 65 6d fic_spy&#x2F;gem
35e0: 73 26 23 78 32 46 3b 73 68 6f 74 67 75 6e 2d 30 s&#x2F;shotgun-0
35f0: 2e 39 26 23 78 32 46 3b 6c 69 62 26 23 78 32 46 .9&#x2F;lib&#x2F
3600: 3b 73 68 6f 74 67 75 6e 26 23 78 32 46 3b 66 61 ;shotgun&#x2F;fa
3610: 76 69 63 6f 6e 2e 72 62 3c 2f 63 6f 64 65 3e 20 vicon.rb</code> 
3620: 69 6e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 in.             
3630: 20 20 20 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67    <code><strong
3640: 3e 63 61 6c 6c 3c 2f 73 74 72 6f 6e 67 3e 3c 2f >call</strong></
3650: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
3660: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
3670: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3680: 63 6f 64 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 code system">.  
3690: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
36a0: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
36b0: 74 61 72 74 3d 22 35 22 0a 20 20 20 20 20 20 20 tart="5".       
36c0: 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73 73            class
36d0: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 ="pre-context" i
36e0: 64 3d 22 70 72 65 2d 34 38 22 0a 20 20 20 20 20 d="pre-48".     
36f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63              onc
3700: 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 38 29 lick="toggle(48)
3710: 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ;">.            
3720: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
3730: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
3740: 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 pre-context-line
3750: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 64 65 66 20 "><code>    def 
3760: 63 61 6c 6c 28 65 6e 76 29 0a 3c 2f 63 6f 64 65 call(env).</code
3770: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
3780: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3790: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
37a0: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
37b0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
37c0: 20 69 66 20 65 6e 76 5b 26 23 78 32 37 3b 50 41  if env[&#x27;PA
37d0: 54 48 5f 49 4e 46 4f 26 23 78 32 37 3b 5d 20 3d TH_INFO&#x27;] =
37e0: 3d 20 26 23 78 32 37 3b 26 23 78 32 46 3b 66 61 = &#x27;&#x2F;fa
37f0: 76 69 63 6f 6e 2e 69 63 6f 26 23 78 32 37 3b 0a vicon.ico&#x27;.
3800: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3810: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3820: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3830: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
3840: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
3850: 3e 20 20 20 20 20 20 20 20 5b 34 30 34 2c 20 7b >        [404, {
3860: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
3870: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
3880: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
3890: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
38a0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
38b0: 65 3e 20 20 20 20 20 20 20 20 20 20 26 23 78 32 e>          &#x2
38c0: 37 3b 43 6f 6e 74 65 6e 74 2d 54 79 70 65 26 23 7;Content-Type&#
38d0: 78 32 37 3b 20 20 3d 26 67 74 3b 20 26 23 78 32 x27;  =&gt; &#x2
38e0: 37 3b 69 6d 61 67 65 26 23 78 32 46 3b 70 6e 67 7;image&#x2F;png
38f0: 26 23 78 32 37 3b 2c 0a 3c 2f 63 6f 64 65 3e 3c &#x27;,.</code><
3900: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3910: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3920: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3930: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
3940: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
3950: 20 20 20 26 23 78 32 37 3b 43 61 63 68 65 2d 43    &#x27;Cache-C
3960: 6f 6e 74 72 6f 6c 26 23 78 32 37 3b 20 3d 26 67 ontrol&#x27; =&g
3970: 74 3b 20 26 23 78 32 37 3b 70 75 62 6c 69 63 2c t; &#x27;public,
3980: 20 6d 61 78 2d 61 67 65 3d 31 30 30 30 30 30 30  max-age=1000000
3990: 30 30 30 30 30 26 23 78 32 37 3b 0a 3c 2f 63 6f 00000&#x27;.</co
39a0: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
39b0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
39c0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
39d0: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
39e0: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
39f0: 20 20 20 20 20 7d 2c 20 5b 5d 5d 0a 3c 2f 63 6f      }, []].</co
3a00: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3a10: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3a20: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3a30: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
3a40: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
3a50: 20 20 20 65 6c 73 65 0a 3c 2f 63 6f 64 65 3e 3c    else.</code><
3a60: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
3a70: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3a80: 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20     </ol>.      
3a90: 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20         ..      
3aa0: 20 20 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72         <ol star
3ab0: 74 3d 22 31 32 22 20 63 6c 61 73 73 3d 22 63 6f t="12" class="co
3ac0: 6e 74 65 78 74 22 20 69 64 3d 22 34 38 22 0a 20 ntext" id="48". 
3ad0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3ae0: 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65  onclick="toggle
3af0: 28 34 38 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 (48);">.        
3b00: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
3b10: 73 3d 22 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 s="context-line"
3b20: 20 69 64 3d 22 63 6f 6e 74 65 78 74 2d 34 38 22  id="context-48"
3b30: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 61 ><code>        a
3b40: 70 70 2e 63 61 6c 6c 28 65 6e 76 29 3c 2f 63 6f pp.call(env)</co
3b50: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3b60: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 0a 20 20        </ol>..  
3b70: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3b80: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
3b90: 74 61 72 74 3d 22 31 33 22 20 63 6c 61 73 73 3d tart="13" class=
3ba0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 22 0a 20 "post-context". 
3bb0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3bc0: 20 69 64 3d 22 70 6f 73 74 2d 34 38 22 20 6f 6e  id="post-48" on
3bd0: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 34 38 click="toggle(48
3be0: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
3bf0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
3c00: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
3c10: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
3c20: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
3c30: 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e end.</code></li>
3c40: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
3c50: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3c60: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
3c70: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
3c80: 3c 63 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f <code>    end.</
3c90: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
3ca0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3cb0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3cc0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
3cd0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3ce0: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
3cf0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
3d00: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
3d10: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
3d20: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
3d30: 22 3e 3c 63 6f 64 65 3e 65 6e 64 0a 3c 2f 63 6f "><code>end.</co
3d40: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
3d50: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3d60: 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20         </ol>.  
3d70: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
3d80: 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76 20            <div 
3d90: 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f class="clear"></
3da0: 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 20 div>.           
3db0: 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20  </li>..        
3dc0: 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20 20   ..        .   
3dd0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a 0a    .          ..
3de0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3df0: 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e 66 class="frame-inf
3e00: 6f 20 73 79 73 74 65 6d 22 3e 0a 20 20 20 20 20 o system">.     
3e10: 20 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26          <code>&
3e20: 23 78 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b #x2F;Users&#x2F;
3e30: 6b 61 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 kareemgrant&#x2F
3e40: 3b 2e 72 76 6d 26 23 78 32 46 3b 67 65 6d 73 26 ;.rvm&#x2F;gems&
3e50: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
3e60: 70 31 39 34 40 74 72 61 66 66 69 63 5f 73 70 79 p194@traffic_spy
3e70: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
3e80: 72 61 63 6b 2d 31 2e 35 2e 32 26 23 78 32 46 3b rack-1.5.2&#x2F;
3e90: 6c 69 62 26 23 78 32 46 3b 72 61 63 6b 26 23 78 lib&#x2F;rack&#x
3ea0: 32 46 3b 62 75 69 6c 64 65 72 2e 72 62 3c 2f 63 2F;builder.rb</c
3eb0: 6f 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 ode> in.        
3ec0: 20 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73         <code><s
3ed0: 74 72 6f 6e 67 3e 63 61 6c 6c 3c 2f 73 74 72 6f trong>call</stro
3ee0: 6e 67 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 ng></code>.     
3ef0: 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20        </li>..  
3f00: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
3f10: 61 73 73 3d 22 63 6f 64 65 20 73 79 73 74 65 6d ass="code system
3f20: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
3f30: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
3f40: 3c 6f 6c 20 73 74 61 72 74 3d 22 31 33 31 22 0a <ol start="131".
3f50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3f60: 20 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e   class="pre-con
3f70: 74 65 78 74 22 20 69 64 3d 22 70 72 65 2d 34 39 text" id="pre-49
3f80: 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ".              
3f90: 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67     onclick="tog
3fa0: 67 6c 65 28 34 39 29 3b 22 3e 0a 20 20 20 20 20 gle(49);">.     
3fb0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
3fc0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3fd0: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
3fe0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
3ff0: 20 20 20 64 65 66 20 74 6f 5f 61 70 70 0a 3c 2f    def to_app.</
<= Recv data, 16384 bytes (0x4000)
0000: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
0010: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
0020: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
0030: 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 class="pre-conte
0040: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0050: 20 20 20 20 20 61 70 70 20 3d 20 40 6d 61 70 20      app = @map 
0060: 3f 20 67 65 6e 65 72 61 74 65 5f 6d 61 70 28 40 ? generate_map(@
0070: 72 75 6e 2c 20 40 6d 61 70 29 20 3a 20 40 72 75 run, @map) : @ru
0080: 6e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 n.</code></li>. 
0090: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
00a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
00b0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
00c0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
00d0: 64 65 3e 20 20 20 20 20 20 66 61 69 6c 20 26 71 de>      fail &q
00e0: 75 6f 74 3b 6d 69 73 73 69 6e 67 20 72 75 6e 20 uot;missing run 
00f0: 6f 72 20 6d 61 70 20 73 74 61 74 65 6d 65 6e 74 or map statement
0100: 26 71 75 6f 74 3b 20 75 6e 6c 65 73 73 20 61 70 &quot; unless ap
0110: 70 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 p.</code></li>. 
0120: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0130: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0140: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
0150: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
0160: 64 65 3e 20 20 20 20 20 20 40 75 73 65 2e 72 65 de>      @use.re
0170: 76 65 72 73 65 2e 69 6e 6a 65 63 74 28 61 70 70 verse.inject(app
0180: 29 20 7b 20 7c 61 2c 65 7c 20 65 5b 61 5d 20 7d ) { |a,e| e[a] }
0190: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
01a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
01b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
01c0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
01d0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
01e0: 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 e>    end.</code
01f0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0200: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0210: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0220: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
0230: 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f 63 6f ine"><code>.</co
0240: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0250: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0260: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0270: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
0280: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
0290: 20 64 65 66 20 63 61 6c 6c 28 65 6e 76 29 0a 3c  def call(env).<
02a0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
02b0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
02c0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
02d0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
02e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
02f0: 6f 6c 20 73 74 61 72 74 3d 22 31 33 38 22 20 63 ol start="138" c
0300: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 lass="context" i
0310: 64 3d 22 34 39 22 0a 20 20 20 20 20 20 20 20 20 d="49".         
0320: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
0330: 3d 22 74 6f 67 67 6c 65 28 34 39 29 3b 22 3e 0a ="toggle(49);">.
0340: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0350: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 <li class="conte
0360: 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e xt-line" id="con
0370: 74 65 78 74 2d 34 39 22 3e 3c 63 6f 64 65 3e 20 text-49"><code> 
0380: 20 20 20 20 20 74 6f 5f 61 70 70 2e 63 61 6c 6c      to_app.call
0390: 28 65 6e 76 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 (env)</code></li
03a0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
03b0: 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 </ol>..         
03c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
03d0: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31     <ol start="1
03e0: 33 39 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 39" class="post-
03f0: 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 context".       
0400: 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70            id="p
0410: 6f 73 74 2d 34 39 22 20 6f 6e 63 6c 69 63 6b 3d ost-49" onclick=
0420: 22 74 6f 67 67 6c 65 28 34 39 29 3b 22 3e 0a 20 "toggle(49);">. 
0430: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
0440: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0450: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
0460: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
0470: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
0480: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0490: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
04a0: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
04b0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
04c0: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
04d0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
04e0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
04f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
0500: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
0510: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0520: 3e 20 20 20 20 70 72 69 76 61 74 65 0a 3c 2f 63 >    private.</c
0530: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0540: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0550: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0560: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
0570: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a xt-line"><code>.
0580: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0590: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
05a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
05b0: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
05c0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
05d0: 65 3e 20 20 20 20 64 65 66 20 67 65 6e 65 72 61 e>    def genera
05e0: 74 65 5f 6d 61 70 28 64 65 66 61 75 6c 74 5f 61 te_map(default_a
05f0: 70 70 2c 20 6d 61 70 70 69 6e 67 29 0a 3c 2f 63 pp, mapping).</c
0600: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
0610: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
0620: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
0630: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
0640: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
0650: 20 20 20 20 20 6d 61 70 70 65 64 20 3d 20 64 65      mapped = de
0660: 66 61 75 6c 74 5f 61 70 70 20 3f 20 7b 26 23 78 fault_app ? {&#x
0670: 32 37 3b 26 23 78 32 46 3b 26 23 78 32 37 3b 20 27;&#x2F;&#x27; 
0680: 3d 26 67 74 3b 20 64 65 66 61 75 6c 74 5f 61 70 =&gt; default_ap
0690: 70 7d 20 3a 20 7b 7d 0a 3c 2f 63 6f 64 65 3e 3c p} : {}.</code><
06a0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
06b0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
06c0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
06d0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
06e0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
06f0: 6d 61 70 70 69 6e 67 2e 65 61 63 68 20 7b 20 7c mapping.each { |
0700: 72 2c 62 7c 20 6d 61 70 70 65 64 5b 72 5d 20 3d r,b| mapped[r] =
0710: 20 73 65 6c 66 2e 63 6c 61 73 73 2e 6e 65 77 28  self.class.new(
0720: 64 65 66 61 75 6c 74 5f 61 70 70 2c 20 26 61 6d default_app, &am
0730: 70 3b 62 29 20 7d 0a 3c 2f 63 6f 64 65 3e 3c 2f p;b) }.</code></
0740: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
0750: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
0760: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
0770: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0780: 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73       <div class
0790: 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a ="clear"></div>.
07a0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
07b0: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 >..          .. 
07c0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20        .      . 
07d0: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
07e0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
07f0: 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 73 79 73 ="frame-info sys
0800: 74 65 6d 22 3e 0a 20 20 20 20 20 20 20 20 20 20 tem">.          
0810: 20 20 20 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b     <code>&#x2F;
0820: 55 73 65 72 73 26 23 78 32 46 3b 6b 61 72 65 65 Users&#x2F;karee
0830: 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d mgrant&#x2F;.rvm
0840: 26 23 78 32 46 3b 67 65 6d 73 26 23 78 32 46 3b &#x2F;gems&#x2F;
0850: 72 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 40 ruby-1.9.3-p194@
0860: 74 72 61 66 66 69 63 5f 73 70 79 26 23 78 32 46 traffic_spy&#x2F
0870: 3b 67 65 6d 73 26 23 78 32 46 3b 72 61 63 6b 2d ;gems&#x2F;rack-
0880: 31 2e 35 2e 32 26 23 78 32 46 3b 6c 69 62 26 23 1.5.2&#x2F;lib&#
0890: 78 32 46 3b 72 61 63 6b 26 23 78 32 46 3b 68 61 x2F;rack&#x2F;ha
08a0: 6e 64 6c 65 72 26 23 78 32 46 3b 77 65 62 72 69 ndler&#x2F;webri
08b0: 63 6b 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a ck.rb</code> in.
08c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
08d0: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 73 65 <code><strong>se
08e0: 72 76 69 63 65 3c 2f 73 74 72 6f 6e 67 3e 3c 2f rvice</strong></
08f0: 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 code>.          
0900: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
0910: 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22      <li class="
0920: 63 6f 64 65 20 73 79 73 74 65 6d 22 3e 0a 20 20 code system">.  
0930: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
0940: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
0950: 74 61 72 74 3d 22 35 33 22 0a 20 20 20 20 20 20 tart="53".      
0960: 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73             clas
0970: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 s="pre-context" 
0980: 69 64 3d 22 70 72 65 2d 35 30 22 0a 20 20 20 20 id="pre-50".    
0990: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e               on
09a0: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 35 30 click="toggle(50
09b0: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
09c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
09d0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
09e0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
09f0: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
0a00: 20 65 6e 76 5b 26 71 75 6f 74 3b 51 55 45 52 59  env[&quot;QUERY
0a10: 5f 53 54 52 49 4e 47 26 71 75 6f 74 3b 5d 20 7c _STRING&quot;] |
0a20: 7c 3d 20 26 71 75 6f 74 3b 26 71 75 6f 74 3b 0a |= &quot;&quot;.
0a30: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0a40: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
0a50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
0a60: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
0a70: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
0a80: 3e 20 20 20 20 20 20 20 20 75 6e 6c 65 73 73 20 >        unless 
0a90: 65 6e 76 5b 26 71 75 6f 74 3b 50 41 54 48 5f 49 env[&quot;PATH_I
0aa0: 4e 46 4f 26 71 75 6f 74 3b 5d 20 3d 3d 20 26 71 NFO&quot;] == &q
0ab0: 75 6f 74 3b 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 uot;&quot;.</cod
0ac0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
0ad0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0ae0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
0af0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
0b00: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
0b10: 20 20 20 20 20 20 70 61 74 68 2c 20 6e 20 3d 20       path, n = 
0b20: 72 65 71 2e 72 65 71 75 65 73 74 5f 75 72 69 2e req.request_uri.
0b30: 70 61 74 68 2c 20 65 6e 76 5b 26 71 75 6f 74 3b path, env[&quot;
0b40: 53 43 52 49 50 54 5f 4e 41 4d 45 26 71 75 6f 74 SCRIPT_NAME&quot
0b50: 3b 5d 2e 6c 65 6e 67 74 68 0a 3c 2f 63 6f 64 65 ;].length.</code
0b60: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
0b70: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
0b80: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
0b90: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
0ba0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
0bb0: 20 20 20 20 20 65 6e 76 5b 26 71 75 6f 74 3b 50      env[&quot;P
0bc0: 41 54 48 5f 49 4e 46 4f 26 71 75 6f 74 3b 5d 20 ATH_INFO&quot;] 
0bd0: 3d 20 70 61 74 68 5b 6e 2c 20 70 61 74 68 2e 6c = path[n, path.l
0be0: 65 6e 67 74 68 2d 6e 5d 0a 3c 2f 63 6f 64 65 3e ength-n].</code>
0bf0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
0c00: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
0c10: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
0c20: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
0c30: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
0c40: 20 20 65 6e 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c   end.</code></l
0c50: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
0c60: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
0c70: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
0c80: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
0c90: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 65 ><code>        e
0ca0: 6e 76 5b 26 71 75 6f 74 3b 52 45 51 55 45 53 54 nv[&quot;REQUEST
0cb0: 5f 50 41 54 48 26 71 75 6f 74 3b 5d 20 7c 7c 3d _PATH&quot;] ||=
0cc0: 20 5b 65 6e 76 5b 26 71 75 6f 74 3b 53 43 52 49  [env[&quot;SCRI
0cd0: 50 54 5f 4e 41 4d 45 26 71 75 6f 74 3b 5d 2c 20 PT_NAME&quot;], 
0ce0: 65 6e 76 5b 26 71 75 6f 74 3b 50 41 54 48 5f 49 env[&quot;PATH_I
0cf0: 4e 46 4f 26 71 75 6f 74 3b 5d 5d 2e 6a 6f 69 6e NFO&quot;]].join
0d00: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0d10: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0d20: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0d30: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
0d40: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
0d50: 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a e>.</code></li>.
0d60: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
0d70: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
0d80: 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /ol>.           
0d90: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20    ..           
0da0: 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 36 30    <ol start="60
0db0: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
0dc0: 22 20 69 64 3d 22 35 30 22 0a 20 20 20 20 20 20 " id="50".      
0dd0: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
0de0: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 35 30 29 3b ick="toggle(50);
0df0: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
0e00: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
0e10: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
0e20: 63 6f 6e 74 65 78 74 2d 35 30 22 3e 3c 63 6f 64 context-50"><cod
0e30: 65 3e 20 20 20 20 20 20 20 20 73 74 61 74 75 73 e>        status
0e40: 2c 20 68 65 61 64 65 72 73 2c 20 62 6f 64 79 20 , headers, body 
0e50: 3d 20 40 61 70 70 2e 63 61 6c 6c 28 65 6e 76 29 = @app.call(env)
0e60: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
0e70: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
0e80: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
0e90: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
0ea0: 6f 6c 20 73 74 61 72 74 3d 22 36 31 22 20 63 6c ol start="61" cl
0eb0: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0ec0: 74 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 t".             
0ed0: 20 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 35 30      id="post-50
0ee0: 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 6c " onclick="toggl
0ef0: 65 28 35 30 29 3b 22 3e 0a 20 20 20 20 20 20 20 e(50);">.       
0f00: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0f10: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0f20: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0f30: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0f40: 20 20 20 20 20 20 62 65 67 69 6e 0a 3c 2f 63 6f       begin.</co
0f50: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
0f60: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0f70: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
0f80: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
0f90: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
0fa0: 20 20 20 20 20 20 20 20 72 65 73 2e 73 74 61 74         res.stat
0fb0: 75 73 20 3d 20 73 74 61 74 75 73 2e 74 6f 5f 69 us = status.to_i
0fc0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
0fd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
0fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
0ff0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1000: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1010: 64 65 3e 20 20 20 20 20 20 20 20 20 20 68 65 61 de>          hea
1020: 64 65 72 73 2e 65 61 63 68 20 7b 20 7c 6b 2c 20 ders.each { |k, 
1030: 76 73 7c 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e vs|.</code></li>
1040: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
1050: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
1060: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73   <li class="pos
1070: 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e t-context-line">
1080: 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 <code>          
1090: 20 20 69 66 20 6b 2e 64 6f 77 6e 63 61 73 65 20   if k.downcase 
10a0: 3d 3d 20 26 71 75 6f 74 3b 73 65 74 2d 63 6f 6f == &quot;set-coo
10b0: 6b 69 65 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 65 kie&quot;.</code
10c0: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
10d0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
10e0: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
10f0: 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d s="post-context-
1100: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
1110: 20 20 20 20 20 20 20 20 20 20 72 65 73 2e 63 6f           res.co
1120: 6f 6b 69 65 73 2e 63 6f 6e 63 61 74 20 76 73 2e okies.concat vs.
1130: 73 70 6c 69 74 28 26 71 75 6f 74 3b 5c 6e 26 71 split(&quot;\n&q
1140: 75 6f 74 3b 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c uot;).</code></l
1150: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
1160: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
1170: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
1180: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
1190: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
11a0: 20 20 20 20 65 6c 73 65 0a 3c 2f 63 6f 64 65 3e     else.</code>
11b0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
11c0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
11d0: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
11e0: 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c ="post-context-l
11f0: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
1200: 20 20 20 20 20 20 20 20 20 23 20 53 69 6e 63 65          # Since
1210: 20 57 45 42 72 69 63 6b 20 77 6f 6e 26 23 78 32  WEBrick won&#x2
1220: 37 3b 74 20 61 63 63 65 70 74 20 72 65 70 65 61 7;t accept repea
1230: 74 65 64 20 68 65 61 64 65 72 73 2c 0a 3c 2f 63 ted headers,.</c
1240: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
1250: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
1260: 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20          </ol>. 
1270: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
1280: 20 20 20 20 20 20 20 20 20 20 20 20 3c 64 69 76             <div
1290: 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c  class="clear"><
12a0: 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 20 20 /div>.          
12b0: 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20   </li>..       
12c0: 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a 20 20    ..        .  
12d0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 0a     .          .
12e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 .            <li
12f0: 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 2d 69 6e  class="frame-in
1300: 66 6f 20 61 70 70 22 3e 0a 20 20 20 20 20 20 20 fo app">.       
1310: 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 26 23 78        <code>&#x
1320: 32 46 3b 55 73 65 72 73 26 23 78 32 46 3b 6b 61 2F;Users&#x2F;ka
1330: 72 65 65 6d 67 72 61 6e 74 26 23 78 32 46 3b 2e reemgrant&#x2F;.
1340: 72 76 6d 26 23 78 32 46 3b 72 75 62 69 65 73 26 rvm&#x2F;rubies&
1350: 23 78 32 46 3b 72 75 62 79 2d 31 2e 39 2e 33 2d #x2F;ruby-1.9.3-
1360: 70 31 39 34 26 23 78 32 46 3b 6c 69 62 26 23 78 p194&#x2F;lib&#x
1370: 32 46 3b 72 75 62 79 26 23 78 32 46 3b 31 2e 39 2F;ruby&#x2F;1.9
1380: 2e 31 26 23 78 32 46 3b 77 65 62 72 69 63 6b 26 .1&#x2F;webrick&
1390: 23 78 32 46 3b 68 74 74 70 73 65 72 76 65 72 2e #x2F;httpserver.
13a0: 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a 20 20 20 rb</code> in.   
13b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f              <co
13c0: 64 65 3e 3c 73 74 72 6f 6e 67 3e 73 65 72 76 69 de><strong>servi
13d0: 63 65 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f 64 ce</strong></cod
13e0: 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c e>.            <
13f0: 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 /li>..          
1400: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 64   <li class="cod
1410: 65 20 61 70 70 22 3e 0a 20 20 20 20 20 20 20 20 e app">.        
1420: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
1430: 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22      <ol start="
1440: 31 33 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 131".           
1450: 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70 72        class="pr
1460: 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 70 e-context" id="p
1470: 72 65 2d 35 31 22 0a 20 20 20 20 20 20 20 20 20 re-51".         
1480: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
1490: 3d 22 74 6f 67 67 6c 65 28 35 31 29 3b 22 3e 0a ="toggle(51);">.
14a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
14b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
14c0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
14d0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
14e0: 6f 64 65 3e 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 ode>.</code></li
14f0: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1500: 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20   .             
1510: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72    <li class="pr
1520: 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e e-context-line">
1530: 3c 63 6f 64 65 3e 20 20 20 20 20 20 73 65 72 76 <code>      serv
1540: 6c 65 74 2c 20 6f 70 74 69 6f 6e 73 2c 20 73 63 let, options, sc
1550: 72 69 70 74 5f 6e 61 6d 65 2c 20 70 61 74 68 5f ript_name, path_
1560: 69 6e 66 6f 20 3d 20 73 65 61 72 63 68 5f 73 65 info = search_se
1570: 72 76 6c 65 74 28 72 65 71 2e 70 61 74 68 29 0a rvlet(req.path).
1580: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
1590: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
15a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
15b0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
15c0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
15d0: 3e 20 20 20 20 20 20 72 61 69 73 65 20 48 54 54 >      raise HTT
15e0: 50 53 74 61 74 75 73 3a 3a 4e 6f 74 46 6f 75 6e PStatus::NotFoun
15f0: 64 2c 20 26 71 75 6f 74 3b 60 23 7b 72 65 71 2e d, &quot;`#{req.
1600: 70 61 74 68 7d 26 23 78 32 37 3b 20 6e 6f 74 20 path}&#x27; not 
1610: 66 6f 75 6e 64 2e 26 71 75 6f 74 3b 20 75 6e 6c found.&quot; unl
1620: 65 73 73 20 73 65 72 76 6c 65 74 0a 3c 2f 63 6f ess servlet.</co
1630: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1640: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1650: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1660: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
1670: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
1680: 20 20 20 72 65 71 2e 73 63 72 69 70 74 5f 6e 61    req.script_na
1690: 6d 65 20 3d 20 73 63 72 69 70 74 5f 6e 61 6d 65 me = script_name
16a0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
16b0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
16c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
16d0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
16e0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
16f0: 65 3e 20 20 20 20 20 20 72 65 71 2e 70 61 74 68 e>      req.path
1700: 5f 69 6e 66 6f 20 3d 20 70 61 74 68 5f 69 6e 66 _info = path_inf
1710: 6f 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 o.</code></li>. 
1720: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
1730: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
1740: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
1750: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1760: 64 65 3e 20 20 20 20 20 20 73 69 20 3d 20 73 65 de>      si = se
1770: 72 76 6c 65 74 2e 67 65 74 5f 69 6e 73 74 61 6e rvlet.get_instan
1780: 63 65 28 73 65 6c 66 2c 20 2a 6f 70 74 69 6f 6e ce(self, *option
1790: 73 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a s).</code></li>.
17a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
17b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
17c0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
17d0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
17e0: 6f 64 65 3e 20 20 20 20 20 20 40 6c 6f 67 67 65 ode>      @logge
17f0: 72 2e 64 65 62 75 67 28 66 6f 72 6d 61 74 28 26 r.debug(format(&
1800: 71 75 6f 74 3b 25 73 20 69 73 20 69 6e 76 6f 6b quot;%s is invok
1810: 65 64 2e 26 71 75 6f 74 3b 2c 20 73 69 2e 63 6c ed.&quot;, si.cl
1820: 61 73 73 2e 6e 61 6d 65 29 29 0a 3c 2f 63 6f 64 ass.name)).</cod
1830: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1840: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1850: 20 20 20 20 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20        </ol>.   
1860: 20 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20            ..   
1870: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
1880: 74 61 72 74 3d 22 31 33 38 22 20 63 6c 61 73 73 tart="138" class
1890: 3d 22 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 35 ="context" id="5
18a0: 31 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 1".             
18b0: 20 20 20 20 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f      onclick="to
18c0: 67 67 6c 65 28 35 31 29 3b 22 3e 0a 20 20 20 20 ggle(51);">.    
18d0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
18e0: 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 2d 6c class="context-l
18f0: 69 6e 65 22 20 69 64 3d 22 63 6f 6e 74 65 78 74 ine" id="context
1900: 2d 35 31 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 -51"><code>     
1910: 20 73 69 2e 73 65 72 76 69 63 65 28 72 65 71 2c  si.service(req,
1920: 20 72 65 73 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69  res)</code></li
1930: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
1940: 3c 2f 6f 6c 3e 0a 0a 20 20 20 20 20 20 20 20 20 </ol>..         
1950: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1960: 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31     <ol start="1
1970: 33 39 22 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 39" class="post-
1980: 63 6f 6e 74 65 78 74 22 0a 20 20 20 20 20 20 20 context".       
1990: 20 20 20 20 20 20 20 20 20 20 20 69 64 3d 22 70            id="p
19a0: 6f 73 74 2d 35 31 22 20 6f 6e 63 6c 69 63 6b 3d ost-51" onclick=
19b0: 22 74 6f 67 67 6c 65 28 35 31 29 3b 22 3e 0a 20 "toggle(51);">. 
19c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
19d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
19e0: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
19f0: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
1a00: 6f 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f ode>    end.</co
1a10: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
1a20: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1a30: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
1a40: 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 ass="post-contex
1a50: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c t-line"><code>.<
1a60: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1a70: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1a80: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1a90: 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e  class="post-con
1aa0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
1ab0: 3e 20 20 20 20 64 65 66 20 64 6f 5f 4f 50 54 49 >    def do_OPTI
1ac0: 4f 4e 53 28 72 65 71 2c 20 72 65 73 29 0a 3c 2f ONS(req, res).</
1ad0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1ae0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1af0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1b00: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1b10: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1b20: 20 20 20 20 20 20 72 65 73 5b 26 71 75 6f 74 3b       res[&quot;
1b30: 61 6c 6c 6f 77 26 71 75 6f 74 3b 5d 20 3d 20 26 allow&quot;] = &
1b40: 71 75 6f 74 3b 47 45 54 2c 48 45 41 44 2c 50 4f quot;GET,HEAD,PO
1b50: 53 54 2c 4f 50 54 49 4f 4e 53 26 71 75 6f 74 3b ST,OPTIONS&quot;
1b60: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
1b70: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
1b80: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
1b90: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
1ba0: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
1bb0: 64 65 3e 20 20 20 20 65 6e 64 0a 3c 2f 63 6f 64 de>    end.</cod
1bc0: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
1bd0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1be0: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
1bf0: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
1c00: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 0a 3c 2f -line"><code>.</
1c10: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
1c20: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
1c30: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
1c40: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
1c50: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
1c60: 20 20 20 20 23 23 0a 3c 2f 63 6f 64 65 3e 3c 2f     ##.</code></
1c70: 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 li>.            
1c80: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
1c90: 20 20 20 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20    </ol>.       
1ca0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1cb0: 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 73       <div class
1cc0: 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a ="clear"></div>.
1cd0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6c 69             </li
1ce0: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 0a 0a 20 >..          .. 
1cf0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 0a 20        .      . 
1d00: 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20 20          ..     
1d10: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
1d20: 3d 22 66 72 61 6d 65 2d 69 6e 66 6f 20 61 70 70 ="frame-info app
1d30: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
1d40: 20 3c 63 6f 64 65 3e 26 23 78 32 46 3b 55 73 65  <code>&#x2F;Use
1d50: 72 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 rs&#x2F;kareemgr
1d60: 61 6e 74 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 ant&#x2F;.rvm&#x
1d70: 32 46 3b 72 75 62 69 65 73 26 23 78 32 46 3b 72 2F;rubies&#x2F;r
1d80: 75 62 79 2d 31 2e 39 2e 33 2d 70 31 39 34 26 23 uby-1.9.3-p194&#
1d90: 78 32 46 3b 6c 69 62 26 23 78 32 46 3b 72 75 62 x2F;lib&#x2F;rub
1da0: 79 26 23 78 32 46 3b 31 2e 39 2e 31 26 23 78 32 y&#x2F;1.9.1&#x2
1db0: 46 3b 77 65 62 72 69 63 6b 26 23 78 32 46 3b 68 F;webrick&#x2F;h
1dc0: 74 74 70 73 65 72 76 65 72 2e 72 62 3c 2f 63 6f ttpserver.rb</co
1dd0: 64 65 3e 20 69 6e 0a 20 20 20 20 20 20 20 20 20 de> in.         
1de0: 20 20 20 20 20 20 20 3c 63 6f 64 65 3e 3c 73 74        <code><st
1df0: 72 6f 6e 67 3e 72 75 6e 3c 2f 73 74 72 6f 6e 67 rong>run</strong
1e00: 3e 3c 2f 63 6f 64 65 3e 0a 20 20 20 20 20 20 20 ></code>.       
1e10: 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20      </li>..    
1e20: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1e30: 73 3d 22 63 6f 64 65 20 61 70 70 22 3e 0a 20 20 s="code app">.  
1e40: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1e50: 20 20 20 20 20 20 20 20 20 20 20 3c 6f 6c 20 73            <ol s
1e60: 74 61 72 74 3d 22 38 37 22 0a 20 20 20 20 20 20 tart="87".      
1e70: 20 20 20 20 20 20 20 20 20 20 20 20 63 6c 61 73             clas
1e80: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 22 20 s="pre-context" 
1e90: 69 64 3d 22 70 72 65 2d 35 32 22 0a 20 20 20 20 id="pre-52".    
1ea0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e               on
1eb0: 63 6c 69 63 6b 3d 22 74 6f 67 67 6c 65 28 35 32 click="toggle(52
1ec0: 29 3b 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 );">.           
1ed0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
1ee0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
1ef0: 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e "pre-context-lin
1f00: 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 e"><code>       
1f10: 20 20 20 69 66 20 63 61 6c 6c 62 61 63 6b 20 3d    if callback =
1f20: 20 73 65 72 76 65 72 5b 3a 52 65 71 75 65 73 74  server[:Request
1f30: 43 61 6c 6c 62 61 63 6b 5d 0a 3c 2f 63 6f 64 65 Callback].</code
1f40: 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 ></li>.         
1f50: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
1f60: 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73         <li clas
1f70: 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c s="pre-context-l
1f80: 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 ine"><code>     
1f90: 20 20 20 20 20 20 20 63 61 6c 6c 62 61 63 6b 2e        callback.
1fa0: 63 61 6c 6c 28 72 65 71 2c 20 72 65 73 29 0a 3c call(req, res).<
1fb0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
1fc0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
1fd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69              <li
1fe0: 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74  class="pre-cont
1ff0: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2000: 20 20 20 20 20 20 20 20 20 20 65 6c 73 69 66 20           elsif 
2010: 63 61 6c 6c 62 61 63 6b 20 3d 20 73 65 72 76 65 callback = serve
2020: 72 5b 3a 52 65 71 75 65 73 74 48 61 6e 64 6c 65 r[:RequestHandle
2030: 72 5d 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a r].</code></li>.
2040: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2050: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2060: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2070: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2080: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 20 20 ode>            
2090: 6d 73 67 20 3d 20 26 71 75 6f 74 3b 3a 52 65 71 msg = &quot;:Req
20a0: 75 65 73 74 48 61 6e 64 6c 65 72 20 69 73 20 64 uestHandler is d
20b0: 65 70 72 65 63 61 74 65 64 2c 20 70 6c 65 61 73 eprecated, pleas
20c0: 65 20 75 73 65 20 3a 52 65 71 75 65 73 74 43 61 e use :RequestCa
20d0: 6c 6c 62 61 63 6b 26 71 75 6f 74 3b 0a 3c 2f 63 llback&quot;.</c
20e0: 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 ode></li>.      
20f0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2100: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2110: 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 lass="pre-contex
2120: 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 t-line"><code>  
2130: 20 20 20 20 20 20 20 20 20 20 40 6c 6f 67 67 65           @logge
2140: 72 2e 77 61 72 6e 28 6d 73 67 29 0a 3c 2f 63 6f r.warn(msg).</co
2150: 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 de></li>.       
2160: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
2170: 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c           <li cl
2180: 61 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 ass="pre-context
2190: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
21a0: 20 20 20 20 20 20 20 20 20 63 61 6c 6c 62 61 63          callbac
21b0: 6b 2e 63 61 6c 6c 28 72 65 71 2c 20 72 65 73 29 k.call(req, res)
21c0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
21d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
21e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
21f0: 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f li class="pre-co
2200: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
2210: 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e 64 0a e>          end.
2220: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2230: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2240: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
2250: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 >.              
2260: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
2270: 3c 6f 6c 20 73 74 61 72 74 3d 22 39 34 22 20 63 <ol start="94" c
2280: 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 22 20 69 lass="context" i
2290: 64 3d 22 35 32 22 0a 20 20 20 20 20 20 20 20 20 d="52".         
22a0: 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63 6b          onclick
22b0: 3d 22 74 6f 67 67 6c 65 28 35 32 29 3b 22 3e 0a ="toggle(52);">.
22c0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
22d0: 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 <li class="conte
22e0: 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 63 6f 6e xt-line" id="con
22f0: 74 65 78 74 2d 35 32 22 3e 3c 63 6f 64 65 3e 20 text-52"><code> 
2300: 20 20 20 20 20 20 20 20 20 73 65 72 76 65 72 2e          server.
2310: 73 65 72 76 69 63 65 28 72 65 71 2c 20 72 65 73 service(req, res
2320: 29 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 )</code></li>.  
2330: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c             </ol
2340: 3e 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 >..             
2350: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2360: 3c 6f 6c 20 73 74 61 72 74 3d 22 39 35 22 20 63 <ol start="95" c
2370: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2380: 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 xt".            
2390: 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 35       id="post-5
23a0: 32 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 2" onclick="togg
23b0: 6c 65 28 35 32 29 3b 22 3e 0a 20 20 20 20 20 20 le(52);">.      
23c0: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
23d0: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
23e0: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
23f0: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2400: 20 20 20 20 20 20 20 72 65 73 63 75 65 20 48 54        rescue HT
2410: 54 50 53 74 61 74 75 73 3a 3a 45 4f 46 45 72 72 TPStatus::EOFErr
2420: 6f 72 2c 20 48 54 54 50 53 74 61 74 75 73 3a 3a or, HTTPStatus::
2430: 52 65 71 75 65 73 74 54 69 6d 65 6f 75 74 20 3d RequestTimeout =
2440: 26 67 74 3b 20 65 78 0a 3c 2f 63 6f 64 65 3e 3c &gt; ex.</code><
2450: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
2460: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
2470: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
2480: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
2490: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
24a0: 20 20 20 20 72 65 73 2e 73 65 74 5f 65 72 72 6f     res.set_erro
24b0: 72 28 65 78 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c r(ex).</code></l
24c0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
24d0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
24e0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
24f0: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2500: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2510: 72 65 73 63 75 65 20 48 54 54 50 53 74 61 74 75 rescue HTTPStatu
2520: 73 3a 3a 45 72 72 6f 72 20 3d 26 67 74 3b 20 65 s::Error =&gt; e
2530: 78 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 x.</code></li>. 
2540: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2550: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2560: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
2570: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2580: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 40 6c ode>          @l
2590: 6f 67 67 65 72 2e 65 72 72 6f 72 28 65 78 2e 6d ogger.error(ex.m
25a0: 65 73 73 61 67 65 29 0a 3c 2f 63 6f 64 65 3e 3c essage).</code><
25b0: 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /li>.           
25c0: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20      .          
25d0: 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d       <li class=
25e0: 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 "post-context-li
25f0: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2600: 20 20 20 20 72 65 73 2e 73 65 74 5f 65 72 72 6f     res.set_erro
2610: 72 28 65 78 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c r(ex).</code></l
2620: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
2630: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2640: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2650: 6f 73 74 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 ost-context-line
2660: 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 "><code>        
2670: 72 65 73 63 75 65 20 48 54 54 50 53 74 61 74 75 rescue HTTPStatu
2680: 73 3a 3a 53 74 61 74 75 73 20 3d 26 67 74 3b 20 s::Status =&gt; 
2690: 65 78 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a ex.</code></li>.
26a0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
26b0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
26c0: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74  <li class="post
26d0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
26e0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 72 code>          r
26f0: 65 73 2e 73 74 61 74 75 73 20 3d 20 65 78 2e 63 es.status = ex.c
2700: 6f 64 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e ode.</code></li>
2710: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2720: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2730: 3c 2f 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 </ol>.          
2740: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20     .           
2750: 20 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 63    <div class="c
2760: 6c 65 61 72 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 lear"></div>.   
2770: 20 20 20 20 20 20 20 20 20 3c 2f 6c 69 3e 0a 0a          </li>..
2780: 20 20 20 20 20 20 20 20 20 20 0a 0a 20 20 20 20           ..    
2790: 20 20 20 20 0a 20 20 20 20 20 20 0a 20 20 20 20     .      .    
27a0: 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20       ..        
27b0: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 66     <li class="f
27c0: 72 61 6d 65 2d 69 6e 66 6f 20 61 70 70 22 3e 0a rame-info app">.
27d0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 63               <c
27e0: 6f 64 65 3e 26 23 78 32 46 3b 55 73 65 72 73 26 ode>&#x2F;Users&
27f0: 23 78 32 46 3b 6b 61 72 65 65 6d 67 72 61 6e 74 #x2F;kareemgrant
2800: 26 23 78 32 46 3b 2e 72 76 6d 26 23 78 32 46 3b &#x2F;.rvm&#x2F;
2810: 72 75 62 69 65 73 26 23 78 32 46 3b 72 75 62 79 rubies&#x2F;ruby
2820: 2d 31 2e 39 2e 33 2d 70 31 39 34 26 23 78 32 46 -1.9.3-p194&#x2F
2830: 3b 6c 69 62 26 23 78 32 46 3b 72 75 62 79 26 23 ;lib&#x2F;ruby&#
2840: 78 32 46 3b 31 2e 39 2e 31 26 23 78 32 46 3b 77 x2F;1.9.1&#x2F;w
2850: 65 62 72 69 63 6b 26 23 78 32 46 3b 73 65 72 76 ebrick&#x2F;serv
2860: 65 72 2e 72 62 3c 2f 63 6f 64 65 3e 20 69 6e 0a er.rb</code> in.
2870: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2880: 3c 63 6f 64 65 3e 3c 73 74 72 6f 6e 67 3e 62 6c <code><strong>bl
2890: 6f 63 6b 20 69 6e 20 73 74 61 72 74 5f 74 68 72 ock in start_thr
28a0: 65 61 64 3c 2f 73 74 72 6f 6e 67 3e 3c 2f 63 6f ead</strong></co
28b0: 64 65 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 de>.            
28c0: 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20 20 20 20 20 </li>..         
28d0: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
28e0: 64 65 20 61 70 70 22 3e 0a 20 20 20 20 20 20 20 de app">.       
28f0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
2900: 20 20 20 20 20 20 3c 6f 6c 20 73 74 61 72 74 3d       <ol start=
2910: 22 31 38 34 22 0a 20 20 20 20 20 20 20 20 20 20 "184".          
2920: 20 20 20 20 20 20 20 20 63 6c 61 73 73 3d 22 70         class="p
2930: 72 65 2d 63 6f 6e 74 65 78 74 22 20 69 64 3d 22 re-context" id="
2940: 70 72 65 2d 35 33 22 0a 20 20 20 20 20 20 20 20 pre-53".        
2950: 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c 69 63           onclic
2960: 6b 3d 22 74 6f 67 67 6c 65 28 35 33 29 3b 22 3e k="toggle(53);">
2970: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2980: 20 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20  .              
2990: 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65   <li class="pre
29a0: 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c -context-line"><
29b0: 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 20 code>           
29c0: 20 61 64 64 72 20 3d 20 73 6f 63 6b 2e 70 65 65  addr = sock.pee
29d0: 72 61 64 64 72 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c raddr.</code></l
29e0: 69 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 i>.             
29f0: 20 20 20 0a 20 20 20 20 20 20 20 20 20 20 20 20    .            
2a00: 20 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70     <li class="p
2a10: 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 re-context-line"
2a20: 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 20 20 20 ><code>         
2a30: 20 20 20 40 6c 6f 67 67 65 72 2e 64 65 62 75 67    @logger.debug
2a40: 20 26 71 75 6f 74 3b 61 63 63 65 70 74 3a 20 23  &quot;accept: #
2a50: 7b 61 64 64 72 5b 33 5d 7d 3a 23 7b 61 64 64 72 {addr[3]}:#{addr
2a60: 5b 31 5d 7d 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 [1]}&quot;.</cod
2a70: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2a80: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2a90: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2aa0: 73 73 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d ss="pre-context-
2ab0: 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 line"><code>    
2ac0: 20 20 20 20 20 20 72 65 73 63 75 65 20 53 6f 63       rescue Soc
2ad0: 6b 65 74 45 72 72 6f 72 0a 3c 2f 63 6f 64 65 3e ketError.</code>
2ae0: 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 20 20 </li>.          
2af0: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
2b00: 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61 73 73        <li class
2b10: 3d 22 70 72 65 2d 63 6f 6e 74 65 78 74 2d 6c 69 ="pre-context-li
2b20: 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 20 20 20 ne"><code>      
2b30: 20 20 20 20 20 20 40 6c 6f 67 67 65 72 2e 64 65       @logger.de
2b40: 62 75 67 20 26 71 75 6f 74 3b 61 63 63 65 70 74 bug &quot;accept
2b50: 3a 20 26 6c 74 3b 61 64 64 72 65 73 73 20 75 6e : &lt;address un
2b60: 6b 6e 6f 77 6e 26 67 74 3b 26 71 75 6f 74 3b 0a known&gt;&quot;.
2b70: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2b80: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
2b90: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
2ba0: 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 6f 6e i class="pre-con
2bb0: 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 text-line"><code
2bc0: 3e 20 20 20 20 20 20 20 20 20 20 20 20 72 61 69 >            rai
2bd0: 73 65 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a se.</code></li>.
2be0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2bf0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 .               
2c00: 20 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d  <li class="pre-
2c10: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
2c20: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 65 6e ode>          en
2c30: 64 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 d.</code></li>. 
2c40: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2c50: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
2c60: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 72 65 2d 63 <li class="pre-c
2c70: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
2c80: 64 65 3e 20 20 20 20 20 20 20 20 20 20 63 61 6c de>          cal
2c90: 6c 5f 63 61 6c 6c 62 61 63 6b 28 3a 41 63 63 65 l_callback(:Acce
2ca0: 70 74 43 61 6c 6c 62 61 63 6b 2c 20 73 6f 63 6b ptCallback, sock
2cb0: 29 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 ).</code></li>. 
2cc0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
2cd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f               </
2ce0: 6f 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 ol>.            
2cf0: 20 20 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20   ..            
2d00: 20 20 3c 6f 6c 20 73 74 61 72 74 3d 22 31 39 31   <ol start="191
2d10: 22 20 63 6c 61 73 73 3d 22 63 6f 6e 74 65 78 74 " class="context
2d20: 22 20 69 64 3d 22 35 33 22 0a 20 20 20 20 20 20 " id="53".      
2d30: 20 20 20 20 20 20 20 20 20 20 20 20 6f 6e 63 6c             oncl
2d40: 69 63 6b 3d 22 74 6f 67 67 6c 65 28 35 33 29 3b ick="toggle(53);
2d50: 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 ">.             
2d60: 20 20 20 3c 6c 69 20 63 6c 61 73 73 3d 22 63 6f    <li class="co
2d70: 6e 74 65 78 74 2d 6c 69 6e 65 22 20 69 64 3d 22 ntext-line" id="
2d80: 63 6f 6e 74 65 78 74 2d 35 33 22 3e 3c 63 6f 64 context-53"><cod
2d90: 65 3e 20 20 20 20 20 20 20 20 20 20 62 6c 6f 63 e>          bloc
2da0: 6b 20 3f 20 62 6c 6f 63 6b 2e 63 61 6c 6c 28 73 k ? block.call(s
2db0: 6f 63 6b 29 20 3a 20 72 75 6e 28 73 6f 63 6b 29 ock) : run(sock)
2dc0: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
2dd0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
2de0: 0a 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ..              
2df0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c .              <
2e00: 6f 6c 20 73 74 61 72 74 3d 22 31 39 32 22 20 63 ol start="192" c
2e10: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2e20: 78 74 22 0a 20 20 20 20 20 20 20 20 20 20 20 20 xt".            
2e30: 20 20 20 20 20 20 69 64 3d 22 70 6f 73 74 2d 35       id="post-5
2e40: 33 22 20 6f 6e 63 6c 69 63 6b 3d 22 74 6f 67 67 3" onclick="togg
2e50: 6c 65 28 35 33 29 3b 22 3e 0a 20 20 20 20 20 20 le(53);">.      
2e60: 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20           .     
2e70: 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63            <li c
2e80: 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 lass="post-conte
2e90: 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 xt-line"><code> 
2ea0: 20 20 20 20 20 20 20 72 65 73 63 75 65 20 45 72        rescue Er
2eb0: 72 6e 6f 3a 3a 45 4e 4f 54 43 4f 4e 4e 0a 3c 2f rno::ENOTCONN.</
2ec0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
2ed0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
2ee0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
2ef0: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
2f00: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
2f10: 20 20 20 20 20 20 20 20 20 20 40 6c 6f 67 67 65           @logge
2f20: 72 2e 64 65 62 75 67 20 26 71 75 6f 74 3b 45 72 r.debug &quot;Er
2f30: 72 6e 6f 3a 3a 45 4e 4f 54 43 4f 4e 4e 20 72 61 rno::ENOTCONN ra
2f40: 69 73 65 64 26 71 75 6f 74 3b 0a 3c 2f 63 6f 64 ised&quot;.</cod
2f50: 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 20 20 20 e></li>.        
2f60: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
2f70: 20 20 20 20 20 20 20 20 20 3c 6c 69 20 63 6c 61          <li cla
2f80: 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 65 78 74 ss="post-context
2f90: 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e 20 20 20 -line"><code>   
2fa0: 20 20 20 20 20 72 65 73 63 75 65 20 53 65 72 76      rescue Serv
2fb0: 65 72 45 72 72 6f 72 20 3d 26 67 74 3b 20 65 78 erError =&gt; ex
2fc0: 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 .</code></li>.  
2fd0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20               . 
2fe0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c                <
2ff0: 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 li class="post-c
3000: 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f ontext-line"><co
3010: 64 65 3e 20 20 20 20 20 20 20 20 20 20 6d 73 67 de>          msg
3020: 20 3d 20 26 71 75 6f 74 3b 23 7b 65 78 2e 63 6c  = &quot;#{ex.cl
3030: 61 73 73 7d 3a 20 23 7b 65 78 2e 6d 65 73 73 61 ass}: #{ex.messa
3040: 67 65 7d 5c 6e 5c 74 23 7b 65 78 2e 62 61 63 6b ge}\n\t#{ex.back
3050: 74 72 61 63 65 5b 30 5d 7d 26 71 75 6f 74 3b 0a trace[0]}&quot;.
3060: 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 </code></li>.   
3070: 20 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20              .  
3080: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c               <l
3090: 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f i class="post-co
30a0: 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 ntext-line"><cod
30b0: 65 3e 20 20 20 20 20 20 20 20 20 20 40 6c 6f 67 e>          @log
30c0: 67 65 72 2e 65 72 72 6f 72 20 6d 73 67 0a 3c 2f ger.error msg.</
30d0: 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 20 code></li>.     
30e0: 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20 20            .    
30f0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 6c 69 20             <li 
3100: 63 6c 61 73 73 3d 22 70 6f 73 74 2d 63 6f 6e 74 class="post-cont
3110: 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 6f 64 65 3e ext-line"><code>
3120: 20 20 20 20 20 20 20 20 72 65 73 63 75 65 20 45         rescue E
3130: 78 63 65 70 74 69 6f 6e 20 3d 26 67 74 3b 20 65 xception =&gt; e
3140: 78 0a 3c 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 x.</code></li>. 
3150: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a                .
3160: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20                 
3170: 3c 6c 69 20 63 6c 61 73 73 3d 22 70 6f 73 74 2d <li class="post-
3180: 63 6f 6e 74 65 78 74 2d 6c 69 6e 65 22 3e 3c 63 context-line"><c
3190: 6f 64 65 3e 20 20 20 20 20 20 20 20 20 20 40 6c ode>          @l
31a0: 6f 67 67 65 72 2e 65 72 72 6f 72 20 65 78 0a 3c ogger.error ex.<
31b0: 2f 63 6f 64 65 3e 3c 2f 6c 69 3e 0a 20 20 20 20 /code></li>.    
31c0: 20 20 20 20 20 20 20 20 20 20 20 20 0a 20 20 20             .   
31d0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6f 6c 3e            </ol>
31e0: 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 0a .              .
31f0: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 64               <d
3200: 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 22 iv class="clear"
3210: 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 20 20 20 20 ></div>.        
3220: 20 20 20 20 3c 2f 6c 69 3e 0a 0a 20 20 20 20 20     </li>..     
3230: 20 20 20 20 20 0a 0a 20 20 20 20 20 20 20 20 0a      ..        .
3240: 20 20 20 20 20 20 0a 0a 20 20 20 20 20 20 3c 2f       ..      </
3250: 75 6c 3e 0a 20 20 20 20 3c 2f 64 69 76 3e 20 3c ul>.    </div> <
3260: 21 2d 2d 20 2f 42 41 43 4b 54 52 41 43 45 20 2d !-- /BACKTRACE -
3270: 2d 3e 0a 0a 20 20 20 20 3c 64 69 76 20 69 64 3d ->..    <div id=
3280: 22 67 65 74 22 3e 0a 20 20 20 20 20 20 3c 68 33 "get">.      <h3
3290: 20 69 64 3d 22 67 65 74 2d 69 6e 66 6f 22 3e 47  id="get-info">G
32a0: 45 54 3c 2f 68 33 3e 0a 20 20 20 20 20 20 0a 20 ET</h3>.      . 
32b0: 20 20 20 20 20 20 20 3c 70 20 63 6c 61 73 73 3d        <p class=
32c0: 22 6e 6f 2d 64 61 74 61 22 3e 4e 6f 20 47 45 54 "no-data">No GET
32d0: 20 64 61 74 61 2e 3c 2f 70 3e 0a 20 20 20 20 20  data.</p>.     
32e0: 20 0a 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61  .      <div cla
32f0: 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 ss="clear"></div
3300: 3e 0a 20 20 20 20 3c 2f 64 69 76 3e 20 3c 21 2d >.    </div> <!-
3310: 2d 20 2f 47 45 54 20 2d 2d 3e 0a 0a 20 20 20 20 - /GET -->..    
3320: 3c 64 69 76 20 69 64 3d 22 70 6f 73 74 22 3e 0a <div id="post">.
3330: 20 20 20 20 20 20 3c 68 33 20 69 64 3d 22 70 6f       <h3 id="po
3340: 73 74 2d 69 6e 66 6f 22 3e 50 4f 53 54 3c 2f 68 st-info">POST</h
3350: 33 3e 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 3>.      .      
3360: 20 20 3c 74 61 62 6c 65 20 63 6c 61 73 73 3d 22   <table class="
3370: 72 65 71 22 3e 0a 20 20 20 20 20 20 20 20 20 20 req">.          
3380: 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 <tr>.           
3390: 20 3c 74 68 3e 56 61 72 69 61 62 6c 65 3c 2f 74  <th>Variable</t
33a0: 68 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c h>.            <
33b0: 74 68 3e 56 61 6c 75 65 3c 2f 74 68 3e 0a 20 20 th>Value</th>.  
33c0: 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20         </tr>.  
33d0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
33e0: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
33f0: 20 20 20 20 3c 74 64 3e 70 61 79 6c 6f 61 64 3c     <td>payload<
3400: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /td>.           
3410: 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65  <td class="code
3420: 22 3e 3c 64 69 76 3e 26 71 75 6f 74 3b 7b 5c 26 "><div>&quot;{\&
3430: 71 75 6f 74 3b 75 72 6c 5c 26 71 75 6f 74 3b 3a quot;url\&quot;:
3440: 5c 26 71 75 6f 74 3b 68 74 74 70 3a 26 23 78 32 \&quot;http:&#x2
3450: 46 3b 26 23 78 32 46 3b 6a 75 6d 70 73 74 61 72 F;&#x2F;jumpstar
3460: 74 6c 61 62 2e 63 6f 6d 26 23 78 32 46 3b 62 6c tlab.com&#x2F;bl
3470: 6f 67 5c 26 71 75 6f 74 3b 2c 5c 26 71 75 6f 74 og\&quot;,\&quot
3480: 3b 72 65 71 75 65 73 74 65 64 41 74 5c 26 71 75 ;requestedAt\&qu
3490: 6f 74 3b 3a 5c 26 71 75 6f 74 3b 32 30 31 33 2d ot;:\&quot;2013-
34a0: 30 32 2d 31 36 20 32 31 3a 33 38 3a 32 38 20 2d 02-16 21:38:28 -
34b0: 30 37 30 30 5c 26 71 75 6f 74 3b 2c 5c 26 71 75 0700\&quot;,\&qu
34c0: 6f 74 3b 72 65 73 70 6f 6e 64 65 64 49 6e 5c 26 ot;respondedIn\&
34d0: 71 75 6f 74 3b 3a 33 37 2c 5c 26 71 75 6f 74 3b quot;:37,\&quot;
34e0: 72 65 66 65 72 72 65 64 42 79 5c 26 71 75 6f 74 referredBy\&quot
34f0: 3b 3a 5c 26 71 75 6f 74 3b 68 74 74 70 3a 26 23 ;:\&quot;http:&#
3500: 78 32 46 3b 26 23 78 32 46 3b 6a 75 6d 70 73 74 x2F;&#x2F;jumpst
3510: 61 72 74 6c 61 62 2e 63 6f 6d 5c 26 71 75 6f 74 artlab.com\&quot
3520: 3b 2c 5c 26 71 75 6f 74 3b 72 65 71 75 65 73 74 ;,\&quot;request
3530: 54 79 70 65 5c 26 71 75 6f 74 3b 3a 5c 26 71 75 Type\&quot;:\&qu
3540: 6f 74 3b 47 45 54 5c 26 71 75 6f 74 3b 2c 5c 26 ot;GET\&quot;,\&
3550: 71 75 6f 74 3b 70 61 72 61 6d 65 74 65 72 73 5c quot;parameters\
3560: 26 71 75 6f 74 3b 3a 5b 5d 2c 5c 26 71 75 6f 74 &quot;:[],\&quot
3570: 3b 65 76 65 6e 74 4e 61 6d 65 5c 26 71 75 6f 74 ;eventName\&quot
3580: 3b 3a 20 5c 26 71 75 6f 74 3b 73 6f 63 69 61 6c ;: \&quot;social
3590: 4c 6f 67 69 6e 5c 26 71 75 6f 74 3b 2c 5c 26 71 Login\&quot;,\&q
35a0: 75 6f 74 3b 75 73 65 72 41 67 65 6e 74 5c 26 71 uot;userAgent\&q
35b0: 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b 4d 6f 7a 69 uot;:\&quot;Mozi
35c0: 6c 6c 61 26 23 78 32 46 3b 35 2e 30 20 28 4d 61 lla&#x2F;5.0 (Ma
35d0: 63 69 6e 74 6f 73 68 3b 20 49 6e 74 65 6c 20 4d cintosh; Intel M
35e0: 61 63 20 4f 53 20 58 20 31 30 5f 38 5f 32 29 20 ac OS X 10_8_2) 
35f0: 41 70 70 6c 65 57 65 62 4b 69 74 26 23 78 32 46 AppleWebKit&#x2F
3600: 3b 35 33 37 2e 31 37 20 28 4b 48 54 4d 4c 2c 20 ;537.17 (KHTML, 
3610: 6c 69 6b 65 20 47 65 63 6b 6f 29 20 43 68 72 6f like Gecko) Chro
3620: 6d 65 26 23 78 32 46 3b 32 34 2e 30 2e 31 33 30 me&#x2F;24.0.130
3630: 39 2e 30 20 53 61 66 61 72 69 26 23 78 32 46 3b 9.0 Safari&#x2F;
3640: 35 33 37 2e 31 37 5c 26 71 75 6f 74 3b 2c 5c 26 537.17\&quot;,\&
3650: 71 75 6f 74 3b 72 65 73 6f 6c 75 74 69 6f 6e 57 quot;resolutionW
3660: 69 64 74 68 5c 26 71 75 6f 74 3b 3a 5c 26 71 75 idth\&quot;:\&qu
3670: 6f 74 3b 31 39 32 30 5c 26 71 75 6f 74 3b 2c 5c ot;1920\&quot;,\
3680: 26 71 75 6f 74 3b 72 65 73 6f 6c 75 74 69 6f 6e &quot;resolution
3690: 48 65 69 67 68 74 5c 26 71 75 6f 74 3b 3a 5c 26 Height\&quot;:\&
36a0: 71 75 6f 74 3b 31 32 38 30 5c 26 71 75 6f 74 3b quot;1280\&quot;
36b0: 2c 5c 26 71 75 6f 74 3b 69 70 5c 26 71 75 6f 74 ,\&quot;ip\&quot
36c0: 3b 3a 5c 26 71 75 6f 74 3b 36 33 2e 32 39 2e 33 ;:\&quot;63.29.3
36d0: 38 2e 32 31 31 5c 26 71 75 6f 74 3b 7d 26 71 75 8.211\&quot;}&qu
36e0: 6f 74 3b 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 ot;</div></td>. 
36f0: 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20          </tr>. 
3700: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
3710: 20 20 3c 2f 74 61 62 6c 65 3e 0a 20 20 20 20 20   </table>.     
3720: 20 0a 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61  .      <div cla
3730: 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 69 76 ss="clear"></div
3740: 3e 0a 20 20 20 20 3c 2f 64 69 76 3e 20 3c 21 2d >.    </div> <!-
3750: 2d 20 2f 50 4f 53 54 20 2d 2d 3e 0a 0a 20 20 20 - /POST -->..   
3760: 20 3c 64 69 76 20 69 64 3d 22 63 6f 6f 6b 69 65  <div id="cookie
3770: 73 22 3e 0a 20 20 20 20 20 20 3c 68 33 20 69 64 s">.      <h3 id
3780: 3d 22 63 6f 6f 6b 69 65 2d 69 6e 66 6f 22 3e 43 ="cookie-info">C
3790: 4f 4f 4b 49 45 53 3c 2f 68 33 3e 0a 20 20 20 20 OOKIES</h3>.    
37a0: 20 20 0a 20 20 20 20 20 20 20 20 3c 70 20 63 6c   .        <p cl
37b0: 61 73 73 3d 22 6e 6f 2d 64 61 74 61 22 3e 4e 6f ass="no-data">No
37c0: 20 63 6f 6f 6b 69 65 20 64 61 74 61 2e 3c 2f 70  cookie data.</p
37d0: 3e 0a 20 20 20 20 20 20 0a 20 20 20 20 20 20 3c >.      .      <
37e0: 64 69 76 20 63 6c 61 73 73 3d 22 63 6c 65 61 72 div class="clear
37f0: 22 3e 3c 2f 64 69 76 3e 0a 20 20 20 20 3c 2f 64 "></div>.    </d
3800: 69 76 3e 20 3c 21 2d 2d 20 2f 43 4f 4f 4b 49 45 iv> <!-- /COOKIE
3810: 53 20 2d 2d 3e 0a 0a 20 20 20 20 3c 64 69 76 20 S -->..    <div 
3820: 69 64 3d 22 72 61 63 6b 22 3e 0a 20 20 20 20 20 id="rack">.     
3830: 20 3c 68 33 20 69 64 3d 22 65 6e 76 2d 69 6e 66  <h3 id="env-inf
3840: 6f 22 3e 52 61 63 6b 20 45 4e 56 3c 2f 68 33 3e o">Rack ENV</h3>
3850: 0a 20 20 20 20 20 20 3c 74 61 62 6c 65 20 63 6c .      <table cl
3860: 61 73 73 3d 22 72 65 71 22 3e 0a 20 20 20 20 20 ass="req">.     
3870: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
3880: 20 20 3c 74 68 3e 56 61 72 69 61 62 6c 65 3c 2f   <th>Variable</
3890: 74 68 3e 0a 20 20 20 20 20 20 20 20 20 20 3c 74 th>.          <t
38a0: 68 3e 56 61 6c 75 65 3c 2f 74 68 3e 0a 20 20 20 h>Value</th>.   
38b0: 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20      </tr>.     
38c0: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c 74     .         <t
38d0: 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 r>.           <t
38e0: 64 3e 43 4f 4e 54 45 4e 54 5f 4c 45 4e 47 54 48 d>CONTENT_LENGTH
38f0: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 </td>.          
3900: 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65  <td class="code
3910: 22 3e 3c 64 69 76 3e 34 31 33 3c 2f 64 69 76 3e "><div>413</div>
3920: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c </td>.         <
3930: 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 /tr>.         . 
3940: 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20         <tr>.   
3950: 20 20 20 20 20 20 20 20 3c 74 64 3e 43 4f 4e 54         <td>CONT
3960: 45 4e 54 5f 54 59 50 45 3c 2f 74 64 3e 0a 20 20 ENT_TYPE</td>.  
3970: 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61          <td cla
3980: 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 61 ss="code"><div>a
3990: 70 70 6c 69 63 61 74 69 6f 6e 26 23 78 32 46 3b pplication&#x2F;
39a0: 78 2d 77 77 77 2d 66 6f 72 6d 2d 75 72 6c 65 6e x-www-form-urlen
39b0: 63 6f 64 65 64 3c 2f 64 69 76 3e 3c 2f 74 64 3e coded</div></td>
39c0: 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a .         </tr>.
39d0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
39e0: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
39f0: 20 20 20 3c 74 64 3e 47 41 54 45 57 41 59 5f 49    <td>GATEWAY_I
3a00: 4e 54 45 52 46 41 43 45 3c 2f 74 64 3e 0a 20 20 NTERFACE</td>.  
3a10: 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61          <td cla
3a20: 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 43 ss="code"><div>C
3a30: 47 49 26 23 78 32 46 3b 31 2e 31 3c 2f 64 69 76 GI&#x2F;1.1</div
3a40: 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 ></td>.         
3a50: 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a </tr>.         .
3a60: 20 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20          <tr>.  
3a70: 20 20 20 20 20 20 20 20 20 3c 74 64 3e 48 54 54          <td>HTT
3a80: 50 5f 41 43 43 45 50 54 3c 2f 74 64 3e 0a 20 20 P_ACCEPT</td>.  
3a90: 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61          <td cla
3aa0: 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 2a ss="code"><div>*
3ab0: 26 23 78 32 46 3b 2a 3c 2f 64 69 76 3e 3c 2f 74 &#x2F;*</div></t
3ac0: 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 d>.         </tr
3ad0: 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 >.         .    
3ae0: 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20      <tr>.      
3af0: 20 20 20 20 20 3c 74 64 3e 48 54 54 50 5f 48 4f      <td>HTTP_HO
3b00: 53 54 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 ST</td>.        
3b10: 20 20 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f    <td class="co
3b20: 64 65 22 3e 3c 64 69 76 3e 6c 6f 63 61 6c 68 6f de"><div>localho
3b30: 73 74 3a 39 33 39 33 3c 2f 64 69 76 3e 3c 2f 74 st:9393</div></t
3b40: 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 d>.         </tr
3b50: 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 >.         .    
3b60: 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20      <tr>.      
3b70: 20 20 20 20 20 3c 74 64 3e 48 54 54 50 5f 55 53      <td>HTTP_US
3b80: 45 52 5f 41 47 45 4e 54 3c 2f 74 64 3e 0a 20 20 ER_AGENT</td>.  
3b90: 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61          <td cla
3ba0: 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 63 ss="code"><div>c
3bb0: 75 72 6c 26 23 78 32 46 3b 37 2e 32 34 2e 30 20 url&#x2F;7.24.0 
3bc0: 28 78 38 36 5f 36 34 2d 61 70 70 6c 65 2d 64 61 (x86_64-apple-da
3bd0: 72 77 69 6e 31 32 2e 30 29 20 6c 69 62 63 75 72 rwin12.0) libcur
3be0: 6c 26 23 78 32 46 3b 37 2e 32 34 2e 30 20 4f 70 l&#x2F;7.24.0 Op
3bf0: 65 6e 53 53 4c 26 23 78 32 46 3b 30 2e 39 2e 38 enSSL&#x2F;0.9.8
3c00: 72 20 7a 6c 69 62 26 23 78 32 46 3b 31 2e 32 2e r zlib&#x2F;1.2.
3c10: 35 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 5</div></td>.   
3c20: 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20       </tr>.    
3c30: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c      .         <
3c40: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c tr>.           <
3c50: 74 64 3e 48 54 54 50 5f 56 45 52 53 49 4f 4e 3c td>HTTP_VERSION<
3c60: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /td>.           
3c70: 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 <td class="code"
3c80: 3e 3c 64 69 76 3e 48 54 54 50 26 23 78 32 46 3b ><div>HTTP&#x2F;
3c90: 31 2e 31 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 1.1</div></td>. 
3ca0: 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20         </tr>.  
3cb0: 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20        .        
3cc0: 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20  <tr>.          
3cd0: 20 3c 74 64 3e 50 41 54 48 5f 49 4e 46 4f 3c 2f  <td>PATH_INFO</
3ce0: 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c td>.           <
3cf0: 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e td class="code">
3d00: 3c 64 69 76 3e 26 23 78 32 46 3b 73 6f 75 72 63 <div>&#x2F;sourc
3d10: 65 73 26 23 78 32 46 3b 6b 61 72 65 65 6d 26 23 es&#x2F;kareem&#
3d20: 78 32 46 3b 64 61 74 61 3c 2f 64 69 76 3e 3c 2f x2F;data</div></
3d30: 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 td>.         </t
3d40: 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 r>.         .   
3d50: 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20       <tr>.     
3d60: 20 20 20 20 20 20 3c 74 64 3e 51 55 45 52 59 5f       <td>QUERY_
3d70: 53 54 52 49 4e 47 3c 2f 74 64 3e 0a 20 20 20 20 STRING</td>.    
3d80: 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73 73        <td class
3d90: 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 3c 2f 64 ="code"><div></d
3da0: 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 iv></td>.       
3db0: 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20 20   </tr>.        
3dc0: 20 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e 0a  .         <tr>.
3dd0: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e 52            <td>R
3de0: 45 4d 4f 54 45 5f 41 44 44 52 3c 2f 74 64 3e 0a EMOTE_ADDR</td>.
3df0: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 63            <td c
3e00: 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 lass="code"><div
3e10: 3e 31 32 37 2e 30 2e 30 2e 31 3c 2f 64 69 76 3e >127.0.0.1</div>
3e20: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c </td>.         <
3e30: 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 /tr>.         . 
3e40: 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20         <tr>.   
3e50: 20 20 20 20 20 20 20 20 3c 74 64 3e 52 45 4d 4f         <td>REMO
3e60: 54 45 5f 48 4f 53 54 3c 2f 74 64 3e 0a 20 20 20 TE_HOST</td>.   
3e70: 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73         <td clas
3e80: 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 6c 6f s="code"><div>lo
3e90: 63 61 6c 68 6f 73 74 3c 2f 64 69 76 3e 3c 2f 74 calhost</div></t
3ea0: 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 d>.         </tr
3eb0: 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 >.         .    
3ec0: 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20      <tr>.      
3ed0: 20 20 20 20 20 3c 74 64 3e 52 45 51 55 45 53 54      <td>REQUEST
3ee0: 5f 4d 45 54 48 4f 44 3c 2f 74 64 3e 0a 20 20 20 _METHOD</td>.   
3ef0: 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73         <td clas
3f00: 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 50 4f s="code"><div>PO
3f10: 53 54 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 ST</div></td>.  
3f20: 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20        </tr>.   
3f30: 20 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20       .         
3f40: 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 <tr>.           
3f50: 3c 74 64 3e 52 45 51 55 45 53 54 5f 50 41 54 48 <td>REQUEST_PATH
3f60: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 </td>.          
3f70: 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65  <td class="code
3f80: 22 3e 3c 64 69 76 3e 26 23 78 32 46 3b 73 6f 75 "><div>&#x2F;sou
3f90: 72 63 65 73 26 23 78 32 46 3b 6b 61 72 65 65 6d rces&#x2F;kareem
3fa0: 26 23 78 32 46 3b 64 61 74 61 3c 2f 64 69 76 3e &#x2F;data</div>
3fb0: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c </td>.         <
3fc0: 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 /tr>.         . 
3fd0: 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20         <tr>.   
3fe0: 20 20 20 20 20 20 20 20 3c 74 64 3e 52 45 51 55         <td>REQU
3ff0: 45 53 54 5f 55 52 49 3c 2f 74 64 3e 0a 20 20 20 EST_URI</td>.   
<= Recv data, 7461 bytes (0x1d25)
0000: 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73         <td clas
0010: 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 68 74 s="code"><div>ht
0020: 74 70 3a 26 23 78 32 46 3b 26 23 78 32 46 3b 6c tp:&#x2F;&#x2F;l
0030: 6f 63 61 6c 68 6f 73 74 3a 39 33 39 33 26 23 78 ocalhost:9393&#x
0040: 32 46 3b 73 6f 75 72 63 65 73 26 23 78 32 46 3b 2F;sources&#x2F;
0050: 6b 61 72 65 65 6d 26 23 78 32 46 3b 64 61 74 61 kareem&#x2F;data
0060: 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 </div></td>.    
0070: 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20      </tr>.     
0080: 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c 74     .         <t
0090: 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 r>.           <t
00a0: 64 3e 53 43 52 49 50 54 5f 4e 41 4d 45 3c 2f 74 d>SCRIPT_NAME</t
00b0: 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 d>.           <t
00c0: 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c d class="code"><
00d0: 64 69 76 3e 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a div></div></td>.
00e0: 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20          </tr>. 
00f0: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
0100: 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20   <tr>.         
0110: 20 20 3c 74 64 3e 53 45 52 56 45 52 5f 4e 41 4d   <td>SERVER_NAM
0120: 45 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 E</td>.         
0130: 20 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64   <td class="cod
0140: 65 22 3e 3c 64 69 76 3e 6c 6f 63 61 6c 68 6f 73 e"><div>localhos
0150: 74 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 t</div></td>.   
0160: 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20       </tr>.    
0170: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c      .         <
0180: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c tr>.           <
0190: 74 64 3e 53 45 52 56 45 52 5f 50 4f 52 54 3c 2f td>SERVER_PORT</
01a0: 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c td>.           <
01b0: 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e td class="code">
01c0: 3c 64 69 76 3e 39 33 39 33 3c 2f 64 69 76 3e 3c <div>9393</div><
01d0: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f /td>.         </
01e0: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 tr>.         .  
01f0: 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20        <tr>.    
0200: 20 20 20 20 20 20 20 3c 74 64 3e 53 45 52 56 45        <td>SERVE
0210: 52 5f 50 52 4f 54 4f 43 4f 4c 3c 2f 74 64 3e 0a R_PROTOCOL</td>.
0220: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 63            <td c
0230: 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 lass="code"><div
0240: 3e 48 54 54 50 26 23 78 32 46 3b 31 2e 31 3c 2f >HTTP&#x2F;1.1</
0250: 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 div></td>.      
0260: 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20    </tr>.       
0270: 20 20 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e   .         <tr>
0280: 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e .           <td>
0290: 53 45 52 56 45 52 5f 53 4f 46 54 57 41 52 45 3c SERVER_SOFTWARE<
02a0: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /td>.           
02b0: 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 <td class="code"
02c0: 3e 3c 64 69 76 3e 57 45 42 72 69 63 6b 26 23 78 ><div>WEBrick&#x
02d0: 32 46 3b 31 2e 33 2e 31 20 28 52 75 62 79 26 23 2F;1.3.1 (Ruby&#
02e0: 78 32 46 3b 31 2e 39 2e 33 26 23 78 32 46 3b 32 x2F;1.9.3&#x2F;2
02f0: 30 31 32 2d 30 34 2d 32 30 29 3c 2f 64 69 76 3e 012-04-20)</div>
0300: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c </td>.         <
0310: 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 /tr>.         . 
0320: 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20         <tr>.   
0330: 20 20 20 20 20 20 20 20 3c 74 64 3e 72 61 63 6b         <td>rack
0340: 2e 65 72 72 6f 72 73 3c 2f 74 64 3e 0a 20 20 20 .errors</td>.   
0350: 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73         <td clas
0360: 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 23 26 s="code"><div>#&
0370: 6c 74 3b 4f 62 6a 65 63 74 3a 30 78 30 30 37 66 lt;Object:0x007f
0380: 64 32 39 63 63 31 34 30 61 30 26 67 74 3b 3c 2f d29cc140a0&gt;</
0390: 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 div></td>.      
03a0: 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20    </tr>.       
03b0: 20 20 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e   .         <tr>
03c0: 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e .           <td>
03d0: 72 61 63 6b 2e 69 6e 70 75 74 3c 2f 74 64 3e 0a rack.input</td>.
03e0: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 63            <td c
03f0: 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 lass="code"><div
0400: 3e 23 26 6c 74 3b 52 61 63 6b 3a 3a 4c 69 6e 74 >#&lt;Rack::Lint
0410: 3a 3a 49 6e 70 75 74 57 72 61 70 70 65 72 3a 30 ::InputWrapper:0
0420: 78 30 30 37 66 64 32 39 63 64 31 39 33 36 30 20 x007fd29cd19360 
0430: 40 69 6e 70 75 74 3d 23 26 6c 74 3b 53 74 72 69 @input=#&lt;Stri
0440: 6e 67 49 4f 3a 30 78 30 30 37 66 64 32 39 62 31 ngIO:0x007fd29b1
0450: 32 37 32 31 30 26 67 74 3b 26 67 74 3b 3c 2f 64 27210&gt;&gt;</d
0460: 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 iv></td>.       
0470: 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20 20   </tr>.        
0480: 20 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e 0a  .         <tr>.
0490: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e 72            <td>r
04a0: 61 63 6b 2e 6c 6f 67 67 65 72 3c 2f 74 64 3e 0a ack.logger</td>.
04b0: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 63            <td c
04c0: 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 lass="code"><div
04d0: 3e 23 26 6c 74 3b 52 61 63 6b 3a 3a 4e 75 6c 6c >#&lt;Rack::Null
04e0: 4c 6f 67 67 65 72 3a 30 78 30 30 37 66 64 32 39 Logger:0x007fd29
04f0: 62 35 36 63 63 38 30 20 40 61 70 70 3d 23 26 6c b56cc80 @app=#&l
0500: 74 3b 52 61 63 6b 3a 3a 50 72 6f 74 65 63 74 69 t;Rack::Protecti
0510: 6f 6e 3a 3a 46 72 61 6d 65 4f 70 74 69 6f 6e 73 on::FrameOptions
0520: 3a 30 78 30 30 37 66 64 32 39 62 35 61 37 39 65 :0x007fd29b5a79e
0530: 38 20 40 61 70 70 3d 23 26 6c 74 3b 52 61 63 6b 8 @app=#&lt;Rack
0540: 3a 3a 50 72 6f 74 65 63 74 69 6f 6e 3a 3a 48 74 ::Protection::Ht
0550: 74 70 4f 72 69 67 69 6e 3a 30 78 30 30 37 66 64 tpOrigin:0x007fd
0560: 32 39 62 35 63 36 66 61 30 20 40 61 70 70 3d 23 29b5c6fa0 @app=#
0570: 26 6c 74 3b 52 61 63 6b 3a 3a 50 72 6f 74 65 63 &lt;Rack::Protec
0580: 74 69 6f 6e 3a 3a 49 50 53 70 6f 6f 66 69 6e 67 tion::IPSpoofing
0590: 3a 30 78 30 30 37 66 64 32 39 62 35 63 36 62 62 :0x007fd29b5c6bb
05a0: 38 20 40 61 70 70 3d 23 26 6c 74 3b 52 61 63 6b 8 @app=#&lt;Rack
05b0: 3a 3a 50 72 6f 74 65 63 74 69 6f 6e 3a 3a 4a 73 ::Protection::Js
05c0: 6f 6e 43 73 72 66 3a 30 78 30 30 37 66 64 32 39 onCsrf:0x007fd29
05d0: 62 35 63 37 65 66 30 20 40 61 70 70 3d 23 26 6c b5c7ef0 @app=#&l
05e0: 74 3b 52 61 63 6b 3a 3a 50 72 6f 74 65 63 74 69 t;Rack::Protecti
05f0: 6f 6e 3a 3a 50 61 74 68 54 72 61 76 65 72 73 61 on::PathTraversa
0600: 6c 3a 30 78 30 30 37 66 64 32 39 62 35 63 37 63 l:0x007fd29b5c7c
0610: 37 30 20 40 61 70 70 3d 23 26 6c 74 3b 52 61 63 70 @app=#&lt;Rac
0620: 6b 3a 3a 50 72 6f 74 65 63 74 69 6f 6e 3a 3a 58 k::Protection::X
0630: 53 53 48 65 61 64 65 72 3a 30 78 30 30 37 66 64 SSHeader:0x007fd
0640: 32 39 62 35 63 37 38 31 30 20 40 61 70 70 3d 23 29b5c7810 @app=#
0650: 26 6c 74 3b 54 72 61 66 66 69 63 53 70 79 3a 3a &lt;TrafficSpy::
0660: 52 6f 75 74 65 72 3a 30 78 30 30 37 66 64 32 39 Router:0x007fd29
0670: 63 64 34 35 31 39 30 20 40 64 65 66 61 75 6c 74 cd45190 @default
0680: 5f 6c 61 79 6f 75 74 3d 3a 6c 61 79 6f 75 74 2c _layout=:layout,
0690: 20 40 61 70 70 3d 6e 69 6c 2c 20 40 74 65 6d 70  @app=nil, @temp
06a0: 6c 61 74 65 5f 63 61 63 68 65 3d 23 26 6c 74 3b late_cache=#&lt;
06b0: 54 69 6c 74 3a 3a 43 61 63 68 65 3a 30 78 30 30 Tilt::Cache:0x00
06c0: 37 66 64 32 39 63 64 34 35 31 36 38 20 40 63 61 7fd29cd45168 @ca
06d0: 63 68 65 3d 7b 7d 26 67 74 3b 26 67 74 3b 2c 20 che={}&gt;&gt;, 
06e0: 40 6f 70 74 69 6f 6e 73 3d 7b 3a 72 65 61 63 74 @options={:react
06f0: 69 6f 6e 3d 26 67 74 3b 3a 64 72 6f 70 5f 73 65 ion=&gt;:drop_se
0700: 73 73 69 6f 6e 2c 20 3a 6c 6f 67 67 69 6e 67 3d ssion, :logging=
0710: 26 67 74 3b 74 72 75 65 2c 20 3a 6d 65 73 73 61 &gt;true, :messa
0720: 67 65 3d 26 67 74 3b 26 71 75 6f 74 3b 46 6f 72 ge=&gt;&quot;For
0730: 62 69 64 64 65 6e 26 71 75 6f 74 3b 2c 20 3a 65 bidden&quot;, :e
0740: 6e 63 72 79 70 74 6f 72 3d 26 67 74 3b 44 69 67 ncryptor=&gt;Dig
0750: 65 73 74 3a 3a 53 48 41 31 2c 20 3a 73 65 73 73 est::SHA1, :sess
0760: 69 6f 6e 5f 6b 65 79 3d 26 67 74 3b 26 71 75 6f ion_key=&gt;&quo
0770: 74 3b 72 61 63 6b 2e 73 65 73 73 69 6f 6e 26 71 t;rack.session&q
0780: 75 6f 74 3b 2c 20 3a 73 74 61 74 75 73 3d 26 67 uot;, :status=&g
0790: 74 3b 34 30 33 2c 20 3a 61 6c 6c 6f 77 5f 65 6d t;403, :allow_em
07a0: 70 74 79 5f 72 65 66 65 72 72 65 72 3d 26 67 74 pty_referrer=&gt
07b0: 3b 74 72 75 65 2c 20 3a 68 74 6d 6c 5f 74 79 70 ;true, :html_typ
07c0: 65 73 3d 26 67 74 3b 5b 26 71 75 6f 74 3b 74 65 es=&gt;[&quot;te
07d0: 78 74 26 23 78 32 46 3b 68 74 6d 6c 26 71 75 6f xt&#x2F;html&quo
07e0: 74 3b 2c 20 26 71 75 6f 74 3b 61 70 70 6c 69 63 t;, &quot;applic
07f0: 61 74 69 6f 6e 26 23 78 32 46 3b 78 68 74 6d 6c ation&#x2F;xhtml
0800: 26 71 75 6f 74 3b 5d 2c 20 3a 78 73 73 5f 6d 6f &quot;], :xss_mo
0810: 64 65 3d 26 67 74 3b 3a 62 6c 6f 63 6b 2c 20 3a de=&gt;:block, :
0820: 6e 6f 73 6e 69 66 66 3d 26 67 74 3b 74 72 75 65 nosniff=&gt;true
0830: 2c 20 3a 65 78 63 65 70 74 3d 26 67 74 3b 5b 3a , :except=&gt;[:
0840: 73 65 73 73 69 6f 6e 5f 68 69 6a 61 63 6b 69 6e session_hijackin
0850: 67 2c 20 3a 72 65 6d 6f 74 65 5f 74 6f 6b 65 6e g, :remote_token
0860: 5d 7d 26 67 74 3b 2c 20 40 6f 70 74 69 6f 6e 73 ]}&gt;, @options
0870: 3d 7b 3a 72 65 61 63 74 69 6f 6e 3d 26 67 74 3b ={:reaction=&gt;
0880: 3a 64 72 6f 70 5f 73 65 73 73 69 6f 6e 2c 20 3a :drop_session, :
0890: 6c 6f 67 67 69 6e 67 3d 26 67 74 3b 74 72 75 65 logging=&gt;true
08a0: 2c 20 3a 6d 65 73 73 61 67 65 3d 26 67 74 3b 26 , :message=&gt;&
08b0: 71 75 6f 74 3b 46 6f 72 62 69 64 64 65 6e 26 71 quot;Forbidden&q
08c0: 75 6f 74 3b 2c 20 3a 65 6e 63 72 79 70 74 6f 72 uot;, :encryptor
08d0: 3d 26 67 74 3b 44 69 67 65 73 74 3a 3a 53 48 41 =&gt;Digest::SHA
08e0: 31 2c 20 3a 73 65 73 73 69 6f 6e 5f 6b 65 79 3d 1, :session_key=
08f0: 26 67 74 3b 26 71 75 6f 74 3b 72 61 63 6b 2e 73 &gt;&quot;rack.s
0900: 65 73 73 69 6f 6e 26 71 75 6f 74 3b 2c 20 3a 73 ession&quot;, :s
0910: 74 61 74 75 73 3d 26 67 74 3b 34 30 33 2c 20 3a tatus=&gt;403, :
0920: 61 6c 6c 6f 77 5f 65 6d 70 74 79 5f 72 65 66 65 allow_empty_refe
0930: 72 72 65 72 3d 26 67 74 3b 74 72 75 65 2c 20 3a rrer=&gt;true, :
0940: 68 74 6d 6c 5f 74 79 70 65 73 3d 26 67 74 3b 5b html_types=&gt;[
0950: 26 71 75 6f 74 3b 74 65 78 74 26 23 78 32 46 3b &quot;text&#x2F;
0960: 68 74 6d 6c 26 71 75 6f 74 3b 2c 20 26 71 75 6f html&quot;, &quo
0970: 74 3b 61 70 70 6c 69 63 61 74 69 6f 6e 26 23 78 t;application&#x
0980: 32 46 3b 78 68 74 6d 6c 26 71 75 6f 74 3b 5d 2c 2F;xhtml&quot;],
0990: 20 3a 65 78 63 65 70 74 3d 26 67 74 3b 5b 3a 73  :except=&gt;[:s
09a0: 65 73 73 69 6f 6e 5f 68 69 6a 61 63 6b 69 6e 67 ession_hijacking
09b0: 2c 20 3a 72 65 6d 6f 74 65 5f 74 6f 6b 65 6e 5d , :remote_token]
09c0: 7d 26 67 74 3b 2c 20 40 6f 70 74 69 6f 6e 73 3d }&gt;, @options=
09d0: 7b 3a 72 65 61 63 74 69 6f 6e 3d 26 67 74 3b 3a {:reaction=&gt;:
09e0: 64 72 6f 70 5f 73 65 73 73 69 6f 6e 2c 20 3a 6c drop_session, :l
09f0: 6f 67 67 69 6e 67 3d 26 67 74 3b 74 72 75 65 2c ogging=&gt;true,
0a00: 20 3a 6d 65 73 73 61 67 65 3d 26 67 74 3b 26 71  :message=&gt;&q
0a10: 75 6f 74 3b 46 6f 72 62 69 64 64 65 6e 26 71 75 uot;Forbidden&qu
0a20: 6f 74 3b 2c 20 3a 65 6e 63 72 79 70 74 6f 72 3d ot;, :encryptor=
0a30: 26 67 74 3b 44 69 67 65 73 74 3a 3a 53 48 41 31 &gt;Digest::SHA1
0a40: 2c 20 3a 73 65 73 73 69 6f 6e 5f 6b 65 79 3d 26 , :session_key=&
0a50: 67 74 3b 26 71 75 6f 74 3b 72 61 63 6b 2e 73 65 gt;&quot;rack.se
0a60: 73 73 69 6f 6e 26 71 75 6f 74 3b 2c 20 3a 73 74 ssion&quot;, :st
0a70: 61 74 75 73 3d 26 67 74 3b 34 30 33 2c 20 3a 61 atus=&gt;403, :a
0a80: 6c 6c 6f 77 5f 65 6d 70 74 79 5f 72 65 66 65 72 llow_empty_refer
0a90: 72 65 72 3d 26 67 74 3b 74 72 75 65 2c 20 3a 68 rer=&gt;true, :h
0aa0: 74 6d 6c 5f 74 79 70 65 73 3d 26 67 74 3b 5b 26 tml_types=&gt;[&
0ab0: 71 75 6f 74 3b 74 65 78 74 26 23 78 32 46 3b 68 quot;text&#x2F;h
0ac0: 74 6d 6c 26 71 75 6f 74 3b 2c 20 26 71 75 6f 74 tml&quot;, &quot
0ad0: 3b 61 70 70 6c 69 63 61 74 69 6f 6e 26 23 78 32 ;application&#x2
0ae0: 46 3b 78 68 74 6d 6c 26 71 75 6f 74 3b 5d 2c 20 F;xhtml&quot;], 
0af0: 3a 65 78 63 65 70 74 3d 26 67 74 3b 5b 3a 73 65 :except=&gt;[:se
0b00: 73 73 69 6f 6e 5f 68 69 6a 61 63 6b 69 6e 67 2c ssion_hijacking,
0b10: 20 3a 72 65 6d 6f 74 65 5f 74 6f 6b 65 6e 5d 7d  :remote_token]}
0b20: 26 67 74 3b 2c 20 40 6f 70 74 69 6f 6e 73 3d 7b &gt;, @options={
0b30: 3a 72 65 61 63 74 69 6f 6e 3d 26 67 74 3b 3a 64 :reaction=&gt;:d
0b40: 72 6f 70 5f 73 65 73 73 69 6f 6e 2c 20 3a 6c 6f rop_session, :lo
0b50: 67 67 69 6e 67 3d 26 67 74 3b 74 72 75 65 2c 20 gging=&gt;true, 
0b60: 3a 6d 65 73 73 61 67 65 3d 26 67 74 3b 26 71 75 :message=&gt;&qu
0b70: 6f 74 3b 46 6f 72 62 69 64 64 65 6e 26 71 75 6f ot;Forbidden&quo
0b80: 74 3b 2c 20 3a 65 6e 63 72 79 70 74 6f 72 3d 26 t;, :encryptor=&
0b90: 67 74 3b 44 69 67 65 73 74 3a 3a 53 48 41 31 2c gt;Digest::SHA1,
0ba0: 20 3a 73 65 73 73 69 6f 6e 5f 6b 65 79 3d 26 67  :session_key=&g
0bb0: 74 3b 26 71 75 6f 74 3b 72 61 63 6b 2e 73 65 73 t;&quot;rack.ses
0bc0: 73 69 6f 6e 26 71 75 6f 74 3b 2c 20 3a 73 74 61 sion&quot;, :sta
0bd0: 74 75 73 3d 26 67 74 3b 34 30 33 2c 20 3a 61 6c tus=&gt;403, :al
0be0: 6c 6f 77 5f 65 6d 70 74 79 5f 72 65 66 65 72 72 low_empty_referr
0bf0: 65 72 3d 26 67 74 3b 74 72 75 65 2c 20 3a 68 74 er=&gt;true, :ht
0c00: 6d 6c 5f 74 79 70 65 73 3d 26 67 74 3b 5b 26 71 ml_types=&gt;[&q
0c10: 75 6f 74 3b 74 65 78 74 26 23 78 32 46 3b 68 74 uot;text&#x2F;ht
0c20: 6d 6c 26 71 75 6f 74 3b 2c 20 26 71 75 6f 74 3b ml&quot;, &quot;
0c30: 61 70 70 6c 69 63 61 74 69 6f 6e 26 23 78 32 46 application&#x2F
0c40: 3b 78 68 74 6d 6c 26 71 75 6f 74 3b 5d 2c 20 3a ;xhtml&quot;], :
0c50: 65 78 63 65 70 74 3d 26 67 74 3b 5b 3a 73 65 73 except=&gt;[:ses
0c60: 73 69 6f 6e 5f 68 69 6a 61 63 6b 69 6e 67 2c 20 sion_hijacking, 
0c70: 3a 72 65 6d 6f 74 65 5f 74 6f 6b 65 6e 5d 7d 26 :remote_token]}&
0c80: 67 74 3b 2c 20 40 6f 70 74 69 6f 6e 73 3d 7b 3a gt;, @options={:
0c90: 72 65 61 63 74 69 6f 6e 3d 26 67 74 3b 3a 64 72 reaction=&gt;:dr
0ca0: 6f 70 5f 73 65 73 73 69 6f 6e 2c 20 3a 6c 6f 67 op_session, :log
0cb0: 67 69 6e 67 3d 26 67 74 3b 74 72 75 65 2c 20 3a ging=&gt;true, :
0cc0: 6d 65 73 73 61 67 65 3d 26 67 74 3b 26 71 75 6f message=&gt;&quo
0cd0: 74 3b 46 6f 72 62 69 64 64 65 6e 26 71 75 6f 74 t;Forbidden&quot
0ce0: 3b 2c 20 3a 65 6e 63 72 79 70 74 6f 72 3d 26 67 ;, :encryptor=&g
0cf0: 74 3b 44 69 67 65 73 74 3a 3a 53 48 41 31 2c 20 t;Digest::SHA1, 
0d00: 3a 73 65 73 73 69 6f 6e 5f 6b 65 79 3d 26 67 74 :session_key=&gt
0d10: 3b 26 71 75 6f 74 3b 72 61 63 6b 2e 73 65 73 73 ;&quot;rack.sess
0d20: 69 6f 6e 26 71 75 6f 74 3b 2c 20 3a 73 74 61 74 ion&quot;, :stat
0d30: 75 73 3d 26 67 74 3b 34 30 33 2c 20 3a 61 6c 6c us=&gt;403, :all
0d40: 6f 77 5f 65 6d 70 74 79 5f 72 65 66 65 72 72 65 ow_empty_referre
0d50: 72 3d 26 67 74 3b 74 72 75 65 2c 20 3a 68 74 6d r=&gt;true, :htm
0d60: 6c 5f 74 79 70 65 73 3d 26 67 74 3b 5b 26 71 75 l_types=&gt;[&qu
0d70: 6f 74 3b 74 65 78 74 26 23 78 32 46 3b 68 74 6d ot;text&#x2F;htm
0d80: 6c 26 71 75 6f 74 3b 2c 20 26 71 75 6f 74 3b 61 l&quot;, &quot;a
0d90: 70 70 6c 69 63 61 74 69 6f 6e 26 23 78 32 46 3b pplication&#x2F;
0da0: 78 68 74 6d 6c 26 71 75 6f 74 3b 5d 2c 20 3a 65 xhtml&quot;], :e
0db0: 78 63 65 70 74 3d 26 67 74 3b 5b 3a 73 65 73 73 xcept=&gt;[:sess
0dc0: 69 6f 6e 5f 68 69 6a 61 63 6b 69 6e 67 2c 20 3a ion_hijacking, :
0dd0: 72 65 6d 6f 74 65 5f 74 6f 6b 65 6e 5d 7d 26 67 remote_token]}&g
0de0: 74 3b 2c 20 40 6f 70 74 69 6f 6e 73 3d 7b 3a 72 t;, @options={:r
0df0: 65 61 63 74 69 6f 6e 3d 26 67 74 3b 3a 64 72 6f eaction=&gt;:dro
0e00: 70 5f 73 65 73 73 69 6f 6e 2c 20 3a 6c 6f 67 67 p_session, :logg
0e10: 69 6e 67 3d 26 67 74 3b 74 72 75 65 2c 20 3a 6d ing=&gt;true, :m
0e20: 65 73 73 61 67 65 3d 26 67 74 3b 26 71 75 6f 74 essage=&gt;&quot
0e30: 3b 46 6f 72 62 69 64 64 65 6e 26 71 75 6f 74 3b ;Forbidden&quot;
0e40: 2c 20 3a 65 6e 63 72 79 70 74 6f 72 3d 26 67 74 , :encryptor=&gt
0e50: 3b 44 69 67 65 73 74 3a 3a 53 48 41 31 2c 20 3a ;Digest::SHA1, :
0e60: 73 65 73 73 69 6f 6e 5f 6b 65 79 3d 26 67 74 3b session_key=&gt;
0e70: 26 71 75 6f 74 3b 72 61 63 6b 2e 73 65 73 73 69 &quot;rack.sessi
0e80: 6f 6e 26 71 75 6f 74 3b 2c 20 3a 73 74 61 74 75 on&quot;, :statu
0e90: 73 3d 26 67 74 3b 34 30 33 2c 20 3a 61 6c 6c 6f s=&gt;403, :allo
0ea0: 77 5f 65 6d 70 74 79 5f 72 65 66 65 72 72 65 72 w_empty_referrer
0eb0: 3d 26 67 74 3b 74 72 75 65 2c 20 3a 68 74 6d 6c =&gt;true, :html
0ec0: 5f 74 79 70 65 73 3d 26 67 74 3b 5b 26 71 75 6f _types=&gt;[&quo
0ed0: 74 3b 74 65 78 74 26 23 78 32 46 3b 68 74 6d 6c t;text&#x2F;html
0ee0: 26 71 75 6f 74 3b 2c 20 26 71 75 6f 74 3b 61 70 &quot;, &quot;ap
0ef0: 70 6c 69 63 61 74 69 6f 6e 26 23 78 32 46 3b 78 plication&#x2F;x
0f00: 68 74 6d 6c 26 71 75 6f 74 3b 5d 2c 20 3a 66 72 html&quot;], :fr
0f10: 61 6d 65 5f 6f 70 74 69 6f 6e 73 3d 26 67 74 3b ame_options=&gt;
0f20: 3a 73 61 6d 65 6f 72 69 67 69 6e 2c 20 3a 65 78 :sameorigin, :ex
0f30: 63 65 70 74 3d 26 67 74 3b 5b 3a 73 65 73 73 69 cept=&gt;[:sessi
0f40: 6f 6e 5f 68 69 6a 61 63 6b 69 6e 67 2c 20 3a 72 on_hijacking, :r
0f50: 65 6d 6f 74 65 5f 74 6f 6b 65 6e 5d 7d 26 67 74 emote_token]}&gt
0f60: 3b 26 67 74 3b 3c 2f 64 69 76 3e 3c 2f 74 64 3e ;&gt;</div></td>
0f70: 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a .         </tr>.
0f80: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
0f90: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
0fa0: 20 20 20 3c 74 64 3e 72 61 63 6b 2e 6d 75 6c 74    <td>rack.mult
0fb0: 69 70 72 6f 63 65 73 73 3c 2f 74 64 3e 0a 20 20 iprocess</td>.  
0fc0: 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61          <td cla
0fd0: 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 66 ss="code"><div>f
0fe0: 61 6c 73 65 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a alse</div></td>.
0ff0: 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20          </tr>. 
1000: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1010: 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20   <tr>.         
1020: 20 20 3c 74 64 3e 72 61 63 6b 2e 6d 75 6c 74 69   <td>rack.multi
1030: 74 68 72 65 61 64 3c 2f 74 64 3e 0a 20 20 20 20 thread</td>.    
1040: 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73 73        <td class
1050: 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 74 72 75 ="code"><div>tru
1060: 65 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 e</div></td>.   
1070: 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20       </tr>.    
1080: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c      .         <
1090: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c tr>.           <
10a0: 74 64 3e 72 61 63 6b 2e 72 65 71 75 65 73 74 2e td>rack.request.
10b0: 63 6f 6f 6b 69 65 5f 68 61 73 68 3c 2f 74 64 3e cookie_hash</td>
10c0: 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 .           <td 
10d0: 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 class="code"><di
10e0: 76 3e 7b 7d 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a v>{}</div></td>.
10f0: 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20          </tr>. 
1100: 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20 20         .       
1110: 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20 20   <tr>.         
1120: 20 20 3c 74 64 3e 72 61 63 6b 2e 72 65 71 75 65   <td>rack.reque
1130: 73 74 2e 66 6f 72 6d 5f 68 61 73 68 3c 2f 74 64 st.form_hash</td
1140: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 >.           <td
1150: 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64  class="code"><d
1160: 69 76 3e 7b 26 71 75 6f 74 3b 70 61 79 6c 6f 61 iv>{&quot;payloa
1170: 64 26 71 75 6f 74 3b 3d 26 67 74 3b 26 71 75 6f d&quot;=&gt;&quo
1180: 74 3b 7b 5c 26 71 75 6f 74 3b 75 72 6c 5c 26 71 t;{\&quot;url\&q
1190: 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b 68 74 74 70 uot;:\&quot;http
11a0: 3a 26 23 78 32 46 3b 26 23 78 32 46 3b 6a 75 6d :&#x2F;&#x2F;jum
11b0: 70 73 74 61 72 74 6c 61 62 2e 63 6f 6d 26 23 78 pstartlab.com&#x
11c0: 32 46 3b 62 6c 6f 67 5c 26 71 75 6f 74 3b 2c 5c 2F;blog\&quot;,\
11d0: 26 71 75 6f 74 3b 72 65 71 75 65 73 74 65 64 41 &quot;requestedA
11e0: 74 5c 26 71 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b t\&quot;:\&quot;
11f0: 32 30 31 33 2d 30 32 2d 31 36 20 32 31 3a 33 38 2013-02-16 21:38
1200: 3a 32 38 20 2d 30 37 30 30 5c 26 71 75 6f 74 3b :28 -0700\&quot;
1210: 2c 5c 26 71 75 6f 74 3b 72 65 73 70 6f 6e 64 65 ,\&quot;responde
1220: 64 49 6e 5c 26 71 75 6f 74 3b 3a 33 37 2c 5c 26 dIn\&quot;:37,\&
1230: 71 75 6f 74 3b 72 65 66 65 72 72 65 64 42 79 5c quot;referredBy\
1240: 26 71 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b 68 74 &quot;:\&quot;ht
1250: 74 70 3a 26 23 78 32 46 3b 26 23 78 32 46 3b 6a tp:&#x2F;&#x2F;j
1260: 75 6d 70 73 74 61 72 74 6c 61 62 2e 63 6f 6d 5c umpstartlab.com\
1270: 26 71 75 6f 74 3b 2c 5c 26 71 75 6f 74 3b 72 65 &quot;,\&quot;re
1280: 71 75 65 73 74 54 79 70 65 5c 26 71 75 6f 74 3b questType\&quot;
1290: 3a 5c 26 71 75 6f 74 3b 47 45 54 5c 26 71 75 6f :\&quot;GET\&quo
12a0: 74 3b 2c 5c 26 71 75 6f 74 3b 70 61 72 61 6d 65 t;,\&quot;parame
12b0: 74 65 72 73 5c 26 71 75 6f 74 3b 3a 5b 5d 2c 5c ters\&quot;:[],\
12c0: 26 71 75 6f 74 3b 65 76 65 6e 74 4e 61 6d 65 5c &quot;eventName\
12d0: 26 71 75 6f 74 3b 3a 20 5c 26 71 75 6f 74 3b 73 &quot;: \&quot;s
12e0: 6f 63 69 61 6c 4c 6f 67 69 6e 5c 26 71 75 6f 74 ocialLogin\&quot
12f0: 3b 2c 5c 26 71 75 6f 74 3b 75 73 65 72 41 67 65 ;,\&quot;userAge
1300: 6e 74 5c 26 71 75 6f 74 3b 3a 5c 26 71 75 6f 74 nt\&quot;:\&quot
1310: 3b 4d 6f 7a 69 6c 6c 61 26 23 78 32 46 3b 35 2e ;Mozilla&#x2F;5.
1320: 30 20 28 4d 61 63 69 6e 74 6f 73 68 3b 20 49 6e 0 (Macintosh; In
1330: 74 65 6c 20 4d 61 63 20 4f 53 20 58 20 31 30 5f tel Mac OS X 10_
1340: 38 5f 32 29 20 41 70 70 6c 65 57 65 62 4b 69 74 8_2) AppleWebKit
1350: 26 23 78 32 46 3b 35 33 37 2e 31 37 20 28 4b 48 &#x2F;537.17 (KH
1360: 54 4d 4c 2c 20 6c 69 6b 65 20 47 65 63 6b 6f 29 TML, like Gecko)
1370: 20 43 68 72 6f 6d 65 26 23 78 32 46 3b 32 34 2e  Chrome&#x2F;24.
1380: 30 2e 31 33 30 39 2e 30 20 53 61 66 61 72 69 26 0.1309.0 Safari&
1390: 23 78 32 46 3b 35 33 37 2e 31 37 5c 26 71 75 6f #x2F;537.17\&quo
13a0: 74 3b 2c 5c 26 71 75 6f 74 3b 72 65 73 6f 6c 75 t;,\&quot;resolu
13b0: 74 69 6f 6e 57 69 64 74 68 5c 26 71 75 6f 74 3b tionWidth\&quot;
13c0: 3a 5c 26 71 75 6f 74 3b 31 39 32 30 5c 26 71 75 :\&quot;1920\&qu
13d0: 6f 74 3b 2c 5c 26 71 75 6f 74 3b 72 65 73 6f 6c ot;,\&quot;resol
13e0: 75 74 69 6f 6e 48 65 69 67 68 74 5c 26 71 75 6f utionHeight\&quo
13f0: 74 3b 3a 5c 26 71 75 6f 74 3b 31 32 38 30 5c 26 t;:\&quot;1280\&
1400: 71 75 6f 74 3b 2c 5c 26 71 75 6f 74 3b 69 70 5c quot;,\&quot;ip\
1410: 26 71 75 6f 74 3b 3a 5c 26 71 75 6f 74 3b 36 33 &quot;:\&quot;63
1420: 2e 32 39 2e 33 38 2e 32 31 31 5c 26 71 75 6f 74 .29.38.211\&quot
1430: 3b 7d 26 71 75 6f 74 3b 7d 3c 2f 64 69 76 3e 3c ;}&quot;}</div><
1440: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f /td>.         </
1450: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 tr>.         .  
1460: 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20        <tr>.    
1470: 20 20 20 20 20 20 20 3c 74 64 3e 72 61 63 6b 2e        <td>rack.
1480: 72 65 71 75 65 73 74 2e 66 6f 72 6d 5f 69 6e 70 request.form_inp
1490: 75 74 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 ut</td>.        
14a0: 20 20 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f    <td class="co
14b0: 64 65 22 3e 3c 64 69 76 3e 23 26 6c 74 3b 52 61 de"><div>#&lt;Ra
14c0: 63 6b 3a 3a 4c 69 6e 74 3a 3a 49 6e 70 75 74 57 ck::Lint::InputW
14d0: 72 61 70 70 65 72 3a 30 78 30 30 37 66 64 32 39 rapper:0x007fd29
14e0: 63 64 31 39 33 36 30 20 40 69 6e 70 75 74 3d 23 cd19360 @input=#
14f0: 26 6c 74 3b 53 74 72 69 6e 67 49 4f 3a 30 78 30 &lt;StringIO:0x0
1500: 30 37 66 64 32 39 62 31 32 37 32 31 30 26 67 74 07fd29b127210&gt
1510: 3b 26 67 74 3b 3c 2f 64 69 76 3e 3c 2f 74 64 3e ;&gt;</div></td>
1520: 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a .         </tr>.
1530: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
1540: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
1550: 20 20 20 3c 74 64 3e 72 61 63 6b 2e 72 65 71 75    <td>rack.requ
1560: 65 73 74 2e 66 6f 72 6d 5f 76 61 72 73 3c 2f 74 est.form_vars</t
1570: 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 d>.           <t
1580: 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c d class="code"><
1590: 64 69 76 3e 70 61 79 6c 6f 61 64 3d 7b 26 71 75 div>payload={&qu
15a0: 6f 74 3b 75 72 6c 26 71 75 6f 74 3b 3a 26 71 75 ot;url&quot;:&qu
15b0: 6f 74 3b 68 74 74 70 3a 26 23 78 32 46 3b 26 23 ot;http:&#x2F;&#
15c0: 78 32 46 3b 6a 75 6d 70 73 74 61 72 74 6c 61 62 x2F;jumpstartlab
15d0: 2e 63 6f 6d 26 23 78 32 46 3b 62 6c 6f 67 26 71 .com&#x2F;blog&q
15e0: 75 6f 74 3b 2c 26 71 75 6f 74 3b 72 65 71 75 65 uot;,&quot;reque
15f0: 73 74 65 64 41 74 26 71 75 6f 74 3b 3a 26 71 75 stedAt&quot;:&qu
1600: 6f 74 3b 32 30 31 33 2d 30 32 2d 31 36 20 32 31 ot;2013-02-16 21
1610: 3a 33 38 3a 32 38 20 2d 30 37 30 30 26 71 75 6f :38:28 -0700&quo
1620: 74 3b 2c 26 71 75 6f 74 3b 72 65 73 70 6f 6e 64 t;,&quot;respond
1630: 65 64 49 6e 26 71 75 6f 74 3b 3a 33 37 2c 26 71 edIn&quot;:37,&q
1640: 75 6f 74 3b 72 65 66 65 72 72 65 64 42 79 26 71 uot;referredBy&q
1650: 75 6f 74 3b 3a 26 71 75 6f 74 3b 68 74 74 70 3a uot;:&quot;http:
1660: 26 23 78 32 46 3b 26 23 78 32 46 3b 6a 75 6d 70 &#x2F;&#x2F;jump
1670: 73 74 61 72 74 6c 61 62 2e 63 6f 6d 26 71 75 6f startlab.com&quo
1680: 74 3b 2c 26 71 75 6f 74 3b 72 65 71 75 65 73 74 t;,&quot;request
1690: 54 79 70 65 26 71 75 6f 74 3b 3a 26 71 75 6f 74 Type&quot;:&quot
16a0: 3b 47 45 54 26 71 75 6f 74 3b 2c 26 71 75 6f 74 ;GET&quot;,&quot
16b0: 3b 70 61 72 61 6d 65 74 65 72 73 26 71 75 6f 74 ;parameters&quot
16c0: 3b 3a 5b 5d 2c 26 71 75 6f 74 3b 65 76 65 6e 74 ;:[],&quot;event
16d0: 4e 61 6d 65 26 71 75 6f 74 3b 3a 20 26 71 75 6f Name&quot;: &quo
16e0: 74 3b 73 6f 63 69 61 6c 4c 6f 67 69 6e 26 71 75 t;socialLogin&qu
16f0: 6f 74 3b 2c 26 71 75 6f 74 3b 75 73 65 72 41 67 ot;,&quot;userAg
1700: 65 6e 74 26 71 75 6f 74 3b 3a 26 71 75 6f 74 3b ent&quot;:&quot;
1710: 4d 6f 7a 69 6c 6c 61 26 23 78 32 46 3b 35 2e 30 Mozilla&#x2F;5.0
1720: 20 28 4d 61 63 69 6e 74 6f 73 68 25 33 42 20 49  (Macintosh%3B I
1730: 6e 74 65 6c 20 4d 61 63 20 4f 53 20 58 20 31 30 ntel Mac OS X 10
1740: 5f 38 5f 32 29 20 41 70 70 6c 65 57 65 62 4b 69 _8_2) AppleWebKi
1750: 74 26 23 78 32 46 3b 35 33 37 2e 31 37 20 28 4b t&#x2F;537.17 (K
1760: 48 54 4d 4c 2c 20 6c 69 6b 65 20 47 65 63 6b 6f HTML, like Gecko
1770: 29 20 43 68 72 6f 6d 65 26 23 78 32 46 3b 32 34 ) Chrome&#x2F;24
1780: 2e 30 2e 31 33 30 39 2e 30 20 53 61 66 61 72 69 .0.1309.0 Safari
1790: 26 23 78 32 46 3b 35 33 37 2e 31 37 26 71 75 6f &#x2F;537.17&quo
17a0: 74 3b 2c 26 71 75 6f 74 3b 72 65 73 6f 6c 75 74 t;,&quot;resolut
17b0: 69 6f 6e 57 69 64 74 68 26 71 75 6f 74 3b 3a 26 ionWidth&quot;:&
17c0: 71 75 6f 74 3b 31 39 32 30 26 71 75 6f 74 3b 2c quot;1920&quot;,
17d0: 26 71 75 6f 74 3b 72 65 73 6f 6c 75 74 69 6f 6e &quot;resolution
17e0: 48 65 69 67 68 74 26 71 75 6f 74 3b 3a 26 71 75 Height&quot;:&qu
17f0: 6f 74 3b 31 32 38 30 26 71 75 6f 74 3b 2c 26 71 ot;1280&quot;,&q
1800: 75 6f 74 3b 69 70 26 71 75 6f 74 3b 3a 26 71 75 uot;ip&quot;:&qu
1810: 6f 74 3b 36 33 2e 32 39 2e 33 38 2e 32 31 31 26 ot;63.29.38.211&
1820: 71 75 6f 74 3b 7d 3c 2f 64 69 76 3e 3c 2f 74 64 quot;}</div></td
1830: 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e >.         </tr>
1840: 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 .         .     
1850: 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20     <tr>.       
1860: 20 20 20 20 3c 74 64 3e 72 61 63 6b 2e 72 65 71     <td>rack.req
1870: 75 65 73 74 2e 71 75 65 72 79 5f 68 61 73 68 3c uest.query_hash<
1880: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /td>.           
1890: 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 <td class="code"
18a0: 3e 3c 64 69 76 3e 7b 7d 3c 2f 64 69 76 3e 3c 2f ><div>{}</div></
18b0: 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 td>.         </t
18c0: 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 20 20 r>.         .   
18d0: 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20 20 20       <tr>.     
18e0: 20 20 20 20 20 20 3c 74 64 3e 72 61 63 6b 2e 72       <td>rack.r
18f0: 65 71 75 65 73 74 2e 71 75 65 72 79 5f 73 74 72 equest.query_str
1900: 69 6e 67 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 ing</td>.       
1910: 20 20 20 20 3c 74 64 20 63 6c 61 73 73 3d 22 63     <td class="c
1920: 6f 64 65 22 3e 3c 64 69 76 3e 3c 2f 64 69 76 3e ode"><div></div>
1930: 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 3c </td>.         <
1940: 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20 0a 20 /tr>.         . 
1950: 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 20 20         <tr>.   
1960: 20 20 20 20 20 20 20 20 3c 74 64 3e 72 61 63 6b         <td>rack
1970: 2e 72 75 6e 5f 6f 6e 63 65 3c 2f 74 64 3e 0a 20 .run_once</td>. 
1980: 20 20 20 20 20 20 20 20 20 20 3c 74 64 20 63 6c           <td cl
1990: 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e ass="code"><div>
19a0: 66 61 6c 73 65 3c 2f 64 69 76 3e 3c 2f 74 64 3e false</div></td>
19b0: 0a 20 20 20 20 20 20 20 20 20 3c 2f 74 72 3e 0a .         </tr>.
19c0: 20 20 20 20 20 20 20 20 20 0a 20 20 20 20 20 20          .      
19d0: 20 20 20 3c 74 72 3e 0a 20 20 20 20 20 20 20 20    <tr>.        
19e0: 20 20 20 3c 74 64 3e 72 61 63 6b 2e 75 72 6c 5f    <td>rack.url_
19f0: 73 63 68 65 6d 65 3c 2f 74 64 3e 0a 20 20 20 20 scheme</td>.    
1a00: 20 20 20 20 20 20 20 3c 74 64 20 63 6c 61 73 73        <td class
1a10: 3d 22 63 6f 64 65 22 3e 3c 64 69 76 3e 68 74 74 ="code"><div>htt
1a20: 70 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 p</div></td>.   
1a30: 20 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20       </tr>.    
1a40: 20 20 20 20 20 0a 20 20 20 20 20 20 20 20 20 3c      .         <
1a50: 74 72 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c tr>.           <
1a60: 74 64 3e 72 61 63 6b 2e 76 65 72 73 69 6f 6e 3c td>rack.version<
1a70: 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 20 20 20 /td>.           
1a80: 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 <td class="code"
1a90: 3e 3c 64 69 76 3e 5b 31 2c 20 32 5d 3c 2f 64 69 ><div>[1, 2]</di
1aa0: 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 v></td>.        
1ab0: 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20 20 20  </tr>.         
1ac0: 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e 0a 20 .         <tr>. 
1ad0: 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e 73 69           <td>si
1ae0: 6e 61 74 72 61 2e 63 6f 6d 6d 6f 6e 6c 6f 67 67 natra.commonlogg
1af0: 65 72 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 20 er</td>.        
1b00: 20 20 20 3c 74 64 20 63 6c 61 73 73 3d 22 63 6f    <td class="co
1b10: 64 65 22 3e 3c 64 69 76 3e 74 72 75 65 3c 2f 64 de"><div>true</d
1b20: 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 20 20 20 iv></td>.       
1b30: 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20 20 20 20   </tr>.        
1b40: 20 0a 20 20 20 20 20 20 20 20 20 3c 74 72 3e 0a  .         <tr>.
1b50: 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 3e 73            <td>s
1b60: 69 6e 61 74 72 61 2e 65 72 72 6f 72 3c 2f 74 64 inatra.error</td
1b70: 3e 0a 20 20 20 20 20 20 20 20 20 20 20 3c 74 64 >.           <td
1b80: 20 63 6c 61 73 73 3d 22 63 6f 64 65 22 3e 3c 64  class="code"><d
1b90: 69 76 3e 23 26 6c 74 3b 4e 61 6d 65 45 72 72 6f iv>#&lt;NameErro
1ba0: 72 3a 20 75 6e 64 65 66 69 6e 65 64 20 6c 6f 63 r: undefined loc
1bb0: 61 6c 20 76 61 72 69 61 62 6c 65 20 6f 72 20 6d al variable or m
1bc0: 65 74 68 6f 64 20 60 70 61 79 6c 6f 61 64 26 23 ethod `payload&#
1bd0: 78 32 37 3b 20 66 6f 72 20 23 26 6c 74 3b 54 72 x27; for #&lt;Tr
1be0: 61 66 66 69 63 53 70 79 3a 3a 52 65 71 75 65 73 afficSpy::Reques
1bf0: 74 50 61 72 73 65 72 3a 30 78 30 30 37 66 64 32 tParser:0x007fd2
1c00: 39 62 32 33 65 33 38 38 26 67 74 3b 26 67 74 3b 9b23e388&gt;&gt;
1c10: 3c 2f 64 69 76 3e 3c 2f 74 64 3e 0a 20 20 20 20 </div></td>.    
1c20: 20 20 20 20 20 3c 2f 74 72 3e 0a 20 20 20 20 20      </tr>.     
1c30: 20 20 20 20 0a 20 20 20 20 20 20 3c 2f 74 61 62     .      </tab
1c40: 6c 65 3e 0a 20 20 20 20 20 20 3c 64 69 76 20 63 le>.      <div c
1c50: 6c 61 73 73 3d 22 63 6c 65 61 72 22 3e 3c 2f 64 lass="clear"></d
1c60: 69 76 3e 0a 20 20 20 20 3c 2f 64 69 76 3e 20 3c iv>.    </div> <
1c70: 21 2d 2d 20 2f 52 41 43 4b 20 45 4e 56 20 2d 2d !-- /RACK ENV --
1c80: 3e 0a 0a 20 20 20 20 3c 70 20 69 64 3d 22 65 78 >..    <p id="ex
1c90: 70 6c 61 6e 61 74 69 6f 6e 22 3e 59 6f 75 27 72 planation">You'r
1ca0: 65 20 73 65 65 69 6e 67 20 74 68 69 73 20 65 72 e seeing this er
1cb0: 72 6f 72 20 62 65 63 61 75 73 65 20 79 6f 75 20 ror because you 
1cc0: 68 61 76 65 0a 65 6e 61 62 6c 65 64 20 74 68 65 have.enabled the
1cd0: 20 3c 63 6f 64 65 3e 73 68 6f 77 5f 65 78 63 65  <code>show_exce
1ce0: 70 74 69 6f 6e 73 3c 2f 63 6f 64 65 3e 20 73 65 ptions</code> se
1cf0: 74 74 69 6e 67 2e 3c 2f 70 3e 0a 20 20 3c 2f 64 tting.</p>.  </d
1d00: 69 76 3e 20 3c 21 2d 2d 20 2f 57 52 41 50 20 2d iv> <!-- /WRAP -
1d10: 2d 3e 0a 20 20 3c 2f 62 6f 64 79 3e 0a 3c 2f 68 ->.  </body>.</h
1d20: 74 6d 6c 3e 0a                                  tml>.
== Info: Connection #0 to host localhost left intact
== Info: Closing connection #0
